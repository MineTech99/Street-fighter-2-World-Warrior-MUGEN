;---------------------------------------------------------------------------
; 基本データ
;---------------------------------------------------------------------------
[Data]
life              = 926   ;ライフ（体力ゲージ）最大値
power             = 3000   ;パワーゲージ最大値（オプション・デフォルトは3000=Lv.3）
attack            = 100    ;攻撃力（デフォルトは１００％）
defence           = 100    ;防御力（デフォルトは１００％）
fall.defence_up   = 50     ;横に倒れている時に一時的に加える防御力（％）
liedown.time      = 60     ;横に倒れている時間（フレーム）
airjuggle         = 15     ;ジャグルポイント限界値（「小ネタ.txt」参照）
sparkno           = 2      ;デフォルトのヒットスパーク（fightfxから）
guard.sparkno     = 40     ;デフォルトのガードスパーク（fightfxから）
KO.echo           = 0      ;ＫＯ時の音声（11,0）にエコーを掛けるか否か（0=掛けない,1=掛ける）
volume            = 200    ;キャラの標準の音量（最小-255・最大255）
IntPersistIndex   = 0     ;次のラウンドへ持ち越せる「Var」のアドレスの範囲を決める（※１）
FloatPersistIndex = 0     ;次のラウンドへ持ち越せる「FVar」のアドレスの範囲を決める（※１）

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; サイズ
;---------------------------------------------------------------------------
[Size]
xscale           = 0.83       ;キャラの横の大きさ（絶対値・float）
yscale           = 1.07       ;キャラの縦の大きさ（絶対値・float）
ground.back      = 14         ;地上にいる時の「後方の物理的な幅」
ground.front     = 14         ;地上にいる時の「前方の物理的な幅」
air.back         = 14         ;空中にいる時の「後方の物理的な幅」
air.front        = 14         ;空中にいる時の「前方の物理的な幅」
height           = 65      ;キャラの物理的な高さ（高いほど相手は飛び越しにくくなる）
attack.dist      = 150     ;相手がガード態勢に入る最低の距離
proj.attack.dist = 90      ;自分の「Projectile」に対して相手がガード態勢に入る最低の距離
proj.doscale     = 1       ;xscaleとyscaleを「Projectile」にも影響させるか否か（0=させない・1=させる）
head.pos         = 3,-81  ;キャラの標準の頭の座標（Bind系で適用される）
mid.pos          = -5,-52  ;キャラの標準の体中心の座標（Bind系で適用される）
shadowoffset     = 0       ;影のＹ軸方向の位置座標
draw.offset      = 0,0     ;キャラの表示座標（Ｘ軸,Ｙ軸）

;---------------------------------------------------------------------------
; 移動速度
;---------------------------------------------------------------------------
[Velocity]
walk.fwd     = 3.43         ;前進速度（Ｘ軸・[Statedef 20]に適用される）
walk.back    = -2.27        ;後退速度（Ｘ軸・[Statedef 20]に適用される）
run.fwd      = 4.6,0       ;前方に走る速度（Ｘ軸,Ｙ軸・[Statedef 100]に適用される）
run.back     = -4.5,-3.8   ;後方に走る速度（Ｘ軸,Ｙ軸・[Statedef 105]に適用される）
jump.neu     = 0,-9.37      ;垂直ジャンプの速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
jump.back    = -3.84       ;後方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.fwd     = 3.4         ;前方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
runjump.back = -2.55,-8.1  ;後方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
runjump.fwd  = 4,-8.1      ;前方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
airjump.neu  = 0,-8.1      ;空中垂直ジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 45]に適用される）
airjump.back = -2.55       ;空中後方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）
airjump.fwd  = 2.5         ;空中前方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）

;---------------------------------------------------------------------------
; 運動関係
;---------------------------------------------------------------------------
[Movement]
airjump.num     = 0        ;空中ジャンプが出来る回数
airjump.height  = 35       ;空中ジャンプが出来る最低の高度（Ｙ軸）
yaccel          = .54      ;Ｙ軸加速度（重力）
stand.friction  = .85      ;立っている時の摩擦係数（ステートのPhysicsが「S」の時）
crouch.friction = .82      ;しゃがんでいる時の摩擦係数（ステートのPhysicsが「C」の時）

;===========================================================================
; ステート
;===========================================================================
;===========================================================================
; 基本行動
;===========================================================================
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0
velset = 0,0

[State 0, 2]
type = ChangeAnim
triggerall = Anim != 180
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State -2]
type = VarSet
triggerall = Var(59)
triggerall = Var(5)
trigger1 = var(5) >= 40 + 5*random%4
trigger2 = var(5) >= 60
trigger3 = var(5) >= 30
trigger3 = P2bodydist X >= 160
var(5) = 0

[State -2]
type = VarAdd
triggerall = Var(59)
trigger1 = Var(5)
var(5) = 1

[State -2]
type = VarSet
triggerall = Var(59)
triggerall = Var(12) = 20
triggerall = !Var(5)
triggerall = time = 0
trigger1 = prevstateno = [21,22]
trigger1 = P2bodydist X = [ceil(90*const(size.xscale)),170]
var(5) = 1

[State 0, 2]
type = ChangeAnim
triggerall = roundstate >= 3
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
value = 180

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

;ガード
[State -3]
Type = ChangeState
Value = 120
TriggerAll = Var(59)
triggerall = roundstate = 2
TriggerAll = Ctrl || Var(40)
TriggerAll = statetype != A
Trigger1 = var(55) >= 7
Trigger1 = P2Dist X >= 0
Trigger1 = EnemyNear,HitDefAttr = ,AA,AP
Trigger1 = Random = [0,350]
Trigger2 = EnemyNear,HitDefAttr = ,AA,AP
Trigger2 = P2MoveType = A
Trigger2 = P2Dist X < 0
Trigger3 = Enemy,NumHelper > 0 || Enemy,NumProj > 0
Trigger3 = var(55) >= 7
Trigger3 = Random = [0,350]
Trigger4 = var(55) >= 7
Trigger4 = Var(5)
ctrl = 1

;===========================================================================
; Stand(AI)
[Statedef 1]
type = S
physics = S
sprpriority = 0
velset = 0,0
ctrl = 0

[State 3000,00]
type = Palfx
trigger1 = time = 0
trigger1 = var(9) >= 3
;add = 200,50,50
sinadd = 10, 10, 10
mul = 120,120,120
time = 16
invertall = 0
color = 256

[State 0, 2]
type = ChangeAnim
triggerall = Anim != 180
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 2]
type = ChangeAnim
triggerall = Anim != 180
trigger1 = Anim = 0 
trigger1 = P2dist X < 0
value = 5

[State 20, 1]
type = Turn
triggerall = Anim != 180
trigger1 = P2dist X < 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

[State -2]
type = null;CtrlSet
triggerall = Var(59)
triggerall = roundstate = 2
triggerall = PrevstateNo != [180,199]
trigger1 = var(40) >= 32 + 4*(random%4)
trigger2 = var(40) >= 45
trigger3 = P2bodydist X <= 120
trigger4 = Inguarddist
trigger5 = !var(40) && Time >= 2
trigger6 = roundstate = 2
value = 1

[State -2]
type = VarSet
triggerall = Var(59)
triggerall = Var(40)
trigger1 = var(40) >= 32 + 4*(random%4)
trigger2 = var(40) >= 50
trigger3 = P2bodydist X <= 120
trigger4 = Inguarddist
var(40) = 0

[State -2]
type = VarAdd
triggerall = Var(59)
trigger1 = time >= 1
trigger1 = Var(40)
var(40) = 1

[State -2]
type = VarSet
triggerall = Var(59)
triggerall = Var(12) = 10
triggerall = !Var(40)
triggerall = time = 0
trigger1 = !Inguarddist
trigger1 = NumProj || (Projcontacttime(1000) = [1,30]) || (Projcontacttime(1100) = [1,30])
trigger1 = P2bodydist X >= 100
trigger1 = random <= 850
var(40) = 1

[State -2]
type = null;CtrlSet
triggerall = Var(59)
triggerall = Var(12) = 10
triggerall = Var(40)
triggerall = time = [0,5]
trigger1 = !Inguarddist
trigger1 = NumProj
trigger1 = P2bodydist X >= 100
value = 0

;ガード
[State -3]
Type = ChangeState
Value = 120
TriggerAll = Var(59)
triggerall = roundstate = 2
TriggerAll = statetype != A
Trigger1 = var(55) >= 7
Trigger1 = P2Dist X >= 0
Trigger1 = EnemyNear,HitDefAttr = ,AA,AP
Trigger1 = Random = [0,350]
Trigger2 = EnemyNear,HitDefAttr = ,AA,AP
Trigger2 = P2MoveType = A
Trigger2 = P2Dist X < 0
Trigger3 = Enemy,NumHelper > 0 || Enemy,NumProj > 0
Trigger3 = var(55) >= 7
Trigger3 = Random = [0,350]
Trigger4 = var(55) >= 7
Trigger4 = Var(5)
trigger5 = Inguarddist
ctrl = 1

[State -3]
Type = null;ChangeState
Value = 0
TriggerAll = Var(59)
trigger1 = var(40) >= 32 + 4*(random%4)
trigger2 = var(40) >= 45
trigger3 = P2bodydist X <= 120
trigger4 = Inguarddist
trigger5 = !var(40) && Time >= 2
trigger6 = roundstate >= 3
Trigger7 = P2MoveType = A
trigger8 = enemynear,vel X >= 3
trigger9 = P2bodydist Y <= -55
ctrl = 1

[State -3]
Type = ChangeState
Value = 0
TriggerAll = Var(59)
trigger1 = roundstate >= 3
ctrl = 1

[State -3]
Type = ChangeState
Value = ifelse(P2bodydist X <= 100, 22, 21)
TriggerAll = Var(59)
triggerall = !Inguarddist
trigger1 = time >= 1
ctrl = 0

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = C
Ctrl = 1
;anim = 10

[State -1]
Type = ChangeState
Triggerall = var(59)
Trigger1 = time = 0
value = 1
Ctrl = 0

[State 10]
type = ChangeAnim
trigger1 = !var(59)
trigger1 = time = 0
value = 10

[State 10, 1]
type = VelMul
trigger1 = Time = 0
x = .75

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
anim = 11
sprpriority = 0
Ctrl = 1

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11

[State 20, 4]
type = changestate
triggerall = var(59)
trigger1 = !inguarddist
trigger1 = time > 6 && random <= 500
trigger2 = roundstate >= 3
value = 12

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0
Ctrl = 1

[State -2]
type = VarSet
triggerall = Var(59)
Trigger1 = time = 0
var(40) = 45

[State -1]
Type = ChangeState
Triggerall = var(59)
Trigger1 = time = 0
value = 1
Ctrl = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = !var(59)
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = !var(59)
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

[State 20, 4]
type = changestate
trigger1 = roundstate != 2
value = 0

;---------------------------------------------------------------------------
;歩き（AI,fwd）
[Statedef 21]
type    = S
physics = N
ctrl = 0
velset = 0,0

[State 20, 1]
type = Turn
trigger1 = P2dist X < 0

[State 20, 1]
type = VelSet
trigger1 = 1
x = const(velocity.walk.fwd.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20
value = 20
persistent = 0

[State 20, 4]
type = changestate
triggerall = time >= 1
trigger1 = time > 6
trigger1 = var(7) != [1,2]
trigger1 = random >= 850
trigger1 = P2bodydist x <= 1
trigger2 = inguarddist
trigger3 = roundstate != 2
trigger4 = var(12) != 20 && time > 20
trigger4 = random >= 950
trigger5 = time > 5
trigger5 = P2bodydist x <= 2
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;歩き（AI,back）
[Statedef 22]
type    = S
physics = N
ctrl = 0
velset = 0,0

[State 20, 1]
type = Turn
trigger1 = P2dist X < 0

[State 20, 1]
type = VelSet
trigger1 = 1
x = const(velocity.walk.back.x)

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21
value = 21
persistent = 0

[State 20, 4]
type = changestate
triggerall = time >= 1
trigger1 = time > 6
trigger1 = BackEdgebodyDist < 5
trigger2 = roundstate != 2
trigger3 = var(12) != 20 && time > 16
trigger3 = random >= 950
trigger4 = inguarddist
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;歩き,non stop（AI,fwd）
[Statedef 23]
type    = S
physics = N
ctrl = 0
velset = 0,0

[State 20, 1]
type = Turn
trigger1 = P2dist X < 0

[State 20, 1]
type = VelSet
trigger1 = 1
x = const(velocity.walk.fwd.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20
value = 20
persistent = 0

[State 20, 4]
type = changestate
triggerall = time >= 1
triggerall = Random%2 = 1
trigger1 = time > 8
trigger1 = var(7)
trigger1 = P2bodydist x >= 50
trigger1 = P2bodydist y >= -10
trigger2 = time > 5
trigger2 = P2stateno = [5071,5120]
trigger3 = time > 6
trigger3 = enemynear,alive = 1
trigger3 = P2statetype = L
value = 22

[State 20, 4]
type = changestate
triggerall = time >= 1
trigger1 = time > 6
trigger1 = !var(7) && P2bodydist x <= 1
trigger2 = inguarddist
trigger3 = roundstate != 2
trigger1 = time > 6
trigger4 = var(7) = [1,2]
trigger4 = P2bodydist x <= 2
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
;anim = 40
ctrl = 0

[State -2]
type = VarSet
triggerall = Var(59)
Trigger1 = time = 0
var(40) = 45

[State -1]
Type = ChangeState
Triggerall = var(59)
Trigger1 = time = 0
value = 1
Ctrl = 0

[State 10]
type = ChangeAnim
trigger1 = !var(59)
trigger1 = time = 0
value = 40

[State 40]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

[State 40, 1]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
triggerall = !var(59)
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
triggerall = !var(59)
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Start(AI,up or fwd)
[Statedef 41]
type    = S
physics = S
anim = 40
ctrl = 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

[State 40, 2]
type = VarSet
triggerall = var(12) != 20
triggerall = var(59)
trigger1 = Time = 0
sysvar(1) = 1

[State 40, 1]
type = VarSet
triggerall = var(12) != 20
triggerall = var(59)
triggerall = Time = 0
triggerall = var(7) != [1,2]
trigger1 = P2bodydist x = [126,144]
trigger1 = P2statetype != A
trigger1 = random <= ifelse((!NumProj&&enemynear,BackEdgebodyDist >15),550,1)
trigger2 = P2bodydist x = [145,164]
trigger3 = P2bodydist x >= 165
trigger3 = random >= 700
trigger4 = P2bodydist x = [127,140]
trigger4 = P2bodydist Y = [-20,-1]
trigger4 = enemynear,vel X = [2,4]
trigger4 = enemynear,vel Y < 0
trigger5 = P2stateno = 5120
trigger5 = P2bodydist X <= 190
sysvar(1) = 0

[State 40, 2]
type = VarSet
triggerall = var(12) = 20
triggerall = var(59)
trigger1 = Time = 0
sysvar(1) = 1

[State 40, 1]
type = VarSet
triggerall = var(12) = 20
triggerall = var(59)
triggerall = Time = 0
trigger1 = P2bodydist x >= 170
trigger1 = random <= 400
trigger2 = P2bodydist x = [127,140]
trigger2 = P2bodydist Y = [-20,-1]
trigger2 = enemynear,vel X = [2,4]
trigger2 = enemynear,vel Y < 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
triggerall = var(12) != 20
triggerall = var(59)
triggerall = Time = 0
trigger1 = enemynear,BackEdgebodyDist < 15
trigger2 = P2bodydist x <= 120
sysvar(1) = 1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Start(AI,back)
[Statedef 42]
type    = S
physics = S
anim = 40
ctrl = 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

[State 40, 3]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;ジャンプ
[Statedef 50]
type    = A
physics = A

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 50, 4]
type = ChangeState
trigger1 = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
; 着地
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PlaySnd
trigger1 = Time = 0
value = 4, 0

[State 52, 2]
type = CtrlSet
trigger1 = time = ifelse((prevstateno = [350,410]),2,1)
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;前転
[Statedef 90]
type    = S
physics = N
ctrl = 0
velset = 0,0

[State 90]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse(command = "zenten1", 0, ifelse(command = "zenten2", 1, 2))

[State 90]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(6) = 0;random%3

[State 90]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(6), 90, ifelse(var(6) = 1, 91, 92))

[State 90]
type = PosSet
trigger1 = Time = 0
y = 0

[State 90]
type = VelSet
trigger1 = Time = 1
x = ifelse(!var(6), 5.5, ifelse(var(6) = 1, 5.25, 5))

[State 90]
type = Width
trigger1 = 1
edge = 5,0

[State 90]
type = PlayerPush
trigger1 = 1
value = 0

[State 90]
type = VelSet
trigger1 = AnimTime = 0
x = 0

[State 90]
type = Changestate
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;回り込み
[Statedef 95]
type    = S
physics = N
anim = 95
ctrl = 0
velset = 0,0

[State 95]
type = Width
trigger1 = 1
edge = 5,0

[State 95]
type = Playsnd
trigger1 = time = 1
value = 100,3
channel = 0

[State 95]
type = VelSet
trigger1 = AnimElem = 2
x = 5.8

[State 95]
type = VelSet
trigger1 = AnimElemTime(6) = 0
x = 0

[State 95]
type = HitBy
trigger1 = AnimElemTime(7) < 0 ;time <= 16
value = SCA, NT,ST,HT

[State 95]
type = PlayerPush
trigger1 = AnimElemTime(2) > 0
value = 0

[State 95]
type = Ctrlset
trigger1 = AnimElemTime(7) >= 0
value = 1

[State 95]
type = AfterImage
trigger1 = AnimElem = 1
time = 16
length = 11
FrameGap = 3 
PalBright   =  1,1,1
PalContrast =  136, 192, 192
PalAdd      =  0,0,0
PalMul      = .75,.75,.75
Trans = none

[State 95]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 前ステップ
[Statedef 100]
type = S
physics = N
ctrl = 0
anim = 100
facep2 = 1
velset = 0,0

[State 100]
type = Playsnd
trigger1 = AnimElem = 2
value = 4,15

[State 100]
type = PosSet
trigger1 = time = 0
y = 0

[State 100]
type = VelSet
trigger1 = AnimElem = 2
x = 8.6

[State 100]
type = VelSet
trigger1 = AnimElem = 3
x = 0

[State 100]
type = null;ChangeState
trigger1 = AnimElemTime(3) >= 1
trigger1 = command = "holdup"
value = 40

[State 100]
type = AssertSpecial
trigger1 = AnimElemTime(3) < 1
flag = NoWalk

[State 100]
type = Ctrlset
trigger1 = AnimElemTime(3) >= 1
value = 1

[State 100]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 後ステップ
[Statedef 105]
type    = S
physics = N
ctrl = 0
anim = 105
facep2 = 1

[State 105]
type = Playsnd
trigger1 = Animelemtime(2) = 0
value = 4,20

[State 105]
type = PosSet
trigger1 = time = 0
y = 0

[State 105]
type = VelSet
trigger1 = AnimElem = 2
x = -7

[State 105]
type = VelSet
trigger1 = AnimElem = 3
x = 0

[State 105]
type = AssertSpecial
trigger1 = AnimElemTime(3) < 2
flag = NoWalk

[State 105]
type = Ctrlset
trigger1 = AnimElemTime(3) >= 2
value = 1

[State 105]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State -1, AI]
Type = ChangeState
Value = 41
TriggerAll = Var(59)
TriggerAll = StateType != A
TriggerAll = var(58)%3 = 1
Trigger1 = P2MoveType = A
Trigger1 = EnemyNear,HitDefAttr = SC, AT
Trigger1 = enemynear,time >= 18
Trigger1 = Time = 0

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
triggerall = statetype = S
trigger1 = !var(59)
trigger1 = command = "holddown"
trigger2 = var(59)
trigger2 = P2statetype = C
trigger3 = var(59)
trigger3 = P2bodydist x >= 80 && P2statetype != A
trigger4 = var(59)
trigger4 = P2statetype != A
trigger4 = prevstateno != [120,153]
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
triggerall = statetype = C
trigger1 = !var(59)
trigger1 = command != "holddown"
trigger2 = var(59)
trigger2 = P2statetype = S
trigger2 = P2bodydist x <= 80
trigger2 = enemynear,vel X <= 4
trigger2 = (var(59) = [3,4]) || (var(59)=[1,2])&&var(58)%4=2 ||var(54) <= 12+(var(59)*2)&&enemynear,time>=8
trigger3 = var(59)
trigger3 = P2statetype = A
trigger3 = P2bodydist x <= 160
statetype = S
physics = S

[State 120, 1]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = [21,23]
trigger1 = statetype != A
x = 0

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
trigger1 = !var(59)
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State -1, AI]
Type = null;ChangeState
Value = 41
TriggerAll = Var(59)
TriggerAll = StateType != A
TriggerAll = var(58)%3 = 1
Trigger1 = P2MoveType = A
Trigger1 = EnemyNear,HitDefAttr = SC, AT
Trigger1 = enemynear,time >= 18
Trigger1 = random <= 350

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, 1]
type = null;ChangeAnim
trigger1 = Anim != [130,131]
trigger1 = Anim != 21
value = 21

[State -1]
Type = null;VelSet
Trigger1 = Anim = 21
X = Const(velocity.walk.back.x)

[State 20, 1]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = [21,23]
trigger1 = statetype != A
x = 0

[State 130, Hi to Lo]
type = ChangeState
triggerall = statetype = S
trigger1 = !var(59)
trigger1 = command = "holddown"
trigger2 = var(59)
trigger2 = P2statetype = C
trigger3 = var(59)
trigger3 = P2bodydist x > 75 && P2statetype != A
value = 131

[State 130, Stop Guarding]
type = ChangeState
trigger1 = !var(59)
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State -1, AI]
Type = null;ChangeState
Value = 41
TriggerAll = Var(59)
TriggerAll = StateType != A
TriggerAll = var(58)%3 = 1
Trigger1 = P2MoveType = A
Trigger1 = EnemyNear,HitDefAttr = SC, AT
Trigger1 = enemynear,time >= 18
Trigger1 = random <= 350

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 20, 1]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = [21,23]
trigger1 = statetype != A
x = 0

[State 131, Lo to Hi]
type = ChangeState
triggerall = statetype = C
trigger1 = !var(59)
trigger1 = command != "holddown"
trigger2 = var(59)
trigger2 = P2statetype = S
trigger2 = P2bodydist x <= 65
trigger2 = enemynear,vel X <= 4
trigger2 = (var(59) = [3,4]) || (var(59)=[1,2])&&var(58)%4=2||var(54) <= 12+(var(59)*2)&&enemynear,time>=8
trigger3 = var(59)
trigger3 = P2statetype = A
trigger3 = P2bodydist x <= 160
value = 130

[State 131, Stop Guarding]
type = ChangeState
trigger1 = !var(59)
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
triggerall = sysvar(0)
triggerall = inguarddist
trigger1 = !var(59)
trigger1 = command = "holdback"
trigger2 = var(59)
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
trigger1 = !var(59)
trigger1 = command != "holdback"
trigger2 = var(59)
trigger3 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
triggerall = statetype = S
trigger1 = !var(59)
trigger1 = command = "holddown"
trigger2 = var(59)
trigger2 = P2statetype = C
trigger3 = var(59)
trigger3 = P2bodydist x > 75 && P2statetype != A
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
triggerall = statetype = C
trigger1 = !var(59)
trigger1 = command != "holddown"
trigger2 = var(59)
trigger2 = P2statetype = S
trigger2 = P2bodydist x <= 80
trigger2 = (var(59) = [3,4]) || (var(59)=[1,2])&&var(58)%4=2||var(54) <= 12+(var(59)*2)&&enemynear,time>=8
trigger2 = enemynear,vel X <= 4
trigger3 = var(59)
trigger3 = P2statetype = A
trigger3 = P2bodydist x <= 160
statetype = S
physics = S

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = !var(59)
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, 2]
type = ChangeState
trigger1 = var(59)
trigger1 = HitShakeOver
value = 151 + 2*(P2statetype = C || P2bodydist x > 100)

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = command = "holddown"
trigger2 = var(59)
trigger2 = statetype = S && P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 75 && P2statetype != A
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = command != "holddown"
trigger2 = var(59)
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 50
trigger2 = (var(59) = [3,4]) || (var(59)=[1,2])&&var(58)%4=2||var(54) <= 12+(var(59)*2)&&enemynear,time>=8
trigger2 = enemynear,vel X <= 4
trigger3 = var(59)
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 160
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = command = "holddown"
trigger2 = var(59)
trigger2 = statetype = S && P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 75 && P2statetype != A
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = command != "holddown"
trigger2 = var(59)
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 50
trigger2 = (var(59) = [3,4]) || (var(59)=[1,2])&&var(58)%4=2||var(54) <= 12+(var(59)*2)&&enemynear,time>=8
trigger2 = enemynear,vel X <= 4
trigger3 = var(59)
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 160
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = !var(59)
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, 3]
type = ChangeState
trigger1 = var(59)
trigger1 = HitShakeOver
value = 153;1 + 2*(P2statetype = C || P2bodydist x > 100)

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = command = "holddown"
trigger2 = var(59)
trigger2 = statetype = S && P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 75 && P2statetype != A
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = command != "holddown"
trigger2 = var(59)
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 50
trigger2 = (var(59) = [3,4]) || (var(59)=[1,2])&&var(58)%4=2||var(54) <= 12+(var(59)*2)&&enemynear,time>=8
trigger2 = enemynear,vel X <= 4
trigger3 = var(59)
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 160
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = command = "holddown"
trigger2 = var(59)
trigger2 = statetype = S && P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 75 && P2statetype != A
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = command != "holddown"
trigger2 = var(59)
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 50
trigger2 = (var(59) = [3,4]) || (var(59)=[1,2])&&var(58)%4=2||var(54) <= 12+(var(59)*2)&&enemynear,time>=8
trigger2 = enemynear,vel X <= 4
trigger3 = var(59)
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 160
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
triggerall = sysvar(0)
triggerall = inguarddist
trigger1 = !var(59)
trigger1 = command = "holdback"
trigger2 = var(59)
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
; LOSE (Time over)
[Statedef 170]
type = S
ctrl = 0
velset = 0,0

[State 170]
type = ChangeAnim
trigger1 = Time = 0
value = 171 - facing

[State 170]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;特殊ED
[State 170]
type = ChangeState
triggerall = Lose
triggerall = EnemyNear,Authorname = "G.D.T" && Name = "Gouki"
triggerall = abs(pos X - EnemyNear,pos X) <= 36
trigger1 = roundstate = 4
trigger1 = EnemyNear,stateno = 9505
value = 9520
persistent = 0

;---------------------------------------------------------------------------
; DRAWGAME (Time over)
[Statedef 175]
type = S
ctrl = 0
velset = 0,0

[State 175, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 171 - facing

[State 175, 1] ; If no anim, use go to lose state.
type = null;ChangeState
trigger1 = Time = 0
trigger1 = !SelfAnimExist(175)
value = 170

[State 175, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;特殊ED
[State 175, 1]
type = ChangeState
triggerall = Lose
triggerall = EnemyNear,Authorname = "G.D.T" && Name = "Gouki"
triggerall = abs(pos X - EnemyNear,pos X) <= 36
trigger1 = roundstate = 4
trigger1 = EnemyNear,stateno = 9505
value = 9520
persistent = 0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;勝利ポーズ分岐
[Statedef 180]
type = S
ctrl = 0
velset = 0,0

[State 180,0]
type = null;Changestate
triggerall = Time = 0
triggerall = NumEnemy = 1
trigger1 = MatchOver
trigger1 = Enemy,Authorname = "G.D.T" && Name = "gouki"
;trigger2 = Enemy(2),Authorname = "G.D.T" && Name = "gouki"
value = 183

[State 180,0]
type = Changestate
;triggerall = !Enemy,Authorname = "G.D.T" && Name = "gouki"
trigger1 = Time = 0
trigger1 = Prevstateno = 3203
value = 3204

[State 180]
type = ChangeState
trigger1 = Time = 0
value = 181+(random%2)

;---------------------------------------------------------------------------
;勝利ポーズ1
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State -2]
type = Turn
trigger1 = facing = -1

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0,270]
flag = RoundNotOver

[State 181]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 180]
type = ChangeState
trigger1 = !NumPartner
trigger1 = MatchOver
trigger1 = Time = 220
value = 9530

;---------------------------------------------------------------------------
;勝利ポーズ2
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0,270]
flag = RoundNotOver

[State 182]
type = Width
trigger1 = 1
edge = 50,0

[State 182]
type = PlaySnd
trigger1 = AnimElem = 2
value = 250,0
channel = 1

[State 182]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 180]
type = ChangeState
trigger1 = !NumPartner
trigger1 = MatchOver
trigger1 = Time = 220
value = 9530

;---------------------------------------------------------------------------
;勝利ポーズ3
[Statedef 183]
type = S
ctrl = 0
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = 1
flag = RoundNotOver

[State 182]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 180]
type = ChangeState
trigger1 = Time = 200
value = 9500

;---------------------------------------------------------------------------
;勝利ポーズ3_1
[Statedef 9500]
type = S
ctrl = 0
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = 1
flag = RoundNotOver
flag2 = NoBarDisplay

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[state 190]
type = helper
trigger1 = Time = 1
ID = 8026
stateno = 8026
postype = Left
pos = 0, -42
name = "com2"
ownpal = 1
ontop = 1

[State 190]
type = null;Turn
triggerall = Enemynear,Authorname = "G.D.T" && Name = "gouki"
trigger1 = Time = 25
trigger1 = facing*Enemynear,facing = 1

[State 0, 2]
type = ChangeAnim
trigger1 = Time = 25
value = 20

[State 20, 1]
type = VelSet
trigger1 = Anim = 20
x = const(velocity.walk.fwd.x)

[State 210, 3]
type = PlayerPush
trigger1 = !EnemyNear,Authorname = "G.D.T" && Name = "Gouki"
value = 0

[State 180]
type = ChangeState
triggerall = NumEnemy
triggerall = EnemyNear,Authorname = "G.D.T" && Name = "Gouki"
trigger1 = abs(pos X - EnemyNear,pos X) <= 35
trigger1 = Anim = 20
value = 9505

;---------------------------------------------------------------------------
;勝利ポーズ3_2
[Statedef 9505]
type = S
ctrl = 0
anim = 9505
velset = 0,0
sprpriority = 1

[State 181, 1]
type = AssertSpecial
trigger1 = 1 ;Time = [0,270]
flag = RoundNotOver
flag2 = NoBarDisplay

[State 181]
type = Turn
trigger1 = winko
trigger1 = Time = 0

[State 182]
type = Width
trigger1 = 1
edge = 36*const(size.xscale),0

[state 190]
type = helper
trigger1 = Time = 0
ID = 8027
stateno = 8027
postype = Left
pos = 0, -42
name = "com3"
ownpal = 1
ontop = 1

[State 180]
type = ChangeState
trigger1 = Time = 825
value = 9506

;---------------------------------------------------------------------------
;勝利ポーズ3_3
[Statedef 9506]
type = S
physics = N
ctrl = 0
anim = 9506
velset = 0,0
sprpriority = 1

[State 181, 1]
type = AssertSpecial
trigger1 = Time <= 475
flag = RoundNotOver

[State 181, 1]
type = AssertSpecial
trigger1 = Time >= 115
flag = NoFG

[State 181, 1]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay

[State 1000]
type = Width
trigger1 = 1
edge = 20,0

[state 181]
type = StatetypeSet
trigger1 = Anim = 9506
trigger1 = AnimElemTime(3) = 17
value = A

[State 52]
type = PlaySnd
trigger1 = Anim = 9506
trigger1 =  AnimElem = 1
value = 100,3

[State 120]
type = null;screenbound
trigger1 = Anim = 9506
trigger1 = AnimElemTime(3) >= 17
movecamera = 1,0

[State 181]
type = VelSet
trigger1 = Anim = 9506
trigger1 = AnimElemTime(3) = 17
x = 6
y = -9

[State 181]
type = Veladd
trigger1 = Anim = 9506
trigger1 = AnimElemTime(3) >= 17
y = .35

[State 181]
type = VelMul
trigger1 = Anim = 9506
trigger1 = AnimElemTime(3) >= 1
x = .9

[State 181]
type = Velset
trigger1 = Anim = 9506
trigger1 = AnimElem = 4
x = 0

[State 181]
type = PlaySnd
triggerall = Anim = 9506
trigger1 = AnimElemTime(1) = 2
trigger2 = AnimElemTime(2) = 1
trigger3 = AnimElemTime(3) = 1
value = 1,2

[State 1200]
type = Explod
trigger1 = Anim = 9506
trigger1 = AnimElemTime(1) = 2
anim = 4050
id = 9500
pos = 25,-52
postype = P1
bindtime = 1
sprpriority = 5
ownpal = 1

[State 1200]
type = Explod
trigger1 = Anim = 9506
trigger1 = AnimElemTime(2) = 1
anim = 4050
id = 9501
pos = 43,-52
postype = P1
bindtime = 1
sprpriority = 5
ownpal = 1

[State 1200]
type = Explod
trigger1 = Anim = 9506
trigger1 = AnimElemTime(3) = 1
anim = 4050
id = 9502
pos = 43,-82
postype = P1
bindtime = 1
sprpriority = 5
ownpal = 1

[State 70]
type = ChangeAnim
triggerall = time > 80
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 9507

[State 110]
type = Velset
trigger1 = Anim = 9507
x = 0
y = 0

[State 110]
type = Posset
trigger1 = Anim = 9507
y = 0

[state 30]
type = StatetypeSet
trigger1 = Anim = 9507
value = S
physics = S

[State 300]
type = AllPalfx
trigger1 = Anim = 9506
trigger1 = AnimElemTime(4) = 2
add = 0,0,0
mul = 256,256,256
sinadd = -32,-32,-32,128
time = 32

[State 5110, 7];66+409
type = Envcolor
trigger1 = Time >= 115
value = 0,0,0
time = 1

;---------------------------------------------------------------------------
;勝利ポーズ3_1(相手1)
[Statedef 9520]
type = S
ctrl = 0
anim = 9520
velset = 0,0
sprpriority = 0

[State 340]
type = Turn
trigger1 = loseko
trigger1 = Time = 0

[State 220]
type = PosSet
triggerall = EnemyNear,Authorname = "G.D.T" && Name = "Gouki"
trigger1 = Time = 0
x = EnemyNear,pos X - 30*const(size.xscale)*facing
y = 0

[State 110]
type = ChangeState
trigger1 = Time = 825
value = 9521

;---------------------------------------------------------------------------
;勝利ポーズ3_2(相手2)
[Statedef 9521]
type = S
ctrl = 0
anim = 9521
velset = 0,0
sprpriority = 0

[State 1000, 0];19f up
type = PosFreeze
trigger1 = Time = [20,36]
trigger2 = Time = [39,55]
value = 1

[State 120]
type = null;screenbound
trigger1 = Time >= 18
movecamera = 1,0

[State 110]
type = VelSet
trigger1 = Time = 18
trigger2 = Time = 37
trigger3 = Time = 56
x = -2.5
y = -7.5

[state 30]
type = StatetypeSet
trigger1 = Time = 18
value = A
physics = N

[State 110]
type = Veladd
trigger1 = Time >= 19
y = .35

[State 70]
type = ChangeAnim
triggerall = time > 80
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 9522

[State 110]
type = Velset
trigger1 = Anim = 9522
x = 0
y = 0

[State 110]
type = Posset
trigger1 = Anim = 9522
y = 0

;---------------------------------------------------------------------------
;勝利ポーズ3_4
[Statedef 8026]
type = S
ctrl = 0
anim = 8011
velset = 0,0
;ontop = 1

[State 1200]
type = null;PosSet
trigger1 = Time >= 25
x = !ScreenPos x - 160

[State 820]
type = null;AssertSpecial
trigger1 = parent,stateno = 194
trigger1 = parent,Time = [55,237]
flag = NoShadow
;flag2 = NoFG

[State 1200]
type = Explod
trigger1 = Time = 1
anim = 8026
id = 8026
pos = 0, floor(ScreenPos Y)
postype = Left ;P1
bindtime = -1
ontop = 1
;sprpriority = 4
;removetime = -1; 30
ownpal = 1

[State 1200]
type = RemoveExplod
trigger1 = parent,stateno = 9505
id = 8026

[State 110]
type = DestroySelf
trigger1 = parent,stateno = 9505

;---------------------------------------------------------------------------
;勝利ポーズ3_5
[Statedef 8027]
type = S
ctrl = 0
anim = 8011
velset = 0,0

[State 120]
type = null;screenbound
trigger1 = 1
value = 0

[State 1200]
type = null;PosSet
trigger1 = 1 ;time = 0
;trigger2 = parent,stateno = 9506
x = !ScreenPos x - 159

[State 1200]
type = Explod
trigger1 = Time = 0
anim = 8027
id = 8027
pos = 0, floor(ScreenPos Y)
postype = Left ;P1
bindtime = -1
ontop = 1
;sprpriority = 4
;removetime = -1; 30
ownpal = 1
ignorehitpause = 1

[State 1200]
type = RemoveExplod
trigger1 = parent,stateno = 9506
trigger1 = parent,time = 116
id = 8027

[State 1200]
type = Explod
trigger1 = parent,stateno = 9506
trigger1 = parent,time = 131
anim = 8028
id = 8028
pos = 0,0
postype = Left
bindtime = -1
ontop = 1

[State 1100]
type = null;DestroySelf
trigger1 = parent,stateno = 9506
trigger1 = parent,time = 131

;---------------------------------------------------------------------------
;勝利画面
[Statedef 9530]
type = S
ctrl = 0
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = Time <= 370
flag = RoundNotOver

[State 182]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 190]
type = helper
trigger1 = Time = 0
ID = 8050
stateno = 8050
postype = Left
pos = 0, 0
ontop = 1

;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

;[State 190, 1]
;type = ChangeAnim
;trigger1 = SelfAnimExist(190)
;value = 190

[State 190, 2] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 0
trigger1 = var(12) = 0
value = 0

[State 190, 2]
type = ChangeState
triggerall = Time = 0
trigger1 = TeamMode = simul
value = 195

[State 190, 2]
type = ChangeState
triggerall = Time = 0
triggerall = Numenemy
trigger1 = Enemynear,Authorname = "G.D.T"
trigger1 = Enemynear,var(12) = 10 || Enemynear,var(12) = 20
value = 195

[State 190, 2]
type = ChangeState
trigger1 = MatchNo = 1
trigger1 = Time = 0
value = 191

[State 190, 2]
type = ChangeState
trigger1 = Time = 0
value = ifelse(random%2=1,191,195)

;---------------------------------------------------------------------------
;イントロ（瞬獄殺）
[Statedef 191]
type = S
physics = N
ctrl = 0
anim = 190
velset = 0,0
sprpriority = 1

[state 190]
type = helper
trigger1 = time = 0
ID = 7000
stateno = 7000
postype = p1
pos = 0,0
name = "shungoku"
ontop = 1
bindtime = -1

[State 180, 1]
type = VarSet
trigger1 = Time = 0
var(57) = 1

[State 180, 1]
type = VarSet
trigger1 = Time = 0
var(26) = 0+(random%2)*10

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 220]
type = PosSet
trigger1 = !Var(26)
trigger1 = Time = 89 ;91
trigger2 = Var(26)
trigger2 = Time = 101
x = facing*ceil(70/const(size.xscale)) ;85 ;;(P2dist X)+1

[State 820]
type = ChangeAnim
trigger1 = !Var(26)
trigger1 = Time = 89 ;91
trigger2 = Var(26)
trigger2 = Time = 101
value = 191
persistent = 0

[State 906]
type = ScreenBound
trigger1 = 1
value = 0

[State 190, 2]
type = AssertSpecial
trigger1 = !Var(26)
trigger1 = Time = 89 ;91
trigger2 = Var(26)
trigger2 = Time = 101
flag = Invisible

[State 1100]
type = VelSet
triggerall = anim = 191
trigger1 = AnimElemTime(2) = 1
x = -8.2

[State 1300]
type = VelAdd
triggerall = anim = 191
trigger1 = AnimElemTime(2) >= 1
x =  0.1

[State 1300]
type = PosAdd
triggerall = anim = 191
trigger1 = AnimElemTime(2) >= 1
trigger1 = time% 3 = 1
x = -1*floor(abs(Vel X))

[State 3000]
type = PlaySnd
triggerall =  anim = 191
trigger1 = AnimElemTime(2) = 1
value = 300,10
abspan = 0

[State 3000]
type = AfterImage
;triggerall = anim = 191
trigger1 = time = 0  ;AnimElem = 1
time = 440
FrameGap  = 3
;TimeGap  = 3
length = 10
PalBright = 1,1,1
PalContrast = 256, 256, 256
PalAdd = 0,0,0
PalMul = .5,.5,.5
;trans = add1

[State 110]
type = ChangeState
triggerall = anim = 191
trigger1 = Animelemtime(1) >= 0
trigger1 = abs(pos X - Helper(7000),pos X) <= 7
value = 192

;---------------------------------------------------------------------------
;イントロ（瞬獄殺）2
[Statedef 192]
type    = S
physics = N
ctrl = 0
anim = 192+(Var(26)/10)
velset = 0,0
sprpriority = -2

[State 220]
type = PosSet
trigger1 = Time = 0
x = (Helper(7000),pos X)

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 9606]
type = null;Bgpalfx
trigger1 = !var(26)
trigger1 = Time = [20,ifelse(Var(25) <=112,211,Var(25)+98)]
trigger2 = var(26)
trigger2 = Time = [25,ifelse(Var(25) <=112,211,Var(25)+98)]
add = 256,256,256
color = 0
time = 1

[State 3105]
type = AssertSpecial
trigger1 = !var(26)
trigger1 = Time = [21,ifelse(var(12)=20,401,Var(25)+129)] ;ifelse(Var(25) <=112,213,Var(25)+100)]
trigger2 = var(26)
trigger2 = Time = [26,ifelse(var(12)=20,401,Var(25)+129)] ;ifelse(Var(25) <=112,213,Var(25)+100)]
flag =  NoBarDisplay
flag2 = NoFG
flag3 = timerfreeze

[State 3105]
type = AssertSpecial
trigger1 = !var(26)
trigger1 = Time = [21,ifelse(var(12)=20,401,Var(25)+129)] ;ifelse(Var(25) <=112,213,Var(25)+99)]
trigger2 = var(26)
trigger2 = Time = [26,ifelse(var(12)=20,401,Var(25)+129)] ;ifelse(Var(25) <=112,213,Var(25)+99)]
flag =  GlobalNoShadow
flag2 = NoBG

[State 4110]
type = Explod
triggerall = var(12) != 20
trigger1 = !var(26)
trigger1 = Time = [21,Var(25)+129] ;ifelse(Var(25) <=112,212,Var(25)+99)]
trigger2 = var(26)
trigger2 = Time = [26,Var(25)+129]  ;ifelse(Var(25) <=112,212,Var(25)+99)]
anim = 8005
id = 8005
pos = 0,0
postype = Left
sprpriority = -10
bindtime = 1
ownpal = 1

[State 3000]
type = AfterImage
trigger1 = time = 0
time = 0
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast =  150,50,50
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1

[State 1000, 2]
type = VarRandom
trigger1 = Time = 1
v = 20
range = 27,41

[State 1000, 2]
type = VarRandom
triggerall = var(12) != 20
trigger1 = Time = 2
v = 21
range = ifelse(Var(20)<= 35,40,Var(20)+5),59

[State 1000, 3]
type = VarRandom
triggerall = var(12) != 20
trigger1 = Time = 3
v = 22
range = ifelse(Var(21)<= 46,51,Var(21)+5),76

[State 1000, 4]
type = VarRandom
triggerall = var(12) != 20
trigger1 = Time = 4
v = 23
range = ifelse(Var(22)<= 60,65,Var(22)+5),90

[State 1000, 5]
type = VarRandom
triggerall = var(12) != 20
trigger1 = Time = 5
v = 24
range = ifelse(Var(23)<= 63,68,Var(23)+5),112

[State 1000, 6]
type = VarRandom
triggerall = var(12) != 20
trigger1 = Time = 6
v = 25
range = ifelse(Var(24)<= 79,84,Var(24)+5),125

;補正
[State 180, 2]
type = VarRandom
triggerall = Time = 8
triggerall = random <= 500
triggerall = var(21) - var(20) >= 5
trigger1 = var(20)%2 = 0
trigger2 = var(20)%2 = 1
v = 21
range = ifelse(var(20)%2 = 1,54,ifelse(Var(20)<= 33,38,Var(20)+5)),ifelse(var(20)%2 = 0,45,59)

[State 180, 3]
type = VarRandom
triggerall = Time = 9
trigger1 = var(21) <= 45
trigger1 = var(21) - var(20) <= 16
trigger2 = var(21) >= 54
trigger2 = var(20)%2 = 1
trigger2 = var(21) - var(20) >= 14
trigger3 = var(22) - var(21) <= 4
v = 22
range = ifelse(var(21) <= 45,49,70),ifelse(var(21) <= 45,59,76)

[State 180, 4]
type = VarRandom
triggerall = Time = 10
trigger1 = random%3 = [0,1]
trigger1 = var(21) <= 45
trigger1 = var(22) <= 58
trigger1 = var(22) - var(21) <= 19
trigger2 = var(21) >= 54
trigger2 = var(22) >= 70
trigger2 = var(22) - var(21) <= 21
trigger3 = var(23) - var(22) <= 4
v = 23
range = ifelse(var(22) <= 58,63,85),ifelse(var(22) <= 58,69,90)

[State 180, 5]
type = VarRandom
triggerall = Time = 11
trigger1 = var(21) <= 45
trigger1 = var(23) <= 68
trigger1 = var(23) - var(22) <= 19
trigger2 = var(21) >= 54
trigger2 = var(23) >= 85
trigger2 = var(23) - var(22) <= 18
trigger3 = var(24) - var(23) <= 4
v = 24
range = ifelse(var(23) <= 68,73,106),ifelse(var(23) <= 68,79,112)

[State 180, 6]
type = VarRandom
triggerall = Time = 12
trigger1 = var(24) <= 78
trigger1 = var(21) <= 45
trigger1 = var(24) - var(23) <= 16
trigger2 = var(24) >= 106
trigger2 = var(21) >= 54
trigger2 = var(24) - var(23) <= 25
trigger3 = var(25) - var(24) <= 4
v = 25
range = ifelse(var(24) <= 78,83,118),ifelse(var(24) <= 78,92,125)

[State 9606]
type = Playsnd
triggerall = var(12) != 20
triggerall = Time >= 26
trigger1 = Time = var(20)
trigger2 = Time = var(21)
trigger3 = Time = var(22)
trigger4 = Time = var(23)
trigger5 = Time = var(24)
trigger6 = Time = var(25)
value = 300,20
channel = 5
abspan = 0

[State 4110]
type = Explod
triggerall = var(12) != 20
triggerall = Time >= 26
trigger1 = Time = var(20)
trigger2 = Time = var(21)
trigger3 = Time = var(22)
trigger4 = Time = var(23)
trigger5 = Time = var(24)
trigger6 = Time = var(25)
anim = 4050 ;8200+(random%8)4020
id = 8201
pos = 5,-55 ;-40+random%100,-80+random%60
postype = P1
ontop = 1
bindtime = 1
ownpal = 1
random = 86,72

[State 9606]
type = Playsnd
triggerall = var(12) = 20
trigger1 = (Time = [27,50]) && Time % 5 = 0
trigger2 = Time = 57 || Time = 60 || Time = 87 || Time = 92
trigger3 = (Time = [60,77]) && Time % 6 = 5
trigger4 = (Time = [98,130]) && Time % 4 = 2
trigger5 = (Time = [133,154]) && Time % 3 = 1
trigger6 = (Time = [157,173]) && Time % 2 = 1
value = 200,ifelse(Var(12) = 20,1+random%4,1) ;2,2+((random%2)*3)
channel = 10
abspan = 0

[State 4110]
type = Explod
triggerall = var(12) = 20
trigger1 = (Time = [27,50]) && Time % 5 = 0
trigger2 = Time = 57 || Time = 60 || Time = 87 || Time = 92
trigger3 = (Time = [60,77]) && Time % 6 = 5
trigger4 = (Time = [98,130]) && Time % 4 = 2
trigger5 = (Time = [133,154]) && Time % 3 = 1
trigger6 = (Time = [157,173]) && Time % 2 = 1
anim = 4020 ;8200+(random%8)
id = 8201
pos = -35+6*(random%9),-120+6*(random%20)
postype = P1
ontop = 1
bindtime = 1
ownpal = 1

[State 9606]
type = Playsnd
trigger1 = var(12) = 20
trigger1 = Time = 170
value = 300,30
abspan = 0

[State 9606]
type = Playsnd
trigger1 = var(12) = 20
trigger1 = Time = 171
value = 300,40
abspan = 0

[State 200, 2]
type = ChangeState
trigger1 = var(12) != 20
trigger1 = Time = Var(25)+130 ;ifelse(Var(25) <=112,213,Var(25)+100)
trigger2 = var(12) = 20
trigger2 = Time = 402
value = 194

;---------------------------------------------------------------------------
;イントロ（瞬獄殺）3
[Statedef 194]
type = S
ctrl = 0
anim = ifelse(var(12)!=20,194,ifelse(facing=1,195,196))
velset = 0,0
sprpriority = 1

[State 3105]
type = AssertSpecial
trigger1 = Time <237
flag =  NoBarDisplay

[State 180, 1]
type = VarSet
trigger1 = Time = 0
var(20) = 0

[State 180, 1]
type = VarSet
trigger1 = Time = 0
var(21) = 0

[State 180, 1]
type = VarSet
trigger1 = Time = 0
var(22) = 0

[State 180, 1]
type = VarSet
trigger1 = Time = 0
var(23) = 0

[State 180, 1]
type = VarSet
trigger1 = Time = 0
var(24) = 0

[State 180, 1]
type = VarSet
trigger1 = Time = 0
var(25) = 0

[State 180, 1]
type = VarSet
trigger1 = Time = 0
var(26) = 0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[state 190]
type = helper
trigger1 = Time = 0
ID = 7020
stateno = 7020
postype = p1
pos = 0,0
name = "vega3"
bindtime = -1
ownpal = 1
size.shadowoffset = -3
sprpriority = -3

[state 190]
type = helper
trigger1 = Time = 55
ID = 8020
stateno = 8020
postype = Left
pos = 0, -42
name = "com1"
bindtime = -1
ownpal = 1
ontop = 1

[State 9606]
type = null;Bgpalfx
trigger1 = Time < 0
add = 240,240,240
color = 256
time = 1

[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 3810,5]
type = Changestate
trigger1 = animTime = 0
value = 0

;---------------------------------------------------------------------------
;イントロ（瞬獄殺）4
[Statedef 7000]
type = S
physics = N
ctrl = 0
anim = 7000+parent,var(26)
velset = 0,0
sprpriority = 2

[State 1200]
type = Explod
triggerall = parent,var(26)
Triggerall = !NumExplod(7015)
trigger1 = AnimElem = 17
anim = 7015
id = 7015
pos = 0,0
postype = P1
vel = -1.3,-1.2
accel = 0, .06
sprpriority = 3
bindtime = 2
removetime = -1; 30
;ownpal = 1
persistent = 0

[State 191]
type = PlaySnd
trigger1 = AnimElem = 16
value = 300,0

[State 700]
type = RemoveExplod
triggerall = parent,stateno = 192
trigger1 = !parent,var(26)
trigger1 = parent,Time = 22
trigger2 = parent,var(26)
trigger2 = parent,Time = 27
id = 7015

[State 1100]
type = DestroySelf
triggerall = parent,stateno = 192
trigger1 = !parent,var(26)
trigger1 = parent,Time = 22
trigger2 = parent,var(26)
trigger2 = parent,Time = 27

;---------------------------------------------------------------------------
;イントロ（瞬獄殺）5
[Statedef 7020]
type = S
ctrl = 0
anim = 7020
velset = 0,0
sprpriority = -3

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 8200]
type = AssertSpecial
trigger1 = parent,stateno = 3201
trigger1 = parent,Time >= 13
trigger2 = root,Numhelper(8011)
flag = Invisible

;---------------------------------------------------------------------------
;イントロ6
[Statedef 7030]
type = S
ctrl = 0
anim = 7030
velset = 0,0
sprpriority = -3
ownpal = 0

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 8200]
type = AssertSpecial
trigger1 = parent,stateno = 3201
trigger1 = parent,Time >= 13
trigger2 = root,Numhelper(8011)
flag = Invisible

;---------------------------------------------------------------------------
;イントロ（瞬獄殺）7
[Statedef 8020]
type = S
ctrl = 0
anim = 8011;8020
velset = 0,0
ontop = 1
;sprpriority = 4

[State 8200]
type = null;AssertSpecial
trigger1 = parent,stateno = 194
trigger1 = parent,Time = [55,237]
flag = NoShadow
;flag2 = NoFG

[State 1200]
type = Explod
trigger1 = Time = 0
anim = 8020
id = 8020
pos = 0, floor(ScreenPos Y)
postype = Left ;P1
bindtime = -1
ontop = 1
;sprpriority = 4
;removetime = -1; 30
ownpal = 1
ignorehitpause = 1

[State 1200]
type = null;Explod
trigger1 = Time = 27
anim = 8025
id = 8025
pos = 0,1
postype = P1
bindtime = -1
ontop = 1
;sprpriority = 5
;removetime = -1; 30
ownpal = 1
ignorehitpause = 1

[State 1100, ChangeState]
type = DestroySelf
trigger1 = parent,stateno = 0;194
;trigger1 = parent,Time = 238

;---------------------------------------------------------------------------
;イントロ2
[Statedef 195]
type = S
ctrl = 0
velset = 0,0
sprpriority = 1

[State 380]
type = Changeanim
trigger1 = Time = 0
value = ifelse(facing=1,195,196)
elem = 2

[State 180, 1]
type = VarSet
trigger1 = Time = 0
var(57) = 0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 380]
type = Changestate
trigger1 = animTime = 0
value = 0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;遠距離立ち弱パンチ(EX立ち弱パンチ)
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,201,200)

[State 200]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0

[State 22]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 200, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(28*var(52)/3) ;8c
pausetime = 11,11
guard.pausetime = 12,12
sparkno = S4030
guard.sparkno = S7600
sparkxy = -5, -75
hitsound = S1, 0
guardsound = S3, 0
ground.type = High
air.type = High
ground.slidetime = 9
ground.hittime = 9
air.hittime = 13
guard.ctrltime = 14
ground.velocity = -5.5*const(size.xscale)
guard.velocity = -5.5*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 125,63; 2,1
givepower = 0,0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
persistent = 0
yaccel = .5

[State 200, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 35; 8b
pausetime = 11,11
guard.pausetime = 8,8
sparkno = S4030
guard.sparkno = S7600
sparkxy = -5, -75
hitsound = S1, 0
guardsound = S3, 1
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 10
air.hittime = 19
guard.ctrltime = 9
ground.velocity = -5*const(size.xscale)
guard.velocity = -5*const(size.xscale)
air.velocity = -4.8, -7
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 42,21 ;02,01
givepower = 62,31 ;03,
nochainID = var(8)
air.fall = 1
fall.recover = 0
air.recover = 0
persistent = 0
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち弱パンチ
[Statedef 205]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 205

[State 22]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 20]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0

[State 200, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(28*var(52)/3) ;8c
pausetime = 10,10
sparkno = S4030
guard.sparkno = S7600
sparkxy = -9,-79
hitsound = S1, 0
guardsound = S3, 0
ground.type = High
air.type = High
ground.slidetime = 9
ground.hittime = 9
air.hittime = 13
guard.ctrltime = 14
ground.velocity = -5.5*const(size.xscale)
guard.velocity = -5.5*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 125,63; 2,1
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち中パンチ(EX立ち中パンチ)
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
poweradd = ifelse(var(12)=20,21,0)

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,211,210)

[State 22]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 20]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 210, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(125*var(52)/3);7e
pausetime = 11,11
guard.pausetime = 12,12
sparkno = S4040
guard.sparkno = S7600
sparkxy = -8, -76
hitsound = S1, 1
guardsound = S3, 0
ground.type = Low
air.type = Low
ground.slidetime = 13
ground.hittime = 13
air.hittime = 13
guard.ctrltime = 17
ground.velocity = -9*const(size.xscale)
guard.velocity = -7.8*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -16*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 250,188; 4,3
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 221, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = 90 ;83
pausetime = 11,11
sparkno = S4040
guard.sparkno = S7600
sparkxy = -14, -67
hitsound = S1, 1
guardsound = S3, 1
ground.type = Low
air.type = Low
ground.slidetime = 14
ground.hittime = 14
air.hittime = 19
guard.ctrltime = 14
ground.velocity = -9*const(size.xscale)
guard.velocity = -9*const(size.xscale)
air.velocity = -4.8,-7
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -12*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 104,42; z,01+05,01+02
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 221, 1]
type = Hitdef
triggerall = var(3) != [1,2]
trigger1 = var(12) = 20
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = 90
pausetime = 11,11
sparkno = S4040
guard.sparkno = S7600
sparkxy = -13, -88
hitsound = S1, 1
guardsound = S3, 1
ground.type = High
air.type = low
ground.slidetime = 14
ground.hittime = 14
air.hittime = 19
guard.ctrltime = 14
ground.velocity = -9*const(size.xscale)
guard.velocity = -9*const(size.xscale)
air.velocity = -4.8,-7
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -12*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 104,42; z,01+05,01+02
givepower = 62,31 ;03,     
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち中パンチ
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 215

[State 22]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 20]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(132*var(52)/3);7d
pausetime = 11,11
guard.pausetime = 12,12
sparkno = S4000
guard.sparkno = S7600
sparkxy = -13, -58
hitsound = S1, 1
guardsound = S3, 0
ground.type = High
air.type = High
ground.slidetime = 12
ground.hittime = 12
air.hittime = 13
guard.ctrltime = 17
ground.velocity = -9*const(size.xscale)
guard.velocity = -7.8*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -20*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 250,188;
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち強パンチ(EX立ち強パンチ)
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 8
ctrl = 0
velset = 0,0
anim = 220
poweradd = ifelse(var(12)=20,42,0)

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,221,220)

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 210]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2

[State 220, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(167*var(52)/3) ;78
pausetime = 11,11
guard.pausetime = 11,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -8, -79
hitsound = S1, 2
guardsound = S3, 0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 13
guard.ctrltime = 20
ground.velocity = -12
guard.velocity = -10
air.velocity = -2.61, -8.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -20
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250 ;5,4
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 220, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 139 ;7c
pausetime = 11,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -8, -79
hitsound = S1, 2
guardsound = S3, 1
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 19
guard.ctrltime = 16
ground.velocity = -11
guard.velocity = -11
air.velocity = -4.8,-7
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -20
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 146,62 ;5,4 ;02+07,02+03
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 210]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち強パンチ
[Statedef 225]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 225

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 20]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 221, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Hard
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(167*var(52)/3);78
pausetime = 12,12
guard.pausetime = 11,11
sparkno = S4020
guard.sparkno = S7600
sparkxy = -14, -67
hitsound = S1, 2
guardsound = S3, 0
ground.type = Low
air.type = Low
ground.slidetime = 15
ground.hittime = 15
air.hittime = 13
guard.ctrltime = 20
ground.velocity = -12
guard.velocity = -10
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250;
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 221, 1]
type = Hitdef
triggerall = var(3) != [1,2]
trigger1 = var(12) != 20
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Hard
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(167*var(52)/3)
pausetime = 12,12
guard.pausetime = 11,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -13, -88
hitsound = S1, 2
guardsound = S3, 0
ground.type = High
air.type = low
ground.slidetime = 15
ground.hittime = 15
air.hittime = 13
guard.ctrltime = 20
ground.velocity = -12
guard.velocity = -10
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250;
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち弱キック(EX立ち弱キック)
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 8
ctrl = 0
velset = 0,0
anim = 250

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,251,250)

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 230]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 230, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(83*var(52)/3);84
pausetime = 11,11
guard.pausetime = 10,10
sparkno = S4030
guard.sparkno = S7600
sparkxy = -15, -19
hitsound = S2, 0
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 9
ground.hittime = 9
air.hittime = 13
guard.ctrltime = 13
ground.velocity = -5.5*const(size.xscale)
guard.velocity = -5.5*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 125,63
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 230, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 35 ;8b
pausetime = 9,9
sparkno = S4030
guard.sparkno = S7600
sparkxy = -15, -19
hitsound = S2, 0
guardsound = S3, 1
ground.type = Low
air.type = High
ground.slidetime = 9
ground.hittime = 9
air.hittime = 19
guard.ctrltime = 9
ground.velocity = -5*const(size.xscale)
guard.velocity = -5*const(size.xscale)
air.velocity = -4.8,-7
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 42,21 ;02,01
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 230]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち弱キック
[Statedef 255]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 255

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 200]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 230, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(90*var(52)/3);83
pausetime = 10,10
sparkno = S4000
guard.sparkno = S7600
sparkxy = -14, -28
hitsound = S2, 0
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 13
ground.velocity = -5.5*const(size.xscale)
guard.velocity = -5.5*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 125,63
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち中キック(EX立ち中キック)
[Statedef 260]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
poweradd = ifelse(var(12)=20,21,0)

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,261,260)

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 200]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 240, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(132*var(52)/3);7d
pausetime = 11,11
sparkno = S4040
guard.sparkno = S7600
sparkxy = -6, -82
hitsound = S2, 1
guardsound = S3, 0
ground.type = High
air.type = High
ground.slidetime = 13
ground.hittime = 13
air.hittime = 13
guard.ctrltime = 17
ground.velocity = -9*const(size.xscale)
guard.velocity = -7.8*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -16*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 250,188
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 250, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 83 ;84-7b
pausetime = 10,10
guard.pausetime = 11,11
sparkno = S4040
guard.sparkno = S7600
sparkxy = -6, -84
hitsound = S2, 1
guardsound = S3, 1
ground.type = High
air.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 19
guard.ctrltime = 21
ground.velocity = -9*const(size.xscale)
guard.velocity = -9*const(size.xscale)
air.velocity = -4.8,-7
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -12*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 104,42; z,01+05,01+02
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 250, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 62
pausetime = 10,10
guard.pausetime = 11,11
sparkno = S4040
guard.sparkno = S7600
sparkxy = -5, -78
hitsound = S2, 1
guardsound = S3, 1
ground.type = High
air.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 19
guard.ctrltime = 13
ground.velocity = -9*const(size.xscale)
guard.velocity = -9*const(size.xscale)
air.velocity = -4.8,-7
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -12*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(movecontact,0,104), ifelse(movecontact,0,42); z,01+05,01+02
givepower = ifelse(movecontact,0,62), ifelse(movecontact,0,31) ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち中キック
[Statedef 265]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 265

[State 22]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 200]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 240, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(146*var(52)/3);7b
pausetime = 11,11
guard.pausetime = 12,12
sparkno = S4040
guard.sparkno = S7600
sparkxy = -17, -48
hitsound = S2, 1
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 12
ground.hittime = 12
air.hittime = 13
guard.ctrltime = 17
ground.velocity = -9*const(size.xscale)
guard.velocity = -7.8*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -16*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 250,188
givepower = 0,0 ;35, 35
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち強キック(EX立ち強キック)
[Statedef 270]
type    = S
movetype= A
physics = S
juggle  = 8
ctrl = 0
velset = 0,0
poweradd = ifelse(var(12)=20,42,0)

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,271,270)

[State 22]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 240]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 250, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(180*var(52)/3);76
pausetime = 12,12
sparkno = S4050
guard.sparkno = S7600
sparkxy = -6, -84
hitsound = S2, 2
guardsound = S3, 0
ground.type = High
air.type = High
ground.slidetime = 15
ground.hittime = 15
air.hittime = 13
guard.ctrltime = 21
ground.velocity = -12
guard.velocity = -10
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250;
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 250, 1]
type = Hitdef
triggerall = var(3) != [1,2]
trigger1 = var(12) != 20
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(180*var(52)/3)
pausetime = 12,12
sparkno = S4050
guard.sparkno = S7600
sparkxy = -5, -78
hitsound = S2, 2
guardsound = S3, 0
ground.type = High
air.type = High
ground.slidetime = 15
ground.hittime = 15
air.hittime = 13
guard.ctrltime = 21
ground.velocity = -12
guard.velocity = -10
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250;
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 250, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 111 ;80
pausetime = 11,11
guard.pausetime = 12,12
sparkno = S4050
guard.sparkno = S7600
sparkxy = -5, -78
hitsound = S2, 2
guardsound = S3, 1
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 19
guard.ctrltime = 15
ground.velocity = -11
guard.velocity = -11
air.velocity = -4.8,-7
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 146,62 ;5,4 ;02+07,02+03
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 240]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち強キック
[Statedef 275]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 275

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 200]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 251, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(187*var(52)/3);75-6b
pausetime = 12,12
guard.pausetime = 13,13
sparkno = S4050
guard.sparkno = S7600
sparkxy = -12, -84
hitsound = S2, 2
guardsound = S3, 0
ground.type = High
air.type = High
ground.slidetime = 16
ground.hittime = 16
air.hittime = 13
guard.ctrltime = 20
ground.velocity = -12
guard.velocity = -10
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -18
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250;
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 251, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(69*var(52)/3)
pausetime = 12,12
guard.pausetime = 13,13
sparkno = S4020
guard.sparkno = S7600
sparkxy = -14, -67
hitsound = S2, 2
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 16
ground.hittime = 16
air.hittime = 13
guard.ctrltime = 20
ground.velocity = -12
guard.velocity = -10
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250;
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ弱パンチ(EXしゃがみ弱パンチ)
[Statedef 300]
type    = C
movetype= A
physics = C
juggle  = 8
velset = 0,0
ctrl = 0

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,301,300)

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 400]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 400, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(28*var(52)/3);8c
pausetime = 11,11
sparkno = S4030
guard.sparkno = S7600
sparkxy = -15, -49
hitsound = S1, 0
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 13
ground.velocity = -5.5*const(size.xscale)
guard.velocity = -5.5*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 125,63
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 400, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 35 ;8b
pausetime = 8,8
sparkno = S4030
guard.sparkno = S7600
sparkxy = -15, -49
hitsound = S1, 0
guardsound = S3, 1
ground.type = Low
air.type = High
ground.slidetime = 10
ground.hittime = 10
air.hittime = 19
guard.ctrltime = 9
ground.velocity = -5*const(size.xscale)
guard.velocity = -5*const(size.xscale)
air.velocity = -4.8,-7
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 42,21 ;02,01
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 400]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ中パンチ(EXしゃがみ中パンチ)
[Statedef 305]
type    = C
movetype= A
physics = C
juggle  = 8
ctrl = 0
velset = 0,0
poweradd = ifelse(var(12)=20,21,0)

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,306,305)

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 400]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 410, 2]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(146*var(52)/3) ;7b
pausetime = 11,11
sparkno = S4010
guard.sparkno = S7600
sparkxy = -15, -47
hitsound = S1, 1
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 10
ground.hittime = 10
air.hittime = 13
guard.ctrltime = 16
ground.velocity = -9*const(size.xscale)
guard.velocity = -7.8*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -16*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 250,188
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 410, 2]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = 90 ;83
pausetime = 10,10
sparkno = S4010
guard.sparkno = S7600
sparkxy = -15, -47
hitsound = S1, 1
guardsound = S3, 1
ground.type = Low
air.type = High
ground.slidetime = 13
ground.hittime = 13
air.hittime = 19
guard.ctrltime = 13
ground.velocity = -8.8*const(size.xscale)
guard.velocity = -8.8*const(size.xscale)
air.velocity = -4.8,-7
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -16*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 104,42; z,01+05,01+02
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 400]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ強パンチ
[Statedef 310]
type    = C
movetype= A
physics = C
juggle  = 8
ctrl = 0
velset = 0,0
poweradd = ifelse(var(12)=20,42,0)

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,311,310)

[State 22]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 410]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 420, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(167*var(52)/3) ;78 s.g 74
pausetime = 11,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -9, -59
hitsound = S1, 2
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 15
ground.hittime = 15
air.hittime = 13
guard.ctrltime = 19
ground.velocity = -12
guard.velocity = -10
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250;
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 420, 1]
type = Hitdef
triggerall = var(3) != [1,2]
trigger1 = var(12) != 20
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(167*var(52)/3)
pausetime = 11,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -12, -88
hitsound = S1, 2
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 15
ground.hittime = 15
air.hittime = 13
guard.ctrltime = 19
ground.velocity = -12
guard.velocity = -10
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250;
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 420, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = 111 ;80
pausetime = 11,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -9, -59
hitsound = S1, 2
guardsound = S3, 1
ground.type = Low
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 19
guard.ctrltime = 16
ground.velocity = -11
guard.velocity = -11
air.velocity = -4.8,-7
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 146,62 ;5,4 ;02+07,02+03
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 420, 1]
type = Hitdef
triggerall = var(3) != [1,2]
trigger1 = var(12) = 20
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = 111
pausetime = 11,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -12, -88
hitsound = S1, 2
guardsound = S3, 1
ground.type = Low
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 19
guard.ctrltime = 16
ground.velocity = -11
guard.velocity = -11
air.velocity = -4.8,-7
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 146,62 ;5,4 ;02+07,02+03
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 410]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ弱キック
[Statedef 320]
type    = C
movetype= A
physics = C
juggle  = 8
velset = 0,0
ctrl = 0

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,321,320)

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 43]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 430, 2]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(35*var(52)/3);8b
pausetime = 11,11
sparkno = S4030
guard.sparkno = S7600
sparkxy = -15, -17
hitsound = S2, 0
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 7
ground.hittime = 7
air.hittime = 13
guard.ctrltime = 14
ground.velocity = -5.5*const(size.xscale)
guard.velocity = -5.5*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.6*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 125,63
givepower = 0,0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 430, 2]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 35;8b ;8b
pausetime = 8,8
sparkno = S4030
guard.sparkno = S7600
sparkxy = -15, -17
hitsound = S2, 0
guardsound = S3, 1
ground.type = Low
air.type = High
ground.slidetime = 10
ground.hittime = 10
air.hittime = 19
guard.ctrltime = 9
ground.velocity = -5*const(size.xscale)
guard.velocity = -5*const(size.xscale)
air.velocity = -4.8,-7
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.6*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 42,21 ;02,01
givepower = 62,31 ;03,
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 430]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ中キック
[Statedef 325]
type    = C
movetype= A
physics = C
juggle  = 8
ctrl = 0
velset = 0,0
poweradd = ifelse(var(12)=20,21,0)

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,326,325)

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 430]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 440, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MF
guardflag = L
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(118*var(52)/3);7f 
pausetime = 11,11
sparkno = S4040
guard.sparkno = S7600
sparkxy = -17, -19
hitsound = S2, 1
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 12
ground.hittime = 12
air.hittime = 13
guard.ctrltime = 16
ground.velocity = -9*const(size.xscale)
guard.velocity = -7.8*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -16*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 250,188
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 440, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MF
guardflag = L
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 83 ;84
pausetime = 10,10
sparkno = S4040
guard.sparkno = S7600
sparkxy = -17, -19
hitsound = S2, 1
guardsound = S3, 1
ground.type = Low
air.type = High
ground.slidetime = 13
ground.hittime = 13
air.hittime = 19
guard.ctrltime = 13
ground.velocity = -9*const(size.xscale)
guard.velocity = -9*const(size.xscale)
air.velocity = -4.8,-7
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -16*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 104,42; z,01+05,01+02
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 430]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ強キック
[Statedef 330]
type    = C
movetype= A
physics = C
juggle  = 8
ctrl = 0
velset = 0,0
poweradd = ifelse(var(12)=20,42,0)

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,331,330)

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 440]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 450, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(194*var(52)/3) ;74
pausetime = 11,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -9, -15
hitsound = S2, 2
guardsound = S3, 0
ground.type = Trip
air.type = High
ground.slidetime = 19
guard.slidetime = 19
ground.hittime = 19
air.hittime = 18
guard.ctrltime = 19
ground.velocity = -1.3, -6.5
guard.velocity = -10
air.velocity = -1.3, -6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250;
givepower = 0,0
yaccel = .48
nochainID = var(8)
air.fall = 1
fall = 1
fall.recover = 0
air.recover = 0

[State 450, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 111 ;80
pausetime = 11,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -9, -15
hitsound = S2, 2
guardsound = S3, 1
ground.type = Trip
air.type = High
ground.slidetime = 16
guard.slidetime = 16
ground.hittime = 19
air.hittime = 19
guard.ctrltime = 16
ground.velocity = -1.3, -6.5
guard.velocity = -11
air.velocity = -1.3, -6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 146,62 ;5,4 ;02+07,02+03
givepower = 62,31 ;03,
yaccel = .5
nochainID = var(8)
air.fall = 1
fall = 1
fall.recover = 0
air.recover = 0

[State 440]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;ジャンプ弱パンチ
[Statedef 350]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,351,350)

[State 300]
type = Width
trigger1 = 1
edge = 5,0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 600]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0

[State 600, 2]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(76*var(52)/3);85
pausetime = 10,10
sparkno = S4030
guard.sparkno = S7600
sparkxy = -14, -43
hitsound = S1, 0
guardsound = S3, 0
ground.type = Low
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 13
airguard.ctrltime = 15
ground.velocity = -3*const(size.xscale)
guard.velocity = -5.33*const(size.xscale)
air.velocity = -4, -5.25
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11
air.cornerpush.veloff = -11
airguard.cornerpush.veloff = -11
getpower = 125,63
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 600, 2]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 49 ;89
pausetime = 7,7
guard.pausetime = 10,10
sparkno = S4030
guard.sparkno = S7600
sparkxy = -14, -43
hitsound = S1, 0
guardsound = S3, 1
ground.type = Low
ground.slidetime = 9
ground.hittime = 9
air.hittime = 19
guard.ctrltime = 9
airguard.ctrltime = 15
ground.velocity = -5*const(size.xscale)
guard.velocity = -5*const(size.xscale)
air.velocity = -4.8,-7
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -1
air.cornerpush.veloff = -1
airguard.cornerpush.veloff = -1
getpower = 42,21 ;02,01
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = var(12) != 20
trigger1 = Pos Y >= -10 && Vel Y > 0
trigger2 = var(12) = 20
trigger2 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ中パンチ
[Statedef 355]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
poweradd = ifelse(var(12)=20,21,0)

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,356,355)

[State 600]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 610, 2]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(132*var(52)/3);7d
pausetime = 10,11
sparkno = S4040
guard.sparkno = S7600
sparkxy = -12, -47
hitsound = S1, 1
guardsound = S3, 0
ground.type = Low
ground.slidetime = 9
ground.hittime = 9
air.hittime = 13
guard.ctrltime = 17
airguard.ctrltime = 15
ground.velocity = -4*const(size.xscale)
guard.velocity = -5.33*const(size.xscale)
air.velocity = -6.4, -4.8
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 250,188
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 610, 2]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = 83 ;84
pausetime = 8,9
guard.pausetime = 9,10
sparkno = S4040
guard.sparkno = S7600
sparkxy = -12, -47
hitsound = S1, 1
guardsound = S3, 1
ground.type = Low
ground.slidetime = 10
ground.hittime = 10
air.hittime = 19
guard.ctrltime = 9
airguard.ctrltime = 15
ground.velocity = -5*const(size.xscale)
guard.velocity = -5*const(size.xscale)
air.velocity = -4.8,-7
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -1
air.cornerpush.veloff = -1
airguard.cornerpush.veloff = -1
getpower = 104,42; z,01+05,01+02
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = var(12) != 20
trigger1 = Pos Y >= -10 && Vel Y > 0
trigger2 = var(12) = 20
trigger2 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ強パンチ
[Statedef 360]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
poweradd = ifelse(var(12)=20,42,0)

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,361,360)

[State 610]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 620, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(167*var(52)/3) ;78
pausetime =  11,12
guard.pausetime = 10,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -14, -40
hitsound = S1, 2
guardsound = S3, 0
ground.type = Low
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 19
airguard.ctrltime = 15
ground.velocity = -5*const(size.xscale)
guard.velocity = -9.33*const(size.xscale)
air.velocity = -6.4, -4.8
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 313,250
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 620, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage =  111 ;80
pausetime =  10,11
guard.pausetime = 8,9
sparkno = S4050
guard.sparkno = S7600
sparkxy = -14, -40
hitsound = S1, 2
guardsound = S3, 1
ground.type = Low
ground.slidetime = 10
ground.hittime = 10
air.hittime = 19
guard.ctrltime = 9
airguard.ctrltime = 15
ground.velocity = -5*const(size.xscale)
guard.velocity = -5*const(size.xscale)
air.velocity = -4.8,-7
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -1
air.cornerpush.veloff = -1
airguard.cornerpush.veloff = -1
getpower = 146,62 ;5,4 ;02+07,02+03
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = var(12) != 20
trigger1 = Pos Y >= -10 && Vel Y > 0
trigger2 = var(12) = 20
trigger2 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;垂直ジャンプ弱キック
[Statedef 365]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,366,365)

[State 630]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0

[State 900, 1]
type = HitDef
triggerall = (Command = "holdfwd" || Command = "holdback")
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
trigger1 = var(12) = 20
trigger1 = AnimElem = 1
trigger1 = P2bodydist X = [-8,ceil(25*const(size.xscale))]
trigger1 = P2bodydist Y = [-80,50]
attr = A, NT
hitflag = A-
priority = 3, Miss
sparkno = -1
p1facing = -1
p2facing = 1
p1stateno = 650
p2stateno = 665
guard.dist = 0
numhits = 0

[State 630, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = up
fall.animtype = up
priority = 3,Hit
damage = ceil(83*var(52)/3);84
pausetime = 10,10
sparkno = S4030
guard.sparkno = S7600
sparkxy = -10, -48
hitsound = S2, 0
guardsound = S3, 0
ground.type = Low
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 13
airguard.ctrltime = 15
ground.velocity = -3*const(size.xscale)
guard.velocity = -5.33*const(size.xscale)
air.velocity = -4, -5.25
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 125,63
givepower = 0,0 ;35, 35
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 630, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = up
fall.animtype = up
priority = 3,Hit
damage = 62 ;87
pausetime = 7,8
sparkno = S4030
guard.sparkno = S7600
sparkxy = -10, -48
hitsound = S2, 0
guardsound = S3, 1
ground.type = Low
ground.slidetime = 10
ground.hittime = 10
air.hittime = 19
guard.ctrltime = 9
airguard.ctrltime = 15
ground.velocity = -5*const(size.xscale)
guard.velocity = -5*const(size.xscale)
air.velocity = -4.8,-7
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -1
air.cornerpush.veloff = -1
airguard.cornerpush.veloff = -1
getpower = 42,21 ;02,01
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = var(12) != 20
trigger1 = Pos Y >= -10 && Vel Y > 0
trigger2 = var(12) = 20
trigger2 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;垂直ジャンプ中キック
[Statedef 370]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
poweradd = ifelse(var(12)=20,21,0)

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,371,370)

[State 640]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 900, 1]
type = HitDef
triggerall = var(59) || !var(59)&&(Command = "holdfwd" || Command = "holdback")
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
trigger1 = var(12) = 20
trigger1 = AnimElem = 1
trigger1 = P2bodydist X = [-8,ceil(25*const(size.xscale))]
trigger1 = P2bodydist Y = [-80,50]
attr = A, NT
hitflag = A-
priority = 3, Miss
sparkno = -1
p1facing = -1
p2facing = 1
p1stateno = 650
p2stateno = 665
guard.dist = 0
numhits = 0

[State 640, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = up
fall.animtype = up
priority = 4,Hit
damage = ceil(132*var(52)/3) ;7d
pausetime = 10,11
guard.pausetime = 11,11
sparkno = S4040
guard.sparkno = S7600
sparkxy = -10, -47
hitsound = S2, 1
guardsound = S3, 0
ground.type = Low
ground.slidetime = 9
ground.hittime = 9
air.hittime = 13
guard.ctrltime = 17
airguard.ctrltime = 15
ground.velocity = -4*const(size.xscale)
guard.velocity = -5.33*const(size.xscale)
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 250,188
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 640, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = up
fall.animtype = up
priority = 4,Hit
damage = 83 ;84
pausetime = 9,10
guard.pausetime = 11,12
sparkno = S4040
guard.sparkno = S7600
sparkxy = -10, -47
hitsound = S2, 1
guardsound = S3, 1
ground.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 19
guard.ctrltime = 10
airguard.ctrltime = 15
ground.velocity = -5*const(size.xscale)
guard.velocity = -5*const(size.xscale)
air.velocity = -4.8,-7
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -1
air.cornerpush.veloff = -1
airguard.cornerpush.veloff = -1
getpower = 104,42; z,01+05,01+02
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = var(12) != 20
trigger1 = Pos Y >= -10 && Vel Y > 0
trigger2 = var(12) = 20
trigger2 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;垂直ジャンプ強キック
[Statedef 375]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
poweradd = ifelse(var(12)=20,42,0)

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,376,375)

[State 640]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 900, 1]
type = HitDef
triggerall = (Command = "holdfwd" || Command = "holdback")
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
trigger1 = var(12) = 20
trigger1 = AnimElem = 1
trigger1 = P2bodydist X = [-8,ceil(25*const(size.xscale))]
trigger1 = P2bodydist Y = [-80,50]
attr = A, NT
hitflag = A-
priority = 3, Miss
sparkno = -1
p1facing = -1
p2facing = 1
p1stateno = 650
p2stateno = 665
guard.dist = 0
numhits = 0

[State 650, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(180*var(52)/3);76
pausetime = 11,12
guard.pausetime = 10,11
sparkno = S4020
guard.sparkno = S7600
sparkxy = -15, -54
hitsound = S2,2
guardsound = S3, 0
ground.type = High
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 19
ground.velocity = -5*const(size.xscale)
guard.velocity = -9.33*const(size.xscale)
air.velocity = -5.4, -4.8
airguard.velocity = -4.33,-1
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 313,250
givepower = 0,0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 650, 1]
type = Hitdef
triggerall = var(3) != [1,2]
trigger1 = var(12) != 20
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(180*var(52)/3)
pausetime = 11,12
guard.pausetime = 10,11
sparkno = S4020
guard.sparkno = S7600
sparkxy = -15, -54
hitsound = S2,2
guardsound = S3, 0
ground.type = High
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 19
airguard.ctrltime = 15
ground.velocity = -5*const(size.xscale)
guard.velocity = -9.33*const(size.xscale)
air.velocity = -5.4, -4.8
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 313,250
givepower = 0,0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 650, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 111 ;80
pausetime = 10,11
guard.pausetime = 10,11
sparkno = S4020
guard.sparkno = S7600
sparkxy = -15, -54
hitsound = S2,2
guardsound = S3, 1
ground.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 19
guard.ctrltime = 10
airguard.ctrltime = 15
ground.velocity = -5*const(size.xscale)
guard.velocity = -5*const(size.xscale)
air.velocity = -4.8,-7
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -20*const(size.xscale)
air.cornerpush.veloff = -6*const(size.xscale)
airguard.cornerpush.veloff = -6*const(size.xscale)
getpower = 146,62 ;5,4 ;02+07,02+03
givepower = 62,31 ;03,
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = var(12) != 20
trigger1 = Pos Y >= -10 && Vel Y > 0
trigger2 = var(12) = 20
trigger2 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;斜めジャンプ弱キック
[Statedef 400]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,401,400)

[State 630]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 900, 1]
type = HitDef
triggerall = var(59) || !var(59)&&(Command = "holdfwd" || Command = "holdback")
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
trigger1 = var(12) = 20
trigger1 = AnimElem = 1
trigger1 = P2bodydist X = [-8,ceil(25*const(size.xscale))]
trigger1 = P2bodydist Y = [-80,50]
attr = A, NT
hitflag = A-
priority = 3, Miss
sparkno = -1
p1facing = ifelse(Vel X >0,1,-1)
p2facing = 1
p1stateno = 650
p2stateno = 665
guard.dist = 0
numhits = 0

[State 630, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(76*var(52)/3) ;85
pausetime = 10,10
sparkno = S4000
guard.sparkno = S7600
sparkxy = -10, -45
hitsound = S2, 0
guardsound = S3, 0
ground.type = High
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 13
ground.velocity = -3*const(size.xscale)
guard.velocity = -5.33*const(size.xscale)
air.velocity = -6.4, -4.8
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 125,63
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 630, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 56 ;88
pausetime = 7,8
sparkno = S4000
guard.sparkno = S7600
sparkxy = -10, -45
hitsound = S2, 0
guardsound = S3, 1
ground.type = High
ground.slidetime = 9
ground.hittime = 9
air.hittime = 19
guard.ctrltime = 9
airguard.ctrltime = 15
ground.velocity = -5*const(size.xscale)
guard.velocity = -5*const(size.xscale)
air.velocity = -4.8,-7
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -1
air.cornerpush.veloff = -1
airguard.cornerpush.veloff = -1
getpower = 42,21 ;02,01
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = var(12) != 20
trigger1 = Pos Y >= -10 && Vel Y > 0
trigger2 = var(12) = 20
trigger2 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;斜めジャンプ中キック
[Statedef 405]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
poweradd = ifelse(var(12)=20,21,0)

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,406,405)

[State 640]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 900, 1]
type = HitDef
triggerall = (Command = "holdfwd" || Command = "holdback")
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
trigger1 = var(12) = 20
trigger1 = AnimElem = 1
trigger1 = P2bodydist X = [-8,ceil(25*const(size.xscale))]
trigger1 = P2bodydist Y = [-80,50]
attr = A, NT
hitflag = A-
priority = 3, Miss
sparkno = -1
p1facing = ifelse(Vel X >0,1,-1)
p2facing = 1
p1stateno = 650
p2stateno = 665
guard.dist = 0
numhits = 0

[State 640, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(132*var(52)/3);7d
pausetime = 10,11
sparkno = S4040
guard.sparkno = S7600
sparkxy = -7, -49
hitsound = S2, 1
guardsound = S3, 0
ground.type = High
ground.slidetime = 9
ground.hittime = 9
air.hittime = 13
guard.ctrltime = 17
airguard.ctrltime = 15
ground.velocity = -4*const(size.xscale)
guard.velocity = -5.33*const(size.xscale)
air.velocity = -6.4, -4.8
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 250,188
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 640, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = 69 ;86
pausetime = 9,10
sparkno = S4040
guard.sparkno = S7600
sparkxy = -7, -49
hitsound = S2, 1
guardsound = S3, 1
ground.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 19
guard.ctrltime = 10
airguard.ctrltime = 15
ground.velocity = -5*const(size.xscale)
guard.velocity = -5*const(size.xscale)
air.velocity = -4.8,-7
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -1
air.cornerpush.veloff = -1
airguard.cornerpush.veloff = -1
getpower = 104,42; z,01+05,01+02
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = var(12) != 20
trigger1 = Pos Y >= -10 && Vel Y > 0
trigger2 = var(12) = 20
trigger2 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;斜めジャンプ強キック
[Statedef 410]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
poweradd = ifelse(var(12)=20,42,0)

[State 200]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(var(12)=20,411,410)

[State 640]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 900, 1]
type = HitDef
triggerall = (Command = "holdfwd" || Command = "holdback")
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
trigger1 = var(12) = 20
trigger1 = AnimElem = 1
trigger1 = P2bodydist X = [-8,ceil(25*const(size.xscale))]
trigger1 = P2bodydist Y = [-80,50]
attr = A, NT
hitflag = A-
priority = 3, Miss
sparkno = -1
p1facing = ifelse(Vel X >0,1,-1)
p2facing = 1
p1stateno = 650
p2stateno = 665
guard.dist = 0
numhits = 0

[State 650, 1]
type = Hitdef
trigger1 = var(12) != 20
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(180*var(52)/3) ;76
pausetime = 11,12
guard.pausetime = 10,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -15, -59
hitsound = S2, 2
guardsound = S3, 0
ground.type = High
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 19
airguard.ctrltime = 15
ground.velocity = -5*const(size.xscale)
guard.velocity = -9.33*const(size.xscale)
air.velocity = -6.4, -4.8
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 313,250
givepower = 0,0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 650, 1]
type = Hitdef
trigger1 = var(12) = 20
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 90 ;83
pausetime = 10,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -15, -59
hitsound = S2, 2
guardsound = S3, 1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
air.hittime = 19
guard.ctrltime = 9
ground.velocity = -5*const(size.xscale)
guard.velocity = -5*const(size.xscale)
airguard.ctrltime = 15
air.velocity = -4.8,-7
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -1
air.cornerpush.veloff = -1
airguard.cornerpush.veloff = -1
getpower = 313,250;
givepower = 0,0 ;03
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = var(12) != 20
trigger1 = Pos Y >= -10 && Vel Y > 0
trigger2 = var(12) = 20
trigger2 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;天魔空刃脚
[Statedef 450]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 450
poweradd = 17

[State 300]
type = Width
trigger1 = 1
edge = ceil(20*const(size.xscale)),0

[State 640]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0,1

[State 920, 0]
type = Posfreeze
trigger1 = AnimElemTime(2) < 1

[State 810]
type = VelSet
trigger1 = AnimElemTime(2) = 2
x = 5.8
y = 6.8

[State 601]
type = PlaySnd
trigger1 = AnimElem = 3
value = 100,3
channel = 0

[State 640, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = 69 ;82
pausetime = 9,11
sparkno = S4020
guard.sparkno = S7600
sparkxy = -10, -10
hitsound = S2, 1
guardsound = S3, 1
ground.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 19
guard.ctrltime = 13
ground.velocity = -5.1*const(size.xscale)
guard.velocity = -5.33*const(size.xscale)
air.velocity = -6.4, -4.8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -1;-5.6
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 104,42; z,01+05,01+02 ;06,03
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
yaccel = .5
nochainID = var(8)

[State 210, 7]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 455
ctrl = 1

;---------------------------------------------------------------------------
;天魔空刃脚(着地)
[Statedef 455]
type    = S
movetype = I
physics = S
velset = 0,0
anim = 0

[State 220]
type = PosSet
trigger1 = time = 0
y = 0

[State 210, 7]
type = ChangeState
trigger1 = time = 1
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;頭蓋破殺
[Statedef 460]
type    = S
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 460
poweradd = 21

[State 300]
type = Width
trigger1 = 1
edge = 5,0

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 100,3
channel = 0 

[State 210]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 810]
type = VelSet
trigger1 = AnimElem = 2
x = 2

[State 810]
type = VelSet
trigger1 = AnimElem = 4
x = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = H
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = 40; 82-7d
pausetime = 9,10
;guard.pausetime = 
sparkno = S4020
guard.sparkno = S7600
sparkxy = -5, -79
hitsound = S1, 1
guardsound = S3, 1
ground.type = Low
air.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -5
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 60,30; 01+ 04-06
givepower = 35, 35;0303
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = H
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = 40
pausetime = 9,10
;guard.pausetime =
sparkno = S4020
guard.sparkno = S7600
sparkxy = -15, -38
hitsound = S1, 1
guardsound = S3, 1
ground.type = Low
air.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -5
guard.velocity = -5
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 60,30
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;旋風脚
[Statedef 470]
type    = A
movetype = A
physics = N
juggle = 8
velset = 0,0
ctrl = 0
anim = 470
poweradd = 21 ;01

[State 300]
type = Width
trigger1 = 1
edge = 5,0

[State 220]
type = PosSet
trigger1 = time = 0
y = 0

[State 810]
type = VelSet
trigger1 = time = 0
x = 3.5
y = -5

[State 810]
type = VelAdd
trigger1 = time > 1
y = .6

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 100,3
channel = 0 

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 6
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = 40; 85
pausetime = 10,11
sparkno = S4020
guard.sparkno = S7600
sparkxy = -8, -60
hitsound = S2, 1
guardsound = S3, 1
ground.type = Low
air.type = High
ground.slidetime = 10
ground.hittime = 10
air.hittime = 20
guard.ctrltime = 9
airguard.ctrltime = 15
ground.velocity = -5*const(size.xscale)
guard.velocity = -5*const(size.xscale)
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -11.2*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 104,42; z,01+05,01+02
givepower = 62,31 ;03,
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 210, 7]
type = ChangeState
triggerall = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 475

;---------------------------------------------------------------------------
;旋風脚(着地)
[Statedef 475]
type = S
movetype = I
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 475

[State 220]
type = PosSet
trigger1 = time = 0
y = 0

[State 210, 1]
type = PlaySnd
trigger1 = time = 0
value = 4,0

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;パワー溜め
[Statedef 610]
type     = S
movetype = I
physics  = S
ctrl     = 0
velset   = 0,0
anim = 610

[State 820]
type = Playsnd
trigger1 = Anim = 610 && AnimElem = 2
value = 250,0
channel = 0

[State 820]
type = PowerAdd
triggerall = Anim = 610
trigger1 = 1
value =  ceil(1.7*((time+15)/10))

[State 300]
type = Helper
trigger1 = !NumHelper(8045)
trigger1 = Time = 1
id = 8045
name = "Charge"
pos = 0,0
postype = P1
stateno = 8045
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 700]
type = ChangeAnim
triggerall = !var(59)
trigger1 = Command != "chargec" || Command != "chargez"
trigger2 = Power >= 3000
trigger3 = roundstate >= 3
value = 611
persistent = 0

[State 611]
type = ChangeAnim
triggerall = Time >= 2
triggerall = var(59)
trigger1 = abs(P2bodydist X) <= 190
trigger1 = P2MoveType = A
trigger2 = abs(P2bodydist X) <= 80
trigger2 = enemynear,statetype != L
trigger3 = power >= 3000
trigger4 = roundstate = 3
trigger5 = enemynear,numproj
trigger6 = inguarddist
trigger7 = abs(P2bodydist X) <= 100
trigger7 = enemynear,vel X >= 3
trigger8 = (enemynear,GetHitVar(RecoverTime) = [15,25]) || P2stateno = 5120
trigger8 = var(58) = [55,70]
trigger9 = P2MoveType = A
trigger9 = P2stateno = [2000,3999]
value = 611
persistent = 0

[State 820, Voice]
type = Stopsnd
trigger1 = Anim = 611
channel = 0
persistent = 0

[State 185]
type = ctrlset
triggerall = !ctrl
trigger1 = anim = 611
value = 1

[State 700, 4]
type = ChangeState
triggerall = Anim = 611
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;GCステップ
[Statedef 620]
type     = S
movetype = I
physics  = N
ctrl     = 0
velset   = 0,0
anim = 620
poweradd = -1000

[State 170, 1]
type = NotHitBy
trigger1 = AnimElemTime(3) < 1
value = SCA

[State 100]
type = posset
trigger1 = time = 0
y = 0

[State 120]
type = pause
trigger1 = time = 0
time = 2
movetime = 2
pausebg = 0

[State 4000]
type = PalFX
trigger1 = time = 1|| time = 3
time = 1
add = 255,255,255

[State 100]
type = Playsnd
trigger1 = time = 1
value = 350,5

[State 100]
type = VelSet
trigger1 = AnimElem = 2
x = 8.5

[State 1020]
type = AfterImage
trigger1 = AnimElem = 2
time = 20
length = 11
TimeGap  = 1
FrameGap = 3 
PalBright   =  1,1,1
PalContrast =  136, 192, 192
PalAdd      = 0,0,0
PalMul      = .75,.75,.75
Trans = none

[State 100]
type = VelSet
trigger1 = AnimElem = 3
x = 0

[State 100]
type = AssertSpecial
trigger1 = AnimElemTime(3) < 1
flag = NoWalk

[State 170, 1]
type = HitBy
trigger1 = AnimElemTime(3) >= 1
value = SCA,NT,ST,HT

[State 100]
type = Ctrlset
trigger1 = AnimElemTime(3) >= 1
value = 1

[State 100]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;zeroカウンター(stand)
[Statedef 630]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
juggle  = 8
anim = 630
poweradd = -1000

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 18

[State -3]
type = Helper
trigger1 = Time = 0
id = 8040
pos = 0,0
postype = P1
stateno = 8040
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 7
supermovetime = 99999
persistent = 0

[State 52]
type = PlaySnd
trigger1 = time = 1
value = 350,10

[State 120]
type = pause
trigger1 = time = 1
time = 16
movetime = 16
pausebg = 0

[State 1000]
type = Width
trigger1 = 1
edge = 20,0

[State 190, 4]
type = ChangeAnim
trigger1 = time <= 16
value = anim

[State 190, 4]
type = ChangeAnim
trigger1 = time = 17
value = 1070

[state 30]
type = StatetypeSet
triggerall = anim = 1070
trigger1 = AnimElemTime(3) = 1
value = A
physics = N

[State 105, 1]
type = statetypeset
triggerall = anim = 1070
trigger1 = AnimElem = 5
movetype = I

[State 52]
type = PlaySnd
triggerall = anim = 1070
trigger1 =  AnimElem = 1
value = 100,3
persistent = 0

[State 110]
type = VelSet
triggerall = anim = 1070
trigger1 = AnimElemTime(3) = 1
x = 7.5
y = -12.6

[State 110]
type = Veladd
triggerall = anim = 1070
trigger1 = AnimElemTime(3) >= 1
y = .64

[State 110]
type = VelMul
triggerall = anim = 1070
trigger1 = AnimElemTime(3) >= 2
x = .9

[State 110]
type = Velset
triggerall = anim = 1070
trigger1 = AnimElemTime(3) = 13
x = 0

[State 110]
type = HitDef
triggerall = anim = 1070
trigger1 = AnimElem = 1
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage = 83,14 ;75-68-5c ,89-87 -imp
;z, 82 86-7e 85-7b-73 ,8e 8e-8c 8f-8d-8b
;count 84-7e-7a
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 12,13
sparkno = S4050
guard.sparkno = S4050
sparkxy = -3, -55
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -2.2,-10.4 ;-1.3,-11
guard.velocity = -9.8
air.velocity = -2.2,-10.4 ;-1.3,-11
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .57
persistent = 0
getpower = 0,0;140
givepower = 0,0 ;35, 35
;envshake.time = 8
;envshake.ampl = 2
forcestand = 1

[State 110]
type = HitDef
triggerall = anim = 1070
trigger1 = AnimElem = 2
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage = 42,14
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 12,13
sparkno = S4050
guard.sparkno = S4050
sparkxy = -5, -55
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -2.2,-10.4 ;-1.3,-11
guard.velocity = -9.8
air.velocity = -2.2,-10.4 ;-1.3,-11
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .57
persistent = 0
getpower = 0,0;140
givepower = 0,0;35, 35
;envshake.time = 8
;envshake.ampl = 2
forcestand = 1

[State 110]
type = HitDef
triggerall = anim = 1070
trigger1 = AnimElem = 3
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage = 28,14
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 12,13
sparkno = S4050
guard.sparkno = S4050
sparkxy = 5, -91
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -2.2,-10.4 ;-1.3,-11
guard.velocity = -9.8
air.velocity = -2.2,-10.4 ;-1.3,-11
airguard.velocity = -5.8,-3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .57
persistent = 0
getpower = 0,0;140
givepower = 0,0;35, 35
;envshake.time = 8
;envshake.ampl = 2
forcestand = 1

[State 70]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1025

;---------------------------------------------------------------------------
;zeroカウンター(crouch)
[Statedef 635]
type    = C
movetype = A
physics = C
velset = 0,0
ctrl = 0
juggle  = 8
anim = 630
poweradd = -1000

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 24

[State -3]
type = Helper
trigger1 = Time = 0
id = 8040
pos = 0,0
postype = P1
stateno = 8040
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 7
supermovetime = 99999
persistent = 0

[State 52]
type = PlaySnd
trigger1 = time = 1
value = 350,10

[State 120]
type = pause
trigger1 = time = 1
time = 23
movetime = 23
pausebg = 0

[State 1000]
type = Width
trigger1 = 1
edge = 20,0

[State 190, 4]
type = ChangeAnim
trigger1 = time <= 15
value = anim

[State 190, 4]
type = ChangeAnim
trigger1 = time = 16
value = 635

[State 105, 1]
type = statetypeset
triggerall = anim = 635
trigger1 = AnimElem = 7
movetype = I

[State 450, 1]
type = Hitdef
triggerall = anim = 635
trigger1 = AnimElem = 5
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 111 ; 81
pausetime = 11,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -9, -15
hitsound = S2, 2
guardsound = S3, 1
ground.type = Trip
air.type = High
ground.slidetime = 16
guard.slidetime = 16
ground.hittime = 19
air.hittime = 19
guard.ctrltime = 16
ground.velocity = -1.3, -6.5
guard.velocity = -11
air.velocity = -1.3, -6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 146,62 ;5,4 ;02+07,02+03
givepower = 62,31 ;03,
nochainID = var(8)
yaccel = .5
air.fall = 1
fall = 1
fall.recover = 0
air.recover = 0

[State 440]
type = ChangeState
triggerall = anim = 635
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;地獄車
[Statedef 650]
type     = A
movetype = A
physics  = N
velset = 0,0
poweradd = 62 ;03

[State 901]
type = TargetState
trigger1 = Time = 0
value = 660

[State 820]
type = ChangeAnim
trigger1 = Time = 0
value = 650

[State 300]
type = Width
trigger1 = 1
edge = 10,0

[State 90]
type = PlaySnd
trigger1 = var(12) = 20
trigger1 = animelem = 1
value = 5,5

[State 1000, 3]
type = PosFreeze
trigger1 =  animelemtime(1) < 8
value = 1

[State 1000, 3]
type = VelSet
trigger1 = Prevstateno != [365,375]
trigger1 =  animelemtime(1) = 8
x = 3.5

[State 1000, 3]
type = VelAdd
trigger1 =  animelemtime(1) > 8
y = 0.51

[State 901,1]
type = targetBind
trigger1 = animelem = 1
pos = ceil(-38*const(size.xscale)),ceil(-51*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 2
pos = ceil(-35*const(size.xscale)),ceil(-50*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 3
pos = ceil(4*const(size.xscale)),ceil(-56*const(size.yscale))
postype = P1
time = -1
persistent = 1

[State 901,1]
type = targetBind
trigger1 = animelem = 4
pos = ceil(19*const(size.xscale)),ceil(-31*const(size.yscale))
postype = P1
time = -1
persistent = 1

[State 901,1]
type = targetBind
trigger1 = animelem = 5
pos = ceil(-5*const(size.xscale)),ceil(-19*const(size.yscale))
postype = P1
time = -1
persistent = 1

[State 901,1]
type = targetBind
trigger1 = animelem = 6
pos = ceil(-15*const(size.xscale)),ceil(-45*const(size.yscale))
postype = P1
time = -1
persistent = 1

[State 903, 2]
type = VarSet
trigger1 = time = 0
var(5) = 0

[State 903, 2]
type = VarSet
trigger1 = AnimElemtime(3) >= 0 && AnimElemtime(4) < 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -16
var(5) = 1
persistent = 1

[State 903, 2]
type = VarSet
trigger1 = AnimElemtime(4) >= 0 && AnimElemtime(5) < 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -16
var(5) = 2
persistent = 1

[State 903, 2]
type = VarSet
trigger1 = AnimElemtime(5) >= 0 && AnimElemtime(6) < 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -16
var(5) = 3
persistent = 1

[State 903, 2]
type = VarSet
trigger1 = AnimElemtime(6) >= 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -16
var(5) = 4
persistent = 1

[State 903, 2]
type = ChangeState
trigger1 = Time >= 18
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 651

;---------------------------------------------------------------------------
;地獄車(地上)
[Statedef 651]
type     = S
movetype = A
physics  = N

[State 90]
type = TargetState
trigger1 = Time = 0
value = 660+var(5)

[State 820]
type = ChangeAnim
trigger1 = Time = 0
value = 650+var(5)

[State 820]
type = PosSet
trigger1 = Time = 0
y = 0

[State 820]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1000, 3]
type = VelSet
trigger1 = time = 0
trigger1 = Vel X = 0
x = 3.5

[State 1000, 3]
type = VelAdd
trigger1 = Vel X > 0
x = 0.09

[State 300]
type = Width
trigger1 = Anim = 651
trigger1 = AnimElemtime(7) < 0
trigger2 = Anim = 652
trigger2 = AnimElemtime(6) < 0
trigger3 = Anim = 653
trigger3 = AnimElemtime(9) < 0
trigger4 = Anim = 654
trigger4 = AnimElemtime(8) < 0
edge = 25,0

[State 300]
type = Width
trigger1 = Anim = 651
trigger1 = AnimElemtime(7) >= 0 && AnimElemtime(8) < 0
trigger2 = Anim = 652
trigger2 = AnimElemtime(6) >= 0 && AnimElemtime(7) < 0
trigger3 = Anim = 653
trigger3 = AnimElemtime(9) >= 0 && AnimElemtime(10) < 0
trigger4 = Anim = 654
trigger4 = AnimElemtime(8) >= 0 && AnimElemtime(9) < 0
edge = 55,0

[State 300]
type = Width
trigger1 = Anim = 651
trigger1 = AnimElemtime(8) >= 0 && AnimElemtime(9) < 0
trigger2 = Anim = 652
trigger2 = AnimElemtime(7) >= 0 && AnimElemtime(8) < 0
trigger3 = Anim = 653
trigger3 = AnimElemtime(10) >= 0 && AnimElemtime(11) < 0
trigger4 = Anim = 654
trigger4 = AnimElemtime(9) >= 0 && AnimElemtime(10) < 0
edge = 85,0

[State 300]
type = Width
trigger1 = Anim = 651
trigger1 = AnimElemtime(9) >= 0
trigger2 = Anim = 652
trigger2 = AnimElemtime(8) >= 0
trigger3 = Anim = 653
trigger3 = AnimElemtime(11) >= 0
trigger4 = Anim = 654
trigger4 = AnimElemtime(10) >= 0
edge = 120,0

[State 901,1]
type = targetBind
trigger1 = Anim = 651
trigger1 = AnimElem = 4
trigger2 = Anim = 652
trigger2 = AnimElem = 3
trigger3 = Anim = 653
trigger3 = AnimElem = 2 || AnimElem = 6
trigger4 = Anim = 654
trigger4 = AnimElem = 1 || AnimElem = 5
pos = ceil(4*const(size.xscale)),ceil(-56*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = Anim = 651
trigger1 = AnimElem = 1 || AnimElem = 5
trigger2 = Anim = 652
trigger2 = AnimElem = 4
trigger3 = Anim = 653
trigger3 = AnimElem = 3 || AnimElem = 7
trigger4 = Anim = 654
trigger4 = AnimElem = 2 || AnimElem = 6
pos = ceil(19*const(size.xscale)),ceil(-31*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = Anim = 651
trigger1 = AnimElem = 2 || AnimElem = 6
trigger2 = Anim = 652
trigger2 = AnimElem = 1 || AnimElem = 5
trigger3 = Anim = 653
trigger3 = AnimElem = 4 || AnimElem = 8
trigger4 = Anim = 654
trigger4 = AnimElem = 3 || AnimElem = 7
pos = ceil(-5*const(size.xscale)),ceil(-19*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = Anim = 651
trigger1 = AnimElem = 3 || AnimElem = 7
trigger2 = Anim = 652
trigger2 = AnimElem = 2 || AnimElem = 6
trigger3 = Anim = 653
trigger3 = AnimElem = 1 || AnimElem = 5 || AnimElem = 9
trigger4 = Anim = 654
trigger4 = AnimElem = 4 || AnimElem = 8
pos = ceil(-15*const(size.xscale)),ceil(-45*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = Anim = 651
trigger1 = AnimElem = 8
trigger2 = Anim = 652
trigger2 = AnimElem = 7 
trigger3 = Anim = 653
trigger3 = AnimElem = 10
trigger4 = Anim = 654
trigger4 = AnimElem = 9
pos = ceil(39*const(size.xscale)),ceil(-60*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = Anim = 651
trigger1 = AnimElemtime(9) = 0
trigger2 = Anim = 652
trigger2 = AnimElemtime(8) = 0 
trigger3 = Anim = 653
trigger3 = AnimElemtime(11) = 0
trigger4 = Anim = 654
trigger4 = AnimElemtime(10) = 0
pos = ceil(119*const(size.xscale)),ceil(-57*const(size.xscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = Anim = 651
trigger1 = AnimElemtime(9) = 2
trigger2 = Anim = 652
trigger2 = AnimElemtime(8) = 2
trigger3 = Anim = 653
trigger3 = AnimElemtime(11) = 2
trigger4 = Anim = 654
trigger4 = AnimElemtime(10) = 2
pos = ceil(130*const(size.xscale)), ceil(-75*const(size.yscale))
postype = P1
time = 1

[State 820]
type = VelSet
trigger1 = Anim = 651
trigger1 = AnimElem = 8
trigger2 = Anim = 652
trigger2 = AnimElem = 7 
trigger3 = Anim = 653
trigger3 = AnimElem = 10
trigger4 = Anim = 654
trigger4 = AnimElem = 9
x = 0

[State 90]
type = PlaySnd
trigger1 = Anim = 651
trigger1 = AnimElem = 9
trigger2 = Anim = 652
trigger2 = AnimElem = 8 
trigger3 = Anim = 653
trigger3 = AnimElem = 11
trigger4 = Anim = 654
trigger4 = AnimElem = 10
value = 100,4

[State 90]
type = TargetLifeAdd
trigger1 = Anim = 651
trigger1 = AnimElem = 9
trigger2 = Anim = 652
trigger2 = AnimElem = 8 
trigger3 = Anim = 653
trigger3 = AnimElem = 11
trigger4 = Anim = 654
trigger4 = AnimElem = 10
value = ifelse(var(12)=20,-118,-222) ;70 ;7f; z,7f

[State 90]
type = TargetPowerAdd
trigger1 = Anim = 651
trigger1 = AnimElem = 9
trigger2 = Anim = 652
trigger2 = AnimElem = 8 
trigger3 = Anim = 653
trigger3 = AnimElem = 11
trigger4 = Anim = 654
trigger4 = AnimElem = 10
value = ifelse(var(12)=20,62,0)

[State 90]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = Anim = 651
trigger2 = Anim = 652
trigger3 = Anim = 653
trigger4 = Anim = 654
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;地獄車(相手1)
[Statedef 660]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 660

;---------------------------------------------------------------------------
;地獄車(相手2-1)
[Statedef 661]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 661

[State 120]
type = screenbound
trigger1 = AnimElemTime(8) < 0
value = 1
;movecamera = 1,0


[State 300]
type = null;Width
trigger1 = AnimElemTime(10) >= 0 && AnimElemTime(10) < 6
edge = 0,10

[State 903]
type = VelSet
trigger1 = AnimElemTime(10) = 1
x = -4.6
y = -5

[State 903]
type = veladd
trigger1 = AnimElemTime(10) >= 2
y = .5

[State 130]
type = Turn
trigger1 = AnimElemTime(10) > 5
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10

[State 903, 2]
type = SelfState
trigger1 = AnimElemTime(10) > 5
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10
value = 5100

;---------------------------------------------------------------------------
;地獄車(相手2-2)
[Statedef 662]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 662

[State 120]
type = screenbound
trigger1 = AnimElemTime(7) < 0
value = 1
;movecamera = 1,0

[State 300]
type = null;Width
trigger1 = AnimElemTime(9) >= 0 && AnimElemTime(9) < 6
edge = 0,10

[State 90]
type = VelSet
trigger1 = AnimElemTime(9) = 1
x = -4.6
y = -5

[State 90]
type = veladd
trigger1 = AnimElemTime(9) >= 2
y = .5

[State 130]
type = Turn
trigger1 = AnimElemTime(9) > 5
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10

[State 903, 2]
type = SelfState
trigger1 = AnimElemTime(9) > 5
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10
value = 5100

;---------------------------------------------------------------------------
;地獄車(相手2-3)
[Statedef 663]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 663

[State 120]
type = screenbound
trigger1 = AnimElemTime(10) < 0
value = 1
;movecamera = 1,0

[State 300]
type = null;Width
trigger1 = AnimElemTime(12) >= 0 && AnimElemTime(12) < 6
edge = 0,10

[State 90]
type = VelSet
trigger1 = AnimElemTime(12) = 1
x = -4.6
y = -5

[State 90]
type = veladd
trigger1 = AnimElemTime(12) >= 2
y = .5

[State 130]
type = Turn
trigger1 = AnimElemTime(12) > 5
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10

[State 903, 2]
type = SelfState
trigger1 = AnimElemTime(12) > 5
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10
value = 5100

;---------------------------------------------------------------------------
;地獄車(相手2-4)
[Statedef 664]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 664

[State 120]
type = screenbound
trigger1 = AnimElemTime(9) < 0
value = 1
;movecamera = 1,0

[State 300]
type = null;Width
trigger1 = AnimElemTime(11) >= 0 && AnimElemTime(11) < 6
edge = 0,10

[State 90]
type = VelSet
trigger1 = AnimElemTime(11) = 1
x = -4.6
y = -5

[State 90]
type = veladd
trigger1 = AnimElemTime(11) >= 2
y = .5

[State 130]
type = Turn
trigger1 = AnimElemTime(11) > 5
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10

[State 903, 2]
type = SelfState
trigger1 = AnimElemTime(11) > 5
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10
value = 5100

;---------------------------------------------------------------------------
;地獄車(相手3)
[Statedef 665]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 120]
type = selfstate
trigger1 = Time > 7
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;投げ（掴みモーション）(EX)
[Statedef 900]
type    = S
movetype = A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = ifelse((var(59)&&(random%2=0))||(Command = "x+y" || Command = "x+z" || Command = "y+z"), 900, 901)

[State 600, 4]
type = ReversalDef
trigger1 = P2bodydist X = [ceil(-15*const(size.xscale)),ceil(32*const(size.xscale))]
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(3) < 0
trigger1 = enemynear,hitdefattr = SC, NT
reversal.attr = SC, NT
sparkxy = -1
sparkno = -1
hitsound = -1
p1stateno = 950
p2stateno = 960

[State 600, 4];debug
type = null;ChangeState
trigger1 = P2bodydist X = [ceil(-5*const(size.xscale)),ceil(35*const(size.xscale))]
;;trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(3) < 0
trigger1 = enemynear,hitdefattr = SC, NT
value = 950

[State 10000, 1]
type = VarSet
trigger1 = Time = 0
var(25) = 0

[State 10000, 1]
type = VarSet
triggerall = !var(25)
trigger1 = anim = [900,901]
trigger1 = AnimElem = 2
trigger1 = P2bodydist X = [ceil(-15*const(size.xscale)),ceil(32*const(size.xscale))]
trigger1 = enemynear,hitdefattr = SC, NT
trigger1 = enemynear,animtime <= -8 || enemynear,animelemtime(2) <= 0 && (enemynear,animtime = [-2,-1])
trigger2 = (enemynear,Command = "holdfwd") || (enemynear,Command = "holdback")
trigger2 = (enemynear,Command = "x") || (enemynear,Command = "y") || (enemynear,Command = "z") || (enemynear,Command = "a") || (enemynear,Command = "b") || (enemynear,Command = "c")
trigger3 = (enemynear,Command = "x") && (enemynear,Command = "a")
var(25) = 1

[State 900, 1]
type = HitDef
triggerall = anim = 900
triggerall = P2bodydist X = [ceil(-15*const(size.xscale)),ceil(32*const(size.xscale))]
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
trigger1 = AnimElem = 2
attr = S, NT
hitflag = M-
priority = 3, Miss
sparkno = -1
p1facing = ifelse((command = "holdback"&&!var(25)), -1, 1)
p2facing = 1
p1stateno = ifelse(var(25)=1,970,902)
p2stateno = ifelse(var(25)=1,975,906)
guard.dist = 0
numhits = 0

[State 900, 1]
type = HitDef
triggerall = anim = 901
triggerall = P2bodydist X = [ceil(-15*const(size.xscale)),ceil(32*const(size.xscale))]
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
trigger1 = AnimElem = 2
attr = S, NT
hitflag = M-
priority = 3, Miss
sparkno = -1
p1facing = ifelse((command = "holdback"&&!var(25)), -1, 1)
p2facing = 1
p1stateno = ifelse(var(25)=1,970,911)
p2stateno = ifelse(var(25)=1,975,916)
guard.dist = 0
numhits = 0

[State 900, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;投げ（掴みモーション）
[Statedef 901]
type    = S
movetype = A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
;anim = ifelse(Command = "y"||(var(59)&&(random%4=0)),902,ifelse(Command = "z"||(var(59)&&(random%4=1)),903,ifelse(Command = "b"||(var(59)&&(random%4=2)),904,905)))

[State 820]
type = ChangeAnim
trigger1 = !var(59)
trigger1 = Time = 0
value = ifelse(Command = "y"||var(11)=5,902,ifelse(Command = "z"||var(11)=6,903,ifelse(Command = "b"||var(11)=2,904,905)))

[State 820]
type = ChangeAnim
trigger1 = var(59)
trigger1 = Time = 0
value = 902 + random%4

[State 10000, 1]
type = VarSet
trigger1 = Time = 0
var(25) = 0

[State 900, 1]
type = HitDef
triggerall = anim = [902,903]
triggerall = P2bodydist X = [ceil(-15*const(size.xscale)),ceil(33*const(size.xscale))]
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
trigger1 = AnimElem = 1
attr = S, NT
hitflag = M-
priority = 3, Miss
sparkno = -1
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 902
p2stateno = 906
guard.dist = 0
numhits = 0

[State 900, 1]
type = HitDef
triggerall = anim = [904,905]
triggerall = P2bodydist X = [ceil(-15*const(size.xscale)),ceil(33*const(size.xscale))]
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
trigger1 = AnimElem = 1
attr = S, NT
hitflag = M-
priority = 3, Miss
sparkno = -1
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 911
p2stateno = 916
guard.dist = 0
numhits = 0

[State 900, 2]
type = ChangeState
Trigger1 = anim = 902
Trigger1 = AnimTime = 0
value = ifelse((P2BodyDist X = [ceil(-31*const(size.xscale)),ceil(31*const(size.xscale))]),215,210)

[State 900, 2]
type = ChangeState
Trigger1 = anim = 903
Trigger1 = AnimTime = 0
value = ifelse((P2BodyDist X = [ceil(-33*const(size.xscale)),ceil(33*const(size.xscale))]),225,220)

[State 900, 2]
type = ChangeState
Trigger1 = anim = 904
Trigger1 = AnimTime = 0
value = ifelse((P2BodyDist X = [ceil(-17*const(size.xscale)),ceil(17*const(size.xscale))]),265,260)

[State 900, 2]
type = ChangeState
Trigger1 = anim = 905
Trigger1 = AnimTime = 0
value = ifelse((P2BodyDist X = [ceil(-33*const(size.xscale)),ceil(33*const(size.xscale))]),275,270)

;---------------------------------------------------------------------------
;背負い投げ
[Statedef 902]
type    = S
movetype = A
physics = N
velset = 0,0
poweradd = ifelse(var(12) = 20,62,0) ;03

[State 90]
type = TargetState
trigger1 = Time = 0
value = 905

[State 820]
type = ChangeAnim
trigger1 = Time = 0
value = 910
persistent = 0

[State 100]
type = VarSet
trigger1 = Time = 0
var(25) = 0

[State 100]
type = VarSet
triggerall = var(12) != 20
triggerall = !var(25) && time < 6
trigger1 = (enemynear,Command = "holdfwd") || (enemynear,Command = "holdback")
trigger1 = (enemynear,Command = "x") || (enemynear,Command = "y") || (enemynear,Command = "z") || (enemynear,Command = "a") || (enemynear,Command = "b") || (enemynear,Command = "c")
trigger2 = (enemynear,Command = "x") && (enemynear,Command = "a")
var(25) = 1

[State 1201, 2]
type = Playerpush
trigger1 = 1
value = 0

[State 3001]
type = Width
trigger1 = animelemtime(1) >= 0 && animelemtime(2) < 0
edge = 0,40

[State 3001]
type = Width
trigger1 = animelemtime(2) >= 0 && animelemtime(4) < 0
edge = 30,0

[State 3001]
type = Width
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
edge = 60,0

[State 3001]
type = Width
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
edge = 90,0

[State 3001]
type = Width
trigger1 = animelemtime(6) >= 0
edge = 130,0

[State 901]
type = PlaySnd
trigger1 = var(12) = 20
trigger1 = AnimElem = 1
value = 5,5

[State 901]
type = PlaySnd
trigger1 = AnimElem = 6
value = 100,4
channel = 0

[State 901,1]
type = targetBind
trigger1 = animelem = 1
pos = ceil(-36*const(size.xscale)),0;-27,0
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 2
pos = ceil(-50*const(size.xscale)),ceil(-101*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 3
pos = ceil(6*const(size.xscale)), ceil(-83*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 4
pos = ceil(39*const(size.xscale)), ceil(-64*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = AnimElem = 5
pos = ceil(75*const(size.xscale)), ceil(-54*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = AnimElemTime(6) = 0
pos = ceil(111*const(size.xscale)), ceil(-75*const(size.yscale))
postype = P1
time = 1

[State 901]
type = TargetLifeAdd
trigger1 = var(12) != 20
trigger1 = AnimElemTime(6) = 0
value = ceil(ifelse(var(25)=1,-111,-222)*var(52)/3) ;70 ;7f ;80

[State 901]
type = TargetLifeAdd
trigger1 = var(12) = 20
trigger1 = AnimElemTime(6) = 0
value = -188

[State 901]
type = TargetPowerAdd
trigger1 = AnimElemTime(6) = 0
value = ifelse(var(12)=20,62,0) ;03

[State 901]
type = TargetState
triggerall = var(12) != 20
triggerall = var(25) = 1
trigger1 = AnimElemTime(6) = 1
value = 930

[State 901, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;背負い投げ（相手）
[Statedef 905]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 1201]
type = screenbound
trigger1 = AnimElemTime(6) <= 1
value = 1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 915

[State 903]
type = VelSet
trigger1 = AnimElemTime(6) = 1
x = -5.2
y = -4.9

[State 903]
type = veladd
trigger1 = AnimElemTime(6) >= 2
y = .51

[State 1300]
type = Turn
trigger1 = AnimElemTime(6) > 2
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10

[State 903, 2]
type = SelfState
trigger1 = AnimElemTime(6) > 5
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10
value = 5100

;---------------------------------------------------------------------------
;背負い投げ（相手）2
[Statedef 906]
type    = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 120]
type = selfstate
trigger1 = Time > 5
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;巴投げ
[Statedef 911]
type    = S
movetype = A
physics = N
velset = 0,0
poweradd = ifelse(var(12) = 20,62,0) ;03

[State 901]
type = TargetState
trigger1 = Time = 0
value = 915

[State 820]
type = ChangeAnim
trigger1 = Time = 0
value = 920
persistent = 0

[State 100]
type = VarSet
trigger1 = Time = 0
var(25) = 0

[State 100]
type = VarSet
triggerall = var(12) != 20
triggerall = !var(25) && time < 6
trigger1 = (enemynear,Command = "holdfwd") || (enemynear,Command = "holdback")
trigger1 = (enemynear,Command = "x") || (enemynear,Command = "y") || (enemynear,Command = "z") || (enemynear,Command = "a") || (enemynear,Command = "b") || (enemynear,Command = "c")
trigger2 = (enemynear,Command = "x") && (enemynear,Command = "a")
var(25) = 1

[State 1201, 2]
type = Playerpush
trigger1 = 1
value = 0

[State 3001]
type = Width
trigger1 = animelemtime(1) >= 0 && animelemtime(2) < 0
edge = 0,40

[State 300]
type = Width
trigger1 = AnimElemTime(2) >= 0 && animelemtime(3) < 0
edge = 30,0

[State 300]
type = Width
trigger1 = AnimElemTime(3) >= 0 && animelemtime(4) < 0
edge = 60,0

[State 300]
type = Width
trigger1 = animelemtime(4) >= 0 && animelemtime(6) < 0
edge = 110,0

[State 100]
type = Width
trigger1 = AnimElemTime(6) >= 0
edge = 130,0

[State 90]
type = PlaySnd
trigger1 = var(12) = 20
trigger1 = AnimElem = 1
value = 5,5

[State 90]
type = PlaySnd
trigger1 = AnimElem = 6
value = 100, 4
channel = 0

[State 901,1]
type = targetBind
trigger1 = animelem = 1
pos = ceil(-37*const(size.xscale)),0
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 2
pos = ceil(-32*const(size.xscale)),ceil(-61*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 3
pos = ceil(51*const(size.xscale)),ceil(-64*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = AnimElem = 4
pos = ceil(117*const(size.xscale)),ceil(-36*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = AnimElem = 5
pos = ceil(128*const(size.xscale)), ceil(-47*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = AnimElemTime(6) = 0
pos = ceil(160*const(size.xscale)), ceil(-80*const(size.yscale))
postype = P1
time = 1

[State 901]
type = TargetLifeAdd
trigger1 = var(12) != 20
trigger1 = AnimElemTime(6) = 0
value = ceil(ifelse(var(25)=1,-111,-222)*var(52)/3) ;70 ;7f ;80

[State 901]
type = TargetLifeAdd
trigger1 = var(12) = 20
trigger1 = AnimElemTime(6) = 0
value = -188

[State 901]
type = TargetPowerAdd
trigger1 = AnimElemTime(6) = 0
value = ifelse(var(12)=20,62,0)

[State 901]
type = TargetState
triggerall = var(12) != 20
triggerall = var(25) = 1
trigger1 = AnimElemTime(6) = 1
value = 930

[State 901]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;巴投げ（相手）
[Statedef 915]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 120]
type = screenbound
trigger1 = AnimElemTime(6) <= 0
value = 1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 925

[State 903]
type = VelSet
trigger1 = AnimElemTime(6) = 1
x = -4.6
y = -5

[State 903]
type = veladd
trigger1 = AnimElemTime(6) >= 2
y = .5

[State 130]
type = Turn
trigger1 = AnimElemTime(6) > 2
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10

[State 903, 2]
type = SelfState
trigger1 = AnimElemTime(6) > 5
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10
value = 5100

;---------------------------------------------------------------------------
;巴投げ（相手）2
[Statedef 916]
type    = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 120]
type = selfstate
trigger1 = Time > 5
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;投げ抜け（相手）
[Statedef 930]
type    = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 930

[State 903]
type = posadd
trigger1 = time = 0
x = 20
y = 40

[State 903]
type = VelSet
trigger1 = time = 0
x = -2.5
y = -8

[State 903]
type = veladd
trigger1 = time >= 1
y = .49

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 903, 2]
type = SelfState
trigger1 = alive = 0
trigger1 = anim = 930
trigger1 = animtime = 0
value = 5050

[State 902, 1]
type = ChangeAnim
trigger1 = anim = 930
trigger1 = animtime = 0
value = 5040

[State 903, 2]
type = SelfState
trigger1 = time > 5
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
;グラップディフェンス(弾く)1
[Statedef 950]
type = S
movetype = A
physics = S
velset = 0,0
anim = 950
ctrl = 0
sprpriority = 0

;[State 901]
;type = TargetState
;trigger1 = Time = 0
;value = 960

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 400]
type = PlaySnd
trigger1 = Time = 0
value = 350,0
channel = 8

[State 400]
type = Explod
trigger1 = Time = 0
anim = 7960
pos = 2,-67
sprpriority = 3
ownpal = 1
pausemovetime = 19
supermovetime = 9999999
ignorehitpause = 1

[State 400]
type = Pause
trigger1 = time = 0
time = 18
movetime = 16
pausebg = 0

[state 30]
type = StatetypeSet
trigger1 = AnimElem = 2
value = A
physics = N

[State 110]
type = VelSet
trigger1 = AnimElem = 2
x = -5
y = -4.5

[State 110]
type = Veladd
trigger1 = AnimElemTime(2) >= 1
y = .5

[State 70]
type = ChangeState
trigger1 = AnimElemTime(2) >= 2
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 955

;---------------------------------------------------------------------------
;グラップディフェンス(弾く)2
[Statedef 955]
type = S
movetype = I
physics = S
velset = 0,0
anim = 955
ctrl = 0

[State 80]
type = PosSet
trigger1 = time = 0
y = 0

[State 52]
type = PlaySnd
trigger1 = Time = 0
value = 4, 0
channel = 20

[State 90]
type = Changestate
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;グラップディフェンス(弾く)(相手)1
[Statedef 960]
type = S
movetype = I
physics = N
velset = 0,0
ctrl = 0
sprpriority = 1

[State 90]
type = selfstate
trigger1 = Ishelper
trigger1 = time = 0
value = prevstateno

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 110]
type = VelSet
trigger1 = time = 1
x = -8
y = 0

[State 110]
type = VelMul
trigger1 = time >= 2
x = .85

[State 90]
type = ChangeAnim
trigger1 = anim = anim
trigger1 = Animtime = 0
value = 0
persistent = 0

[State 90]
type = ChangeAnim
trigger1 = Anim = 0
trigger1 = time <= 25
value = 0

[State 90]
type = Selfstate
trigger1 = time = 25
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;グラップディフェンス(弾く)(相手)2
[Statedef 965]
type    = S
movetype = H
physics = S
velset = 0,0
ctrl = 0

[State 120]
type = selfstate
trigger1 = Time > 5
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;グラップディフェンス(弾かれる)1
[Statedef 970]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 970
sprpriority = 1

[State 901]
type = TargetState
trigger1 = Time = 0
value = 972

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 400]
type = PlaySnd
trigger1 = Time = 0
value = 350,0
channel = 8

[State 400]
type = Explod
trigger1 = Time = 0
anim = 7960
pos = 40,-67
sprpriority = 3
ownpal = 1
facing = -1
pausemovetime = 18
supermovetime = 9999999
ignorehitpause = 1

[State 400]
type = Pause
trigger1 = time = 1
time = 17
movetime = 17
pausebg = 0

[State 110]
type = VelSet
trigger1 = time = 18
x = -8
y = 0

[State 90]
type = Changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;グラップディフェンス(弾かれる)相手1
[Statedef 972]
type = S
movetype = I
physics = N
velset = 0,0
ctrl = 0
sprpriority = 0

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 90]
type = ChangeAnim
trigger1 = time = 0
value = 150

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 110]
type = VelSet
trigger1 = time = 1
x = -12
y = 0

[State 110]
type = VelMul
trigger1 = time >= 2
x = .85

[State 90]
type = Selfstate
trigger1 = time = 13
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;グラップディフェンス(弾く)相手2
[Statedef 975]
type    = S
movetype = H
physics = S
velset = 0,0
ctrl = 0

[State 120]
type = selfstate
trigger1 = Time > 5
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;豪昇龍拳
[Statedef 1000]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
juggle  = 8
poweradd = 438

[State 1000]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse(Command = "shoryu1", 0, ifelse(Command = "shoryu2", 1, 2))

[State 1000]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(6) = ifelse(P2bodydist y <-120,2,ifelse(var(58)%2=0,0,random%3))

[State 1000]
type = VarSet
triggerall = var(59)
triggerall = Time = 0
trigger1 = P2bodydist X >= 200
trigger2 = enemynear,animtime >= -3
trigger3 = enemynear,ctrl
trigger4 = P2bodydist X >= 23
trigger4 = P2stateType != A
var(6) = 0

[State 1000]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = var(53) = 3
var(6) = 0

[State 1000]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(6), 1000, ifelse(var(6) = 1, 1010, 1020))

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000]
type = Width
trigger1 = 1
edge = 20,0

[state 300]
type = StatetypeSet
trigger1 = AnimElemTime(3) = 1
value = A
physics = N

[State 300]
type = PlaySnd
trigger1 =  AnimElem = 1
value = 100,3
channel = 0

[State 170, 1]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
value = SCA

[State 1000]
type = VelSet
trigger1 = AnimElemTime(3) = 1
x = ifelse(!var(6), 3, ifelse(var(6) = 1, 5.25, 7.5))
y = ifelse(!var(6), -8, ifelse(var(6) = 1, -10.2, -12.3))

[State 1000]
type = Veladd
trigger1 = AnimElemTime(3) >= 1
y = ifelse(!var(6), .65, ifelse(var(6) = 1, .63, .6))

[State 1000]
type = VelMul
trigger1 = AnimElemTime(3) >= 1+var(6)
x = .9

[State 1000]
type = Velset
trigger1 = !Var(6)
trigger1 = AnimElemTime(3) = 9
trigger2 = Var(6) = 1
trigger2 = AnimElemTime(3) = 12
trigger3 = Var(6) = 2
trigger3 = AnimElemTime(3) = 17
x = 0

[State 1000]
type = HitDef
trigger1 = AnimElemTime(1) = 1
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(187*var(52)/3),ceil(49*var(52)/3) ;75-68-5c ,89-87 -imp
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 11,10
sparkno = S4050
guard.sparkno = S4050
sparkxy = -3, -55
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2*const(size.xscale),-11
guard.velocity = -10
air.velocity = -2*const(size.xscale),-11
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = -11*const(size.xscale)
guard.cornerpush.veloff = -11
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -10*const(size.xscale)
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 0,0
;envshake.time = 8
;envshake.ampl = 2
forcestand = 1

[State 1000]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(76*var(52)/3),ceil(14*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 11,10
sparkno = S4050
guard.sparkno = S4050
sparkxy = -5, -55
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2.3*const(size.xscale),-11
guard.velocity = -10
air.velocity = -2.3*const(size.xscale),-9.75
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = -11*const(size.xscale)
guard.cornerpush.veloff = -11
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -10*const(size.xscale)
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 0,0
;envshake.time = 8
;envshake.ampl = 2
forcestand = 1

[State 1000]
type = HitDef
trigger1 = AnimElem = 3
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(83*var(52)/3),ceil(14*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 11,10
sparkno = S4050
guard.sparkno = S4050
sparkxy = 5, -91
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2.3,-10
guard.velocity = -10
air.velocity = -2.3,-8.5
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = -11*const(size.xscale)
guard.cornerpush.veloff = -11
air.cornerpush.veloff = ifelse(!var(6),-11,0)*const(size.xscale)
airguard.cornerpush.veloff = -10*const(size.xscale)
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 0,0
;envshake.time = 8
;envshake.ampl = 2
forcestand = 1

[State 70]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1005

;---------------------------------------------------------------------------
;着地state
[Statedef 1005]
type = S
movetype = I
physics = S
anim = 1030
ctrl = 1
velset = 0,0

[State 40]
type = PlaySnd
trigger1 = time = 0
value = 4, 0

[State 80]
type = PosSet
trigger1 = time = 0
y = 0

[State 90]
type = Changestate
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;豪昇龍拳(EX)
[Statedef 1020]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
juggle  = 8
poweradd = 187 ;z,09 0a 0b 0c

[State 1100]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse(Command = "shoryu1", 0, ifelse(Command = "shoryu2", 1, 2))

[State 1000]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(6) = ifelse(P2bodydist y <-120,2,ifelse(var(58)%2=0,0,2))

[State 1000]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = numtarget
var(6) = 0

[State 1000]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = var(53) = 3
var(6) = 0

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000]
type = Width
trigger1 = 1
edge = ceil(20*const(size.xscale)),0

[State 1000]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(6), 1050, ifelse(var(6) = 1, 1060, 1070))

[state 30]
type = StatetypeSet
trigger1 = AnimElemTime(3) = 1
value = A
physics = N

[State 50]
type = PlaySnd
trigger1 =  AnimElem = 1
value = 100,3
channel = 0

[State 52]
type = PlaySnd
trigger1 =  AnimElem = 2
value = 0,3
channel = 11

[State 50]
type = StopSnd
trigger1 = movecontact
value = 0,2
channel = 11

[State 170, 1]
type = NotHitBy
trigger1 = AnimElemTime(3) <= 7
value = SCA

[State 1000]
type = VelSet
trigger1 = AnimElemTime(3) = 1
x = ifelse(!var(6), 3, ifelse(var(6) = 1, 5.25, 7.5))
y = ifelse(!var(6), -7.5, ifelse(var(6) = 1, -9.6, -12.6))

[State 1000]
type = Veladd
trigger1 = AnimElemTime(3) >= 1
y = ifelse(!var(6), .65, ifelse(var(6) = 1, .64, .64))

[State 1000]
type = VelMul
trigger1 = AnimElemTime(3) >= 1+var(6)
x = .9

[State 1000]
type = Velset
trigger1 = !Var(6)
trigger1 = AnimElemTime(3) = 9
trigger2 = Var(6) = 1
trigger2 = AnimElemTime(3) = 11
trigger3 = Var(6) = 2
trigger3 = AnimElemTime(3) = 13
x = 0

[State 1000]
type = HitDef
trigger1 = AnimElemTime(1) = 1
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage = ifelse(var(6)=2,69,76),14 ;75-68-5c ,89-87 -imp
;z, 82 86-7e 85-7b-73 ,8e 8e-8c 8f-8d-8b
;;8b-81-79
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 12,13
sparkno = S4050
guard.sparkno = S4050
sparkxy = -3, -55
hitsound   = S1,2
guardsound = S3,1
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -2.2,-10.4
guard.velocity = -9.8
air.velocity = -2.2,-10.4
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .57
persistent = 0
getpower = 42,21
givepower = 62,31
;envshake.time = 8
;envshake.ampl = 2
forcestand = 1

[State 1000]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage= ifelse(!var(6), 97, ifelse(var(6)=1,69,56)),14
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 12,13
sparkno = S4050
guard.sparkno = S4050
sparkxy = -5, -55
hitsound   = S1,2
guardsound = S3,1
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -2.2,-10.4
guard.velocity = -9.8
air.velocity = -2.2,-10.4
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .57
persistent = 0
getpower = 21,11
givepower = 62,31
;envshake.time = 8
;envshake.ampl = 2
forcestand = 1

[State 1000]
type = HitDef
trigger1 = !var(6)
trigger1 = var(3) != [1,2]
trigger1 = AnimElem = 3
trigger2 = var(6)
trigger2 = AnimElem = 3
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage= ifelse(!var(6), 97, ifelse(var(6)=1,56,21)),14
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 12,13
sparkno = S4050
guard.sparkno = S4050
sparkxy = 5, -91
hitsound   = S1,2
guardsound = S3,1
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -2.2,-10.4
guard.velocity = -9.8
air.velocity = -2.2,-10.4
airguard.velocity = -5.8,-3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .57
persistent = 0
getpower = 21,11
givepower = 62,31
;envshake.time = 8
;envshake.ampl = 2
forcestand = 1

[State 70]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1025

;---------------------------------------------------------------------------
;着地state(EX)
[Statedef 1025]
type = S
movetype = I
physics = S
anim = 1080
ctrl = 0
velset = 0,0

[State 50]
type = PlaySnd
trigger1 = time = 0
value = 4, 0

[State 80]
type = PosSet
trigger1 = time = 0
y = 0

[State 90]
type = Changestate
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;竜巻
[Statedef 1100]
type     = A
movetype = A
physics  = N
velset = 0,0
ctrl = 0
juggle  = 8
poweradd = 375

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 170, 1]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
value = SCA

[State 1000]
type = Width
trigger1 = 1
edge = ceil(25*const(size.xscale)), 0

[State 110]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse(Command = "tatsumaki1", 0, ifelse(Command = "tatsumaki2", 1, 2))

[State 1000]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(6) = ifelse(numtarget,1,1+random%2)

[State 1000]
type = VarSet
triggerall = var(59)
triggerall = Time = 0
trigger1 = var(54) = [1,16]
trigger2 = var(42) = [4,14]
var(6) = ifelse((numtarget||(100*life/const(data.life)))<=45,1,1+random%2)

[State 1000]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = p2bodydist X <= ceil(27*const(size.xscale))
var(6) = 1

[State 1000]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = p2bodydist X = [28,40]
trigger1 = p2stateType = C || (P2moveType = I && P2Statetype != A)
var(6) = 0

[State 902, 1]
type = ChangeAnim
Trigger1 = !var(12)
Trigger1 = Time = 0
value = ifelse(!var(6), 1100, ifelse(var(6) = 1, 1110, 1120))

[State 902, 1]
type = ChangeAnim
Trigger1 = var(12)
Trigger1 = Time = 0
value = ifelse(!var(6), 1100, ifelse(var(6) = 1, 1110, 1130))

[State 1100]
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = var(6) && AnimElem = 10
trigger3 = var(6) = 2 && AnimElem = 14
trigger4 = var(12) && var(6) = 2
trigger4 =  AnimElem = 18
value = 0,2
channel = 7

[State 1100]
type = PlaySnd
trigger1 = time = 0
value = 100,0
channel = 0

[State 1100]
type = VelSet
trigger1 = time = 1
x = ifelse(!var(6),3.4,ifelse(var(6)=1,4,4.8))
y = -4.4

[State 1100]
type = VelMul
trigger1 = !var(6) && AnimElemTime(8) >= 0
trigger2 = var(6) = 1 && AnimElemTime(12) >= 0
trigger3 = !var(12)
trigger3 = var(6) = 2 && AnimElemTime(16) >= 0
trigger4 = var(12)
trigger4 = var(6) = 2 && AnimElemTime(20) >= 0
x = .96

[State 1100]
type = VelSet
trigger1 = AnimElem = 4
y = 0

[State 1100]
type = Veladd
triggerall = time > 1
trigger1 = AnimElemTime(4) < 0
trigger2 = !var(6) && AnimElemTime(8) >= 0
trigger3 = var(6) = 1 && AnimElemTime(12) >= 0
trigger4 = !var(12)
trigger4 = var(6) = 2 && AnimElemTime(16) >= 0
trigger5 = var(12)
trigger5 = var(6) = 2 && AnimElemTime(20) >= 0
y = .44

[State 1100]
type = HitDef
trigger1 = Var(6)
trigger1 = AnimElemTime(1) = 1
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage = ceil(76*var(52)/3),ceil(14*var(52)/3) ; 85,8E,8c
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 11,12
sparkno = S4020
guard.sparkno = S4020
sparkxy = -10, -48
hitsound   = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -5,-8.5
guard.velocity = -15*const(size.xscale)
air.velocity = -2.5,-7.6
airguard.velocity = -5,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -24.5
;envshake.time = 10
;envshake.ampl = 3
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
;air.recover = 0
yaccel = .48
persistent = 0
getpower = 0,0
givepower = 0,0
forcestand = 1

[State 1100]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 8
trigger3 = AnimElem = 12
trigger4 = AnimElem = 16
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(76*var(52)/3),ceil(14*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 13,13
sparkno = S4020
guard.sparkno = S4020
sparkxy = -2, -63
hitsound   = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2.5,-6
guard.velocity = -15*const(size.xscale)
air.velocity = -2.5,-8.4
airguard.velocity = -8.5*const(size.xscale),-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -20
;envshake.time = 10
;envshake.ampl = 3
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
;air.recover = 0
yaccel = .51
persistent = 1
getpower = 0,0
givepower = 0,0
forcestand = 1

[State 1100]
type = HitDef
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
trigger3 = AnimElem = 14
trigger4 = AnimElem = 18
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(76*var(52)/3),ceil(14*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 13,13
sparkno = S4020
guard.sparkno = S4020
sparkxy = -2, -63
hitsound   = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = 2.5,-6
guard.velocity = 15*const(size.xscale)
air.velocity = 2.5,-8.4
airguard.velocity = 8.5*const(size.xscale),-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 10
;envshake.ampl = 3
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
;air.recover = 0
yaccel = .51
persistent = 1
getpower = 0,0
givepower = 0,0
forcestand = 1

[State 1100]
type = ChangeState
trigger1 = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1105

;---------------------------------------------------------------------------
;（着地）
[Statedef 1105]
type    = S
physics = S
ctrl = 0
anim = 1150
velset = 0,0

[State 50]
type = PosSet
trigger1 = Time = 0
y = 0

[State 50]
type = CtrlSet
trigger1 = Time = 2
trigger1 = command = "holddown"
trigger2 = Time = 0
trigger2 = command = "holdfwd"
trigger3 = var(59)
trigger3 = time = 1
value = 1

[State 50]
type = PlaySnd
trigger1 = Time = 0
value = 4, 0

[State 50]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;竜巻(EX)
[Statedef 1120]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
juggle  = 8
poweradd = 125 ;z,06-08-0a-
;07-08-09-0a-0b-

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 170, 1]
type = NotHitBy
trigger1 = AnimElemTime(1) < 3
value = SCA

[State 110]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse(Command = "tatsumaki1", 0, ifelse(Command = "tatsumaki2", 1, 2))

[State 1000]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(6) = ifelse(numtarget&&random<=250,0,1+random%2)

[State 1000]
type = VarSet
triggerall = var(59)
triggerall = Time = 0
trigger1 = prevstateno = 330
trigger2 = P2bodydist X >= ceil(28*const(size.xscale))
var(6) = 1+random%2

[State 1000]
type = VarSet
triggerall = var(59)
triggerall = Time = 0
trigger1 = projhittime(1500) = [1,20]
var(6) = 2

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(6), 1160, ifelse(var(6) = 1, 1170, 1180))

[State 1000]
type = Width
trigger1 = !var(6)
edge = ceil(25*const(size.xscale)), 0

[State 1100]
type = PlaySnd
trigger1 = !var(6)
trigger1 = AnimElem = 5
trigger2 = var(6) && AnimElem = 6
trigger3 = var(6) = 1 && AnimElem = 9
trigger4 = var(6) = 2
trigger4 = AnimElem = 10 || AnimElem = 13 || AnimElem = 17
value = 0,2
channel = 7
persistent = 1

[State 1000, 0]
type = StopSnd
trigger1 = movecontact
trigger1 = hitpausetime
channel = 7
ignorehitpause = 1
persistent = 1

[State 1100]
type = PlaySnd
trigger1 = time = 0
value = 100,0
channel = 0

[State 1100]
type = VelSet
trigger1 = AnimElem = 1
x = ifelse(!var(6),3.2,ifelse(var(6)=1,3.8,4.4))
y = -5.7

[State 1100]
type = VelMul
trigger1 = !var(6) && AnimElemTime(7) >= 0
trigger2 = var(6) = 1 && AnimElemTime(11) >= 0
trigger3 = var(6) = 2 && AnimElemTime(19) >= 0
x = .96

[State 1100]
type = VelSet
trigger1 = AnimElem = 4
y = 0

[State 1100]
type = Veladd
trigger1 = AnimElemTime(4) < 0
trigger2 = !var(6) && AnimElemTime(7) >= 0
trigger3 = var(6) = 1 && AnimElemTime(11) >= 0
trigger4 = var(6) = 2 && AnimElemTime(19) >= 0
y = .52

[State 1100]
type = HitDef
trigger1 = AnimElemtime(1) = 2
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage = ifelse(!var(6),34,97),14 ; 85,8E,8c
;z, 84 82-7b 82-7a, 8e 8e-8d
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = ifelse(!var(6),11,9),ifelse(!var(6),12,10)
guard.pausetime = ifelse(!var(6),11,10),ifelse(!var(6),12,11)
sparkno = S4020
guard.sparkno = S4020
sparkxy = -10, -48
hitsound   = S2,2
guardsound = S3,1
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -1.2,-8
guard.velocity = -12*const(size.xscale)
air.velocity = -1.2,-8
airguard.velocity = -5.7,-1.2
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -16.5*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -16.5*const(size.xscale)
envshake.time = 10
envshake.ampl = 3
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
;air.recover = 0
yaccel = .53
persistent = 0
getpower = 42,21 ;02,01
givepower = 62,31 ;03,
forcestand = 1

[State 1100]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 8
trigger3 = AnimElem = 12
trigger4 = AnimElem = 15
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage = 49,14 ;ifelse(!var(6),83,49),14
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 11,12
guard.pausetime = 10,11
sparkno = S4020
guard.sparkno = S4020
sparkxy = -2, -63
hitsound   = S2,2
guardsound = S3,1
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -1.2,-7.2
guard.velocity = -10
air.velocity = -1.2,-7.6
airguard.velocity = -5.7,-1.2
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -8
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -8
envshake.time = 10
envshake.ampl = 3
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
;air.recover = 0
yaccel = .54
persistent = 1
getpower = 42,21 ;02,01
givepower = 62,31 ;03,
forcestand = 1

[State 1100]
type = HitDef
trigger1 = !var(6)
trigger1 = AnimElem = 5
trigger2 = var(6)
trigger2 = AnimElem = 6
trigger3 = var(6) = 1
trigger3 = AnimElem = 9
trigger4 = var(6) = 2
trigger4 = AnimElem = 10
trigger5 = AnimElem = 13
trigger6 = AnimElem = 17
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage = 49,14 ;ifelse(!var(6),83,49),14
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 11,12
guard.pausetime = 10,11
sparkno = S4020
guard.sparkno = S4020
sparkxy = -2, -63
hitsound   = S2,2
guardsound = S3,1
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = 1.2,-7.2
guard.velocity = 10
air.velocity = 1.2,-7.6
airguard.velocity = 5.7,-1.2
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
;air.recover = 0
yaccel = .54
persistent = 1
getpower = 42,21 ;02,01
givepower = 62,31 ;03,
forcestand = 1

[State 110]
type = ChangeState
trigger1 = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1125

;---------------------------------------------------------------------------
;（着地)(EX)
[Statedef 1125]
type    = S
physics = S
ctrl = 0
anim = 1185
velset = 0,0

[State 50]
type = PosSet
trigger1 = Time = 0
y = 0

[State 50]
type = PlaySnd
trigger1 = Time = 0
value = 4, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;豪波動拳
[Statedef 1200]
type    = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(var(12)=20,83,125) ;z,04-08
;04-06

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 1000]
type = Width
trigger1 = 1
edge = ceil(50*const(size.xscale)), 0

[State 1000]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse(Command = "hadou1", 0, ifelse(Command = "hadou2", 1, 2))

[State 1000]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(6) = 1+random%2

[State 1000]
type = VarSet
triggerall = var(59)
triggerall = Time = 0
trigger1 = numtarget
trigger2 = P2BodyDist X = [0,120]
var(6) = 2

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(12), 1200, ifelse(var(12)=10,1210,1220))

[State 1000]
type = PlaySnd
trigger1 = var(12) != 20
trigger1 = AnimElemTime(4) = 1
trigger2 = var(12) = 20
trigger2 = AnimElemTime(3) = 1
value = 100, 1
channel = 0

[State 1000]
type = PlaySnd
trigger1 = var(12) != 20
trigger1 = AnimElem = 4
trigger2 = var(12) = 20
trigger2 = AnimElem = 3
value = 150,0

[State -3]
type = Helper
trigger1 = var(12) != 20
trigger1 = AnimElem = 4
trigger2 = var(12) = 20
trigger2 = AnimElem = 3
id = 6100
name = "hadouken"
pos = ceil(93*const(size.xscale)),ceil(-56*const(size.yscale))
postype = P1
stateno = 6100
helpertype = normal
keyctrl = 0
ownpal = 1
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 1000]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;豪波動拳（飛び道具）
[Statedef 6100]
type    = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
anim = 6100+(parent,var(6))*10
sprpriority = 4

[State 300]
type = VarSet
trigger1 = time = 0
var(6) = parent,var(6)

[State 300]
type = VarSet
trigger1 = time = 0
var(52) = parent,var(52)

[State 900]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 300]
type = VarSet
trigger1 = time = 0
var(12) = parent,var(12)

[State 1005]
type = varadd
trigger1 = time && var(1) < 25
var(1) = 1

[State 110]
type = VelSet
trigger1 = var(12) != 20
trigger1 = time = 1
x = 3.51 + (var(6)*1.3)

[State 110]
type = VelSet
trigger1 = var(12) = 20
trigger1 = time = 1
x = ifelse(!var(6),3.32,ifelse(var(6)=1,4.15,5.38))

[State 100]
type = Projectile
triggerall = var(12) != 20
trigger1 = var(6) = 2
trigger1 = time = 1
projanim = 6050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projremovetime = 21
projedgebound = 55
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
ProjID = 1000
attr = S, SP
damage= ceil(125*var(52)/3),ceil(21*var(52)/3) ;7e,8d ;82,8e
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = 0, 0
hitsound = S1,2
guardsound = S3,0
ground.type = High
ground.slidetime = 19
ground.hittime = 19
air.hittime = 19
guard.ctrltime = 19
ground.velocity = -4,-5.5
guard.velocity = -10
air.velocity = -4, -5.5
airguard.velocity = -6.3,-1
air.juggle = 8
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
getpower = 0,0
givepower = 0,0 ;03
forcestand = 1
nochainID = 0
yaccel = .5

[State 100]
type = Projectile
triggerall = var(12) != 20
trigger1 = var(6) = 2
trigger1 = time = 23
trigger2 = var(6) != 2
trigger2 = time = 1
projanim = 6050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projremovetime = -1
projedgebound = 55
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
ProjID = 1000
attr = S, SP
damage= ceil(125*var(52)/3),ceil(21*var(52)/3) ;7e,8d ;82,8e
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = 0, 0
hitsound = S1,2
guardsound = S3,0
ground.type = High
ground.slidetime = 19
ground.hittime = 19
air.hittime = 19
guard.ctrltime = 19
ground.velocity = -12,0
guard.velocity = -10
air.velocity = -4, -5.5
airguard.velocity = -6.3,-1
air.juggle = 8
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
getpower = 0,0
givepower = 0,0  ;03
nochainID = 0
yaccel = .5

[State 100]
type = Projectile
trigger1 = var(12) = 20
trigger1  = time = 1
projanim = 6050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projremovetime = ifelse(!var(6),15,ifelse(var(6)=1,14,13))
projedgebound = 55
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
ProjID = 1000
attr = S, SP
damage= 97,14 ;82,8e
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = 0, 0
hitsound = S1,2
guardsound = S3,1
ground.type = High
ground.slidetime = 16
ground.hittime = 16
air.hittime = 19
guard.ctrltime = 15
ground.velocity = -4.5,-6
guard.velocity = -11
air.velocity = -4.5,-6
airguard.velocity = -5.7,-1
air.juggle = 8
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
getpower = 104,42 ;04,02
givepower = 62,31 ;03,
forcestand = 1
yaccel = .5

[State 100]
type = Projectile
trigger1 = var(12) = 20
trigger1  = Time = ifelse(!var(6),17,ifelse(var(6)=1,16,15))
projanim = 6050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projedgebound = 55
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
ProjID = 1000
attr = S, SP
damage= 97,14 ;82,8e
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = 0, 0
hitsound = S1,2
guardsound = S3,1
ground.type = High
ground.slidetime = 16
ground.hittime = 16
air.hittime = 19
guard.ctrltime = 15
ground.velocity = -11
guard.velocity = -11
air.velocity = -4, -5.5
airguard.velocity = -5.7,-1
air.juggle = 8
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
getpower = 104,42 ;04,02
givepower = 62,31 ;03,
;forcestand = 1
yaccel = .5

[State 300]
type = VarSet
trigger1 = root,ProjContactTime(1000) = 1
ignorehitpause = 1
var(2) = 1

[State 411]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -52 && !var(2)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(1000)
value = 6150

;---------------------------------------------------------------------------
;豪波動拳（飛び道具）（消滅）
[Statedef 6150]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 6150

[State 300]
type = VarSet
trigger1 = time = 0
var(2) = 0

[State 900]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 411]
type = null;PosAdd
trigger1 = time = 1
trigger1 = P2dist X < -22
x = P2dist X + 22

[State 410]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;灼熱豪波動
[Statedef 1300]
type    = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(var(12)=20,83,125)
;z 04 09 ,06

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse(Command = "shakunetsu1", 0, ifelse(Command = "shakunetsu2", 1, 2))

[State 1000]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(6) = ifelse(numtarget,2,1+random%2)

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(12), 1300, ifelse(var(12) = 10,1310,1320))

[State 1000]
type = Width
trigger1 = 1
edge = ceil(50*const(size.xscale)), 0

[State 1000]
type = PlaySnd
trigger1 = !var(12)
trigger1 = AnimElem = 7
trigger2 = var(12)
trigger2 = AnimElem = 6
value = 100, 1
channel = 0

[State 1000]
type = PlaySnd
trigger1 = !var(12)
trigger1 = AnimElem = 7
trigger2 = var(12)
trigger2 = AnimElem = 6
value = 150,0

[State -3]
type = Helper
trigger1 = !var(12)
trigger1 = AnimElem = 7
trigger2 = var(12)
trigger2 = AnimElem = 6
id = 6200
name = "shakunetsu"
pos = ceil(93*const(size.xscale)),ceil(-56*const(size.yscale))
postype = P1
stateno = 6200
helpertype = normal
keyctrl = 0
ownpal = 1
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 1000]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;灼熱波動拳（飛び道具）
[Statedef 6200]
type    = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
anim = 6200+(parent,var(6))*10
sprpriority = 4

[State 9000]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(6) = parent,var(6)

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(12) = parent,var(12)

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(52) = parent,var(52)

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(2) = 1

[State 102]
type = VarAdd
trigger1 = root,ProjContacttime(1100) = 2
var(2) = 1
Persistent = 1
ignorehitpause=1

[State 110]
type = VelSet
trigger1 = time = 1
x = 3.51 + (var(6)*1.3)

[State 110]
type = VelSet
trigger1 = var(12) = 20
trigger1 = time = 1
x = ifelse(!var(6),3.32,ifelse(var(6)=1,4.15,5.38))

[State 1000, 3]
type = AttackMulSet
trigger1 = parent,var(12) = 10
trigger1 = parent,var(6) = 2
value = 1.78

[State 1000, 3]
type = AttackMulSet
trigger1 = parent,var(12) = 10
trigger1 = parent,var(6) != 2
value = 2.33

[State 100]
type = Projectile
triggerall = var(12) != 20
trigger1 = !var(6)
trigger1 = time = 1
projanim = 6050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
projhits = 1
ProjID = 1100
velocity = vel X, vel Y
attr = S, SP
damage = ceil(118*var(52)/3),ceil(12*var(52)/3) ; 274
; 7f 88-82 88-81-7b,8d 8f-8e 8e-8d-8c s.g 7f-6e-5d, 88-84
;z, 84 85-81 85-81-7D , 8e 8e-8d 8d-8c-8b
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 0,12  ;8,13 ;s 7f
sparkno = -1;S4020
guard.sparkno = -1;S4020
sparkxy = -3, 0
hitsound = -1;S1,2
guardsound = -1;S3,0
ground.type = High
ground.slidetime = 16
ground.hittime = 16
air.hittime = 16
guard.ctrltime = 16
ground.velocity = -6.5
guard.velocity = -9.5
air.velocity = -4.5, -6
airguard.velocity = -6.3,-1
air.juggle = 8
fall = 0
;fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
getpower = 0,0
givepower = 0,0 ;35, 35
palfx.color = 0
palfx.add = 120,-54,0
palfx.mul = 90,64,0
palfx.sinadd = -70,-70,0,5
palfx.time = ifelse(p2statetype = A ,45,25)
;forcestand = 1
yaccel = .5
nochainID = root,var(8)
Persistent = 0

[State 100]
type = Projectile
triggerall = var(12) != 20
trigger1 = var(6)
trigger1 = time = 1
projanim = 6050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
projmisstime = 1
projhits = 1+var(6)
ProjID = 1100
velocity = vel X, vel Y
attr = S, SP
damage = ceil(var(52)*ifelse((Var(6) && var(2)=1),56,42)/3),ceil(12*var(52)/3) ;260, ;293
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 7,13  ;8,13 ;s 7f
sparkno = -1
guard.sparkno = -1;S7600
sparkxy = 0, 0
hitsound = -1;S1,2
guardsound = -1;S3,0
ground.type = High
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.ctrltime = 20
ground.velocity = -4.5,-6
guard.velocity = -10
air.velocity = -4.5, -6
airguard.velocity = -6.3,-1
air.juggle = 8
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
getpower = 0,0
givepower = 0,0;35, 35
palfx.color = 0
palfx.add = 120,-54,0
palfx.mul = 90,64,0
palfx.sinadd = -70,-70,0,5
palfx.time = ifelse(p2statetype = A ,45,36)
forcestand = 1
yaccel = .5
nochainID = root,var(8)
Persistent = 0

[State 1000]
type = Projectile
triggerall = var(12) = 20
trigger1 = time = 1
projanim = 6050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
;projmisstime = 1
projhits = 1+var(6)
ProjID = 1100
velocity = vel X, vel Y
attr = S, SP
damage = ifelse(!Var(6),83,44),14
;z, 84 85-81 85-81-7D , 8e 8e-8d 8d-8c-8b
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 4,10
sparkno = -1
guard.sparkno = -1;S7600
sparkxy = 0, 0
hitsound = -1;S1,2
guardsound = -1;S3,0
ground.type = High
ground.slidetime = 16
ground.hittime = 16
air.hittime = 19
guard.ctrltime = 15
ground.velocity = -4, -5.5
guard.velocity = -11
air.velocity = -4, -5.5
airguard.velocity = -5.7,-1
air.juggle = 8
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
getpower = ifelse(!Var(6),104,ifelse(var(6)=1,52,35)),ifelse(!Var(6),42,ifelse(var(6)=1,21,14)) ;104,42
givepower = 62,31 ;03,
palfx.color = 0
palfx.add = 120,-54,0
palfx.mul = 90,64,0
palfx.sinadd = -70,-70,0,5
palfx.time = ifelse(p2statetype = A ,45,36)
forcestand = 1
yaccel = .5
nochainID = root,var(8)
Persistent = 0

[State 300]
type = Explod
trigger1 = var(6) && var(2) = 1
trigger1 = root,projContacttime(1100) = 1
trigger2 = var(6) = 2 && var(2) = 2
trigger2 = root,projContacttime(1100) = 1
id = 4020
name = "projhit_s"
pos = P2bodydist X ,0
postype = P1
anim = 4020
random = 10,20
ownpal = 1
ontop = 1
ignorehitpause = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 300]
type = VarSet
trigger1 = var(1) = ifelse(var(12)=20,5,8)
ignorehitpause = 1
var(1) = 0

[State 300]
type = VarSet
trigger1 = root,ProjContacttime(1100) = 1
ignorehitpause = 1
var(1) = 1

[State 300]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 411]
type = PosFreeze
triggerall = time > 1
trigger1 = var(1)
trigger2 = root,ProjContact1100 = 1
trigger2 = P2dist X < -10
value = 1
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim
triggerall = var(12) != 20
trigger1 = var(1)
trigger1 = animelem = 1
value = 6260
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim
triggerall = var(12) != 20
trigger1 = var(1)
trigger1 = animelem = 2
value = 6261
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim
triggerall = var(12) != 20
trigger1 = var(1)
trigger1 = animelem = 3
value = 6262
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim 
triggerall = var(12) != 20
trigger1 = anim = [6260,6262]
trigger1 = animtime = 0
value = 6200+var(6)*10
elem = ifelse(anim=6260,1,ifelse(anim=6261,2,3))
ignorehitpause = 1

[State 411]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -55 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(1100)
value = 6205

;---------------------------------------------------------------------------
;灼熱波動拳（飛び道具）（消滅）
[Statedef 6205]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 6250

[State 300]
type = VarSet
trigger1 = var(1)
var(1) = 0

[State 9000]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 411]
type = null;PosAdd
trigger1 = time = 1
trigger1 = P2dist X < -22
x = P2dist X + 22

[State 411]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;斬空波動拳
[Statedef 1400]
type    = A
movetype = A
physics = A
ctrl = 0
anim = 1400 + Var(12)
poweradd = ifelse(var(12)=20,62,125) ; z 03 05,04

[State 1000]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse(Command = "hadou1", 0, ifelse(Command = "hadou2", 1, 2))

[State 1000]
type = VarSet
triggerall = var(59) = [1,2]
triggerall = var(12) != 20
trigger1 = Time = 0
var(6) = ifelse(random <= 700,random%2,2)

[State 1000]
type = VarSet
triggerall = var(59) = [3,4]
triggerall = var(12) != 20
trigger1 = Time = 0
var(6) = ifelse(random <= 700,random%2+1,1)

[State 1000]
type = VarSet
triggerall = var(59)
triggerall = var(12) != 20
trigger1 = Time = 0
trigger1 = P2stateno = [5020,5120]
var(6) = ifelse((var(59)=[1,2]),random%2,1)

[State 1000]
type = VarSet
triggerall = var(59)
triggerall = var(12) != 20
triggerall = Time = 0
trigger1 = P2stateno = 5120 && enemynear,animtime < -7
trigger2 = random%4 = 1
var(6) = 0

[State 1000]
type = VarSet
triggerall = var(59)
triggerall = var(12) = 20
trigger1 = Time = 0
trigger1 = p2bodydist x <= 140
var(6) = ifelse(vel X >0,0,1)

[State 1000]
type = VarSet
triggerall = var(59)
triggerall = var(12) = 20
trigger1 = Time = 0
trigger1 = p2bodydist x > 150
var(6) = ifelse(p2bodydist x >= 185,2,ifelse((p2bodydist x >= 170&&vel X < 0),2,1))

[State 1000]
type = VarSet
triggerall = var(59)
triggerall = var(12) = 20
triggerall = P2StateType != L
triggerall = P2stateno != 5120
triggerall = P2stateno != 5201
trigger1 = Time = 0
trigger1 = P2bodydist X = [155,195]
trigger1 = vel Y = [-2.5,1.9]
var(6) = 1


[State 1000]
type = PlaySnd
trigger1 = var(12) != 20
trigger1 = AnimElem = 3
trigger2 = var(12) = 10
trigger2 = AnimElemTime(6) = 1
value = 100,2
channel = 0

[State 1000]
type = PlaySnd
triggerall = var(12) = 20
trigger1 = AnimElem = 2
trigger2 = AnimElem = 6
value = 100, 3
channel = 0

[State 1000]
type = PlaySnd
trigger1 = var(12) != 20
trigger1 = AnimElem = 3
trigger2 = var(12) = 20
trigger2 = AnimElemtime(2) = 1
value = 150, ifelse(var(12)=20,10,5)
channel = 8

[State 1000]
type = PlaySnd
triggerall = var(12)
trigger1 = var(12) != 20
trigger1 = AnimElemTime(6) = 1
trigger2 = var(12) = 20
trigger2 = AnimElemtime(6) = 1
value = 150, ifelse(var(12)=20,10,5)
channel = 8

[State 1000, 0]
type = PosFreeze
triggerall = var(12) != 20
trigger1 = (AnimElemTime(3) >= 0) && (AnimElemTime(6) <= 0)
value = 1

[State -3]
type = Helper
trigger1 = var(12) != 20
trigger1 = AnimElemTime(2) = 5; AnimElem = 3 ;3
trigger2 = var(12) = 20
trigger2 = AnimElemTime(5) = 1
id = 6300
name = "zanku_1"
pos = ceil(69*const(size.xscale)),ceil(-60*const(size.yscale)) ;-65
postype = P1
stateno = 6300
helpertype = normal
keyctrl = 0
ownpal = 1
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
ignorehitpause = 1
persistent = 0

[State -3]
type = Helper
triggerall = var(12)
trigger1 = var(12) != 20
trigger1 = AnimElem = 5 ;6
trigger2 = var(12) = 20
trigger2 = AnimElemTime(2) = 0
id = 6301
name = "zanku_2"
pos = ceil(81*const(size.xscale)),ceil(-57*const(size.yscale))
postype = P1
stateno = 6301
helpertype = normal
keyctrl = 0
ownpal = 1
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 1000]
type = ChangeState
trigger1 = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1405

;---------------------------------------------------------------------------
;斬空波動拳（着地）
[Statedef 1405]
type    = S
physics = S
ctrl = 0
anim = 40
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52]
type = PlaySnd
trigger1 = Time = 0
value = 4, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;斬空波動拳（飛び道具）1
[Statedef 6300]
type    = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
anim = 6510
sprpriority = 4

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(6) = parent,var(6)

[State 900]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(12) = parent,var(12)

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(52) = parent,var(52)

[State 1000,6]
type = BindToRoot
trigger1 = time = 0
time = 2
pos = ceil(69*const(size.xscale)),ceil(-60*const(size.yscale)) ;-65

[State 100]
type = VelSet
trigger1 = parent,Var(12) != 20
trigger1 = Time = 1
x = ifelse(!var(6), 3.5, ifelse(var(6) = 1, 4.8, 6.3))
y = ifelse(!var(6), 1.522, ifelse(var(6) = 1, 2.087, 2.74))

[State 100]
type = VelSet
trigger1 = parent,Var(12) = 20
trigger1 = Time = 1
x = ifelse(!var(6), 3.2, ifelse(var(6) = 1, 3.7, 4.8));3.3 3.8 4.9
y = ifelse(!var(6), 2.48, ifelse(var(6) = 1, 2.38, 2.65))

;x = ifelse(!var(6), 2.76, ifelse(var(6) = 1, 3.32, 4.36));3.3 3.8 4.9
;y = ifelse(!var(6), 2.14, ifelse(var(6) = 1, 2.14, 2.41))

[State 411]
type = DestroySelf
triggerall = root,movetype = H
trigger1 = !var(12)
trigger1 = time <= 1
trigger2 = var(12) = 10
trigger2 = time <= 2

[State 52, 2]
type = PosAdd
triggerall = var(12) = 10
trigger1 = Time = 2
x = ifelse(!var(6), -18, ifelse(var(6) = 1, -24, -32))
y = ifelse(!var(6), 1, ifelse(var(6) = 1, -1, -3)) ;ceil(2*const(size.yscale))

[State 1000, 3]
type = AttackMulSet
trigger1 = parent,var(12) = 10
value = 1.26

[State 1000]
type = Projectile
triggerall = root,movetype = A
trigger1 = !var(12)
trigger1 = time = 1
trigger2 = var(12) = 10
trigger2 = time = 2
projanim = 6450
Projhitanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
ProjID = 1200
attr = S, SP
damage= ceil(49*var(52)/3),ceil(14*var(52)/3) ; 89 ,8e  s.g 85-7c
;z, 87,8e
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 0,11;ceil(9*(2-parent,var(18))/2)
sparkno = -1
guard.sparkno = -1
sparkxy = 0, 0
hitsound = -1;S1,2
guardsound = -1;S3,0
ground.type = High
ground.slidetime = 20
ground.hittime = 20
air.hittime = 29
guard.ctrltime = 19
ground.velocity = -12
guard.velocity = -10
air.velocity = -2.61, -6
airguard.velocity = -6.3,-1
air.juggle = 8
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
getpower = 0,0
givepower = 0,0 ;35, 35
forcestand = 1
yaccel = .48

[State 1000]
type = Projectile
trigger1 = var(12) = 20
trigger1 = time = 1
projanim = 6450
Projhitanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
ProjID = 1200
attr = S, SP
damage= 62,14 ; 89 ,8e  s.g 85-7c
;z, 87,8e
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 0,9
sparkno = -1
guard.sparkno = -1
sparkxy = 0, 0
hitsound = -1;S1,2
guardsound = -1;S3,0
ground.type = High
ground.slidetime = 13
ground.hittime = 13
air.hittime = 19
guard.ctrltime = 12
ground.velocity = -10
guard.velocity = -10
air.velocity = -4, -5.5
airguard.velocity = -5.7,-1
air.juggle = 8
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
getpower = 42,21
givepower = 62,31 ;03,
forcestand = 1
yaccel = .5

[State 300]
type = VarSet
trigger1 = root,ProjContactTime(1200) = 1
ignorehitpause = 1
var(1) = 1

[State 411]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -40 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
trigger2 = !root,NumProjID(1200) = 1
value = 6305

;---------------------------------------------------------------------------
;斬空波動拳（飛び道具）2
[Statedef 6301]
type    = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
anim = 6520
sprpriority = 4

[State 900]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(6) = parent,var(6)

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(12) = parent,var(12)

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(52) = parent,var(52)

[State 1000]
type = BindToRoot
trigger1 = time = 0
time = 2
pos = ceil(81*const(size.xscale)),ceil(-57*const(size.yscale))

[State 100]
type = VelSet
trigger1 = parent,Var(12) != 20
trigger1 = Time = 1
x = ifelse(!var(6), 3.5, ifelse(var(6) = 1, 4.8, 6.3))
y = ifelse(!var(6), 1.522, ifelse(var(6) = 1, 2.087, 2.74))

[State 100]
type = VelSet
trigger1 = parent,Var(12) = 20
trigger1 = Time = 2
x = ifelse(!var(6), 3.32, ifelse(var(6) = 1, 3.873, 4.98))
y = ifelse(!var(6), 1.7, ifelse(var(6) = 1, 1.7, 1.71))

[State 411]
type = DestroySelf
triggerall = root,movetype = H
trigger1 = !var(12)
trigger1 = time <= 1
trigger2 = var(12) = 20
trigger2 = time <= 2

[State 1000, 3]
type = AttackMulSet
trigger1 = parent,var(12) = 10
value = 1.26

[State 1000]
type = Projectile
triggerall = root,movetype = A
trigger1 = Var(12) != 20
trigger1 = Time = 1
projanim = 6450
Projhitanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
ProjID = 1201
attr = S, SP
damage = ceil(62*var(52)/3),ceil(14*var(52)/3)
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 0,11
sparkno = -1
guard.sparkno = -1
sparkxy = 0, 0
hitsound = -1;S1,2
guardsound = -1;S3,0
ground.type = High
ground.slidetime = 20
ground.hittime = 20
air.hittime = 29
guard.ctrltime = 19
ground.velocity = -12
guard.velocity = -10
air.velocity = -2.61, -6
airguard.velocity = -6.3,-1
air.juggle = 8
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
getpower = 0,0
givepower = 0,0
forcestand = 1
yaccel = .48

[State 1000]
type = Projectile
trigger1 = var(12) = 20
trigger1 = time = 2
projanim = 6450
Projhitanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
ProjID = 1201
attr = S, SP
damage= 62,14 ; 89 ,8e  s.g 85-7c
;z, 87,8e
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 0,9
sparkno = -1
guard.sparkno = -1
sparkxy = 0, 0
hitsound = -1;S1,2
guardsound = -1;S3,0
ground.type = High
ground.slidetime = 13
ground.hittime = 13
air.hittime = 19
guard.ctrltime = 12
ground.velocity = -10
guard.velocity = -10
air.velocity = -4, -5.5
airguard.velocity = -5.7,-1
air.juggle = 8
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
getpower = 42,21
givepower = 62,31 ;03,
forcestand = 1
yaccel = .5

[State 300]
type = VarSet
trigger1 = root,ProjContactTime(1005) = 1
ignorehitpause = 1
var(1) = 1

[State 4110]
type = DestroySelf
triggerall = time >= 0
trigger1 = FrontEdgeDist <= -40 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
trigger2 = !root,NumProjID(1201)
value = 6306

;---------------------------------------------------------------------------
;斬空波動拳（飛び道具）（消滅）
[Statedef 6305]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 6550

[State 300]
type = VarSet
trigger1 = time = 0
var(1) = 0

[State 900]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 411]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;斬空波動拳（飛び道具）（消滅）2
[Statedef 6306]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 6550

[State 300]
type = VarSet
trigger1 = time = 0
var(1) = 0

[State 900]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 411]
type = DestroySelf
trigger1 = animtime = 0

;------------------------------------------------------------------------------------------
;空中竜巻斬空脚
[Statedef 1500]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
poweradd = 375

[State 110]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse(Command = "tatsumaki1", 0, ifelse(Command = "tatsumaki2", 1, 2))

[State 1000]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(6) = 1+random%2

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(6), 1500, ifelse(var(6) = 1, 1510, 1520))

[State 1000]
type = Width
trigger1 = 1
edge = ceil(25*const(size.xscale)),ceil(15*const(size.xscale))

[State 1100]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,0
channel = 0

[State 1100]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = var(6) && AnimElem = 7
trigger3 = var(6) = 2 && AnimElem = 11
value = 0,2
channel = 7

[State 1050]
type = VelAdd
trigger1 = AnimElem = 1
x = ifelse(Vel X = 0, 1.5, ifelse(Vel X > 0 ,3, -3))
y = ifelse(Vel Y <= 0, (-5-var(6))*.4, (5+var(6))*.2)

[State 1310, 3]
type = VelAdd
trigger1 = Time >= 0
y = 0.4

[State 105, 1]
type = statetypeset
trigger1 = !var(6)
trigger1 = AnimElem = 8
trigger2 = var(6) = 1
trigger2 = AnimElem = 12
trigger3 = var(6) = 2
trigger3 = AnimElem = 16
movetype = I

[State 1100]
type = HitDef
trigger1 = AnimElemTime(1) = 1
trigger2 = AnimElem = 5
trigger3 = AnimElem = 9
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(76*var(52)/3),ceil(14*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 13,13
sparkno = S4020
guard.sparkno = S4020
sparkxy = -2, -63
hitsound   = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2.5,-7
guard.velocity = -15*const(size.xscale)
air.velocity = -2.5,-7
airguard.velocity = -8.5,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -20*const(size.xscale)
;envshake.time = 10
;envshake.ampl = 3
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .51
persistent = 1
getpower = 0,0 ;100
givepower = 0,0;35, 35
forcestand = 1

[State 1100]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 7
trigger3 = AnimElem = 11
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(76*var(52)/3),ceil(14*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 13,13
sparkno = S4020
guard.sparkno = S4020
sparkxy = -2, -63
hitsound   = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = 2.5,-7
guard.velocity = 15*const(size.xscale)
air.velocity = 2.5,-7
airguard.velocity = 8.5,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 10
;envshake.ampl = 3
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .51
persistent = 1
getpower = 0,0 ;100
givepower = 0,0 ;35, 35
forcestand = 1

[State 1100]
type = ChangeState
trigger1 = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1505

;---------------------------------------------------------------------------
;空中竜巻斬空脚（着地）
[Statedef 1505]
type    = S
physics = S
ctrl = 0
anim = 1530
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 50]
type = CtrlSet
trigger1 = Time = 2
trigger1 = command = "holddown"
trigger2 = Time = 0
trigger2 = command = "holdfwd"
trigger3 = var(59)
trigger3 = time = 1
value = 1

[State 52]
type = PlaySnd
trigger1 = Time = 0
value = 4, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;空中竜巻斬空脚(EX)
[Statedef 1520]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
poweradd = 125

[State 110]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse(Command = "tatsumaki1", 0, ifelse(Command = "tatsumaki2", 1, 2))

[State 1000]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(6) = 1+random%2

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(6), 1550, ifelse(var(6) = 1, 1560, 1570))

[State 1000]
type = Width
trigger1 = 1
edge = ceil(25*const(size.xscale)),ceil(15*const(size.xscale))

[State 1100]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,0
channel = 0

[State 1100]
type = PlaySnd
trigger1 = !var(6)
trigger1 = AnimElem = 2
trigger2 = var(6)
trigger2 = AnimElem = 4
trigger3 = var(6) = 1
trigger3 = AnimElem = 8
trigger4 = var(6) = 2
trigger4 = AnimElem = 7 || AnimElem = 11 || AnimElem = 15
value = 0,2
channel = 7

[State 1000, 0]
type = StopSnd
trigger1 = movecontact
trigger1 = hitpausetime
channel = 7
ignorehitpause = 1
persistent = 1

[State 1050]
type = VelAdd
trigger1 = AnimElem = 1
x = ifelse(Vel X = 0, 1.5, ifelse(Vel X > 0 ,2, -2))
y = ifelse(Vel Y <= 0, (-5-var(6))*.4, (5+var(6))*.2)

[State 1310, 3]
type = VelAdd
trigger1 = Time >= 0
y = .52

[State 105, 1]
type = statetypeset
trigger1 = !var(6)
trigger1 = AnimElem = 8
trigger2 = var(6) = 1
trigger2 = AnimElem = 12
trigger3 = var(6) = 2
trigger3 = AnimElem = 16
movetype = I

[State 1100]
type = HitDef
trigger1 = !var(6)
trigger1 = AnimElemtime(1) = 2
trigger2 = var(6)
trigger2 = AnimElem = 2 || AnimElem = 6
trigger3 = var(6) = 2
trigger3 = AnimElem = 9 || AnimElem = 13
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage= 76,14
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 10,11
guard.pausetime = 9,10
sparkno = S4020
guard.sparkno = S4020
sparkxy = -2, -63
hitsound   = S2,2
guardsound = S3,1
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -1.2,-8
guard.velocity = -12*const(size.xscale)
air.velocity = -1.2,-8
airguard.velocity = -5.7,-1.2
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -16.5*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -16.5*const(size.xscale)
envshake.time = 10
envshake.ampl = 3
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .53
persistent = 1
getpower = 42,21 ;02,01
givepower = 62,31 ;03,
forcestand = 1

[State 1100]
type = HitDef
trigger1 = !var(6)
trigger1 = AnimElem = 2
trigger2 = var(6)
trigger2 = AnimElem = 4
trigger3 = var(6) = 1
trigger3 = AnimElem = 8
trigger4 = var(6) = 2
trigger4 = AnimElem = 7 || AnimElem = 11 || AnimElem = 15
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage= 76,14
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 10,11
guard.pausetime = 9,10
sparkno = S4020
guard.sparkno = S4020
sparkxy = -2, -63
hitsound   = S2,2
guardsound = S3,1
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = 1.2,-8
guard.velocity = 12*const(size.xscale)
air.velocity = 1.2,-8
airguard.velocity = 5.7,-1.2
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .53
persistent = 1
getpower = 42,21 ;02,01
givepower = 62,31 ;03,
forcestand = 1

[State 1100]
type = ChangeState
trigger1 = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1525

;---------------------------------------------------------------------------
;空中竜巻斬空脚(EX)（着地）
[Statedef 1525]
type    = S
physics = S
ctrl = 0
anim = 1575
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52]
type = PlaySnd
trigger1 = Time = 0
value = 4, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;阿修羅旋空
[Statedef 1600]
type    = S
movetype= A
physics = N
anim = ifelse(Var(12) = 20,1601,1600)
ctrl = 0
velset = 0,0
poweradd = ifelse(var(12)=20,42,0) ;02

[State 1100]
type = VarSet
triggerall = !var(59)
trigger1 = time = 0
var(6) = ifelse(Command = "ashura_P_F", 0, ifelse(Command = "ashura_P_B", 1, ifelse(Command = "ashura_K_F", 2, 3)))

[State 1100]
type = VarSet
triggerall = var(59)
trigger1 = time = 0
var(6) = 1+2*random%2

[State 1100]
type = VarSet
triggerall = var(59)
trigger1 = time = 0
var(6) = ifelse((random<= 750||backedgebodydist<=110),3,1)

[State 1100]
type = VarSet
triggerall = var(59)
triggerall = time = 1
trigger1 = var(12) = 20
var(6) = 3

[State 1100]
type = VelAdd
triggerall = Var(12) = 20
trigger1 = time = [1,3]
trigger2 = time = [12,14]
x = 1.6

[State 1100]
type = VelAdd
triggerall = Var(12) = 20
trigger1 = time = [4,11]
x = -1.2

[State 1020]
type = AfterImage
trigger1 = Var(12) != 20
trigger1 = Time = 1
time = 999
palpostbright= 0,0,0
PalBright   =  1,1,1 
PalContrast =  136, 192, 192
PalAdd      = 0,0,0
PalMul      = .75,.75,.75
;Trans = Add
;TimeGap  = 2
FrameGap = 3
length = 11

[State 1020]
type = AfterImage
triggerall = Var(12) = 20
trigger1 = Time = 1
time = 999
palpostbright= 0,0,0
PalBright   =  1,1,1
PalContrast =  136, 192, 192 
PalAdd      = 0,0,0
PalMul      = .75,.75,.75
Trans = Add1
;TimeGap  = 3
FrameGap = 4
length = 15

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 300]
type = PlaySnd
trigger1 = var(12) != 20
trigger1 = time = 6
value = 5,0

[State 120]
type = ChangeState
Trigger1 = animtime = 0
value = 1602

;---------------------------------------------------------------------------
;阿修羅旋空(AI,fwd)
[Statedef 1601]
type    = S
movetype= A
physics = N
anim = ifelse(Var(12) = 20,1601,1600)
ctrl = 0
velset = 0,0
poweradd = ifelse(var(12)=20,42,0) ;02

[State 1100]
type = VarSet
triggerall = var(59)
triggerall = var(12) != 20
trigger1 = time = 0
var(6) = 0+2*random%2

[State 1100]
type = VarSet
triggerall = var(59)
triggerall = var(12) != 20
trigger1 = time = 0
trigger1 = P2bodydist X <= 65 || P2bodydist X >= 200
var(6) = 2

[State 1100]
type = VarSet
triggerall = var(59)
triggerall = var(12) != 20
trigger1 = time = 0
trigger1 = P2bodydist X = [85,175]
var(6) = ifelse((P2statetype = A && random <= 650),2,0)

[State 1100]
type = VarSet
triggerall = var(59)
triggerall = var(12) != 20
triggerall = time = 0
trigger1 = NumProjID(1200) || NumProjID(1201)
trigger2 = P2bodydist X = [40,85]
trigger2 = enemynear,vel X = [4,8]
var(6) = 2

[State 1100]
type = VarSet
triggerall = var(59)
triggerall = var(12) = 20
trigger1 = time = 0
var(6) = 2

[State 1100]
type = VarSet
triggerall = var(59)
triggerall = time = 0
triggerall = var(12) = 20
trigger1 = p2bodydist X = [180,210]
trigger1 = enemynear,animtime <= -40
trigger1 = random <= 700
trigger2 = p2bodydist X = [175,210]
trigger2 = random <= 180
trigger3 = p2bodydist X >= 165
trigger3 = !numproj
trigger3 = P2StateType = A
trigger3 = random <= 350
var(6) = 0

[State 1100]
type = VelAdd
triggerall = Var(12) = 20
trigger1 = time = [1,3]
trigger2 = time = [12,14]
x = 1.6

[State 1100]
type = VelAdd
triggerall = Var(12) = 20
trigger1 = time = [4,11]
x = -1.2

[State 1020]
type = AfterImage
trigger1 = Var(12) != 20
trigger1 = Time = 1
time = 999
palpostbright= 0,0,0
PalBright   =  1,1,1 
PalContrast =  136, 192, 192
PalAdd      = 0,0,0
PalMul      = .75,.75,.75
;Trans = Add
;TimeGap  = 2
FrameGap = 3
length = 11

[State 1020]
type = AfterImage
triggerall = Var(12) = 20
trigger1 = Time = 1
time = 999
palpostbright= 0,0,0
PalBright   =  1,1,1
PalContrast =  136, 192, 192 
PalAdd      = 0,0,0
PalMul      = .75,.75,.75
Trans = Add1
;TimeGap  = 3
FrameGap = 4
length = 15

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 300]
type = PlaySnd
trigger1 = var(12) != 20
trigger1 = time = 6
value = 5,0

[State 120]
type = ChangeState
Trigger1 = animtime = 0
value = 1602

;---------------------------------------------------------------------------
;阿修羅閃空（移動）
[Statedef 1602]
type = S
movetype = I
physics = N
anim = 1602
ctrl = 0
juggle = 0

[State 130]
type = VelSet
triggerall = Var(12) != 20
trigger1 = Time = 0
x = ifelse(!var(6), 8.2, ifelse(var(6) = 1, -8.2, ifelse(var(6) = 2, 6.1, -6.1)))
y = 0

[State 130]
type = VelAdd
triggerall = AnimElemTime(1) > 0
trigger1 = Var(12) != 20
trigger1 = var(6) = [2,3]
trigger1 = Time <= 25
x =  ifelse(Vel X > 0, -.09, .09)

[State 130]
type = PosAdd
triggerall = AnimElemTime(1) > 0
triggerall = Var(12) != 20
trigger1 = var(6) = [2,3]
trigger1 = Time <= 18 && Time%3 = 1
trigger2 = var(6) = [0,1]
trigger2 = Time <= 30 && Time%3 = 1
x = ifelse(Vel X > 0, 1, -1)*floor(abs(Vel X))

[State 130]
type = VelAdd
triggerall = AnimElemTime(1) > 0
trigger1 = Var(12) != 20
trigger1 = var(6) = [0,1]
trigger1 = Time = [10,36]
x = ifelse(Vel X > 0, -.223, .223)

[State 130]
type = VelSet
triggerall = Var(12) = 20
trigger1 = Time = 0
x = ifelse(!var(6), 13.5, ifelse(var(6) = 1, -13.5, ifelse(var(6) = 2, 10, -10)))
y = 0

[State 130]
type = VelAdd
triggerall = Var(12) = 20
;trigger1 = Var(6) = [2,3]
trigger1 = AnimElemTime(1) > 0
x = ifelse(Vel X > 0, -.28, .28)

[State 130]
type = null;VelAdd
triggerall = Var(12) = 20
trigger1 = Var(6) = [0,1]
trigger1 = AnimElemTime(1) > 0
x = ifelse(Vel X > 0, -.28, .28)

[State 300]
type = PlaySnd
trigger1 = var(12) = 20
trigger1 = AnimElem = 1
value = 5,10

[State 300]
type = PlaySnd
trigger1 = var(12) = 20
trigger1 = time = 2
value = 100,3
channel = 0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 130]
type = PlayerPush
trigger1 = 1
value = 0

[State 130]
type = Turn
trigger1 = P2Dist X < -5

[State 130]
type = VelSet
triggerall = Var(12) != 20
Trigger1 = (Time = 36 && var(6) = [0,1]) || (Time = 25 && var(6) = [2,3])
x = 0

[State 120]
type = ChangeState
Trigger1 = Var(12) != 20
Trigger1 = (Time = 39 && var(6) = [0,1]) || (Time = 28 && var(6) = [2,3])
Trigger2 = Var(12) = 20
Trigger2 = (Time = 32 && var(6) = [0,1]) || (Time = 22 && var(6) = [2,3])
Trigger3 = frontedgedist <= 1 && animelemtime(1) > 0
Trigger4 = backedgedist <= 1 && animelemtime(1) > 0
value = 1605

;---------------------------------------------------------------------------
;阿修羅閃空（停止）
[Statedef 1605]
type = S
movetype = A
physics = S
anim = ifelse(Var(12) = 20,1606,1605)
juggle = 0
velset = 0,0
ctrl = 0

[State 1020]
type = AfterImage
triggerall = Var(12) != 20
trigger1 = AnimTime = -1
time = 0
;PalBright   =  30, 30,  0
;PalContrast =  70, 70, 20
;PalAdd      = -10,-10,-10
;PalMul      = .85,.85,.50
;Trans = Add
;TimeGap  = 3
FrameGap = 3
length = 11

[State 1020]
type = AfterImage
triggerall = Var(12) = 20
trigger1 = Time = 0
time = 0
;PalBright   =  30, 30,  0
;PalContrast =  70, 70, 20
;PalAdd      = -10,-10,-10
;PalMul      = .85,.85,.50
;Trans = Add
;TimeGap  = 3
FrameGap = 3
length = 11

[State 52]
type = PlaySnd
triggerall = Var(12) != 20
trigger1 = Time = 0
value = 4, 0

[State 120]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;百鬼襲
[Statedef 1700]
type = A
physics = S
movetype = A
anim = 1700
ctrl = 0
velset = 0,0
poweradd = 70 ;01

[State 1000]
type = Width
trigger1 = 1
edge = ceil(25*const(size.xscale)),0

[State 1100]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse(Command = "hyakki1", 0, ifelse(Command = "hyakki2", 1, 2))

[State 1100]
type = StateTypeSet
trigger1 = AnimElem = 2
StateType = A
physics = N

[State 1300]
type = Velset
trigger1 = animelem = 1
x = 2+(var(6)*2)
y = -9

[State 1100]
type = Veladd
trigger1 = animelemtime(2) > 0
y = .55

[State 1300]
type = changestate
trigger1 = vel y > -2.5 && (command = "x" || command = "y" || command = "z")
value = 1719

[State 1300]
type = changestate
trigger1 =  vel y > -2.5 && (command = "a" || command = "b")
value = 1710

[State 1300]
type = changestate
trigger1 = vel y > -2.5 && (command = "c")
value = 1715

[State 1100]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1701

;---------------------------------------------------------------------------
;百鬼豪斬
[Statedef 1701]
type = C
movetype = A
physics = N
juggle = 8
anim = 1701+Var(6)
ctrl = 0

[State 1000]
type = Width
trigger1 = 1
edge = ceil(25*const(size.xscale)),0

[State 1301]
type = playsnd
trigger1 = animelem = 2
value = 0,1

[State 1301]
type = playsnd
trigger1 = animelem = 1
value = 100,3
channel = 0

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 220]
type = VelSet
trigger1 = Time = 0
y = 0

[State 220]
type = VelSet
trigger1 = AnimElem = 3
x = 0

[State 220]
type = VelMul
trigger1 = 1
x = 0.92

[State 440, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = C, SA
hitflag = MAF
guardflag = L
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 70 ;87 ,8e
pausetime = 9,9
sparkno = S4050
guard.sparkno = S7600
sparkxy = -10, -9
hitsound = S2,2
guardsound = S3, 1
ground.type = Low
air.type = High
ground.slidetime = 14
ground.hittime  = 14
guard.ctrltime = 14
ground.velocity = -4,-4
guard.velocity = -10*const(size.xscale)
air.velocity = -4,-4
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -14*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 104,42 ;05 ,03
givepower = 62,31 ;03,
persistent = 0
nochainID = var(8)
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0

[State 130]
type = statetypeset
trigger1 = animelemtime(3) >= 0
movetype = I

[State 1305]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;百鬼豪砕(投げモーション)
[Statedef 1719]
type = A
movetype = A
physics = N
juggle = 8
anim = 1719
ctrl = 0

[State 1000]
type = Width
trigger1 = 1
edge = ceil(15*const(size.xscale)),0

[State 1100]
type = Veladd
trigger1 = 1
y = .53

[State 1301]
type = hitdef
triggerall = numenemy
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
trigger1 = AnimElem = 1
trigger1 = command = "holdfwd" || command = "holdback"
attr = A,ST
hitflag = MA-
priority = 4, Miss
sparkno = -1
sprpriority = 1
guard.dist = 0
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
numhits = 0
p1facing = 1
p2facing = 1
p1stateno = ifelse(P2statetype = A,1725,1720)
p2stateno = 1722

[State 1305]
type = changestate
trigger1 = animtime = 0
value = 1705

;---------------------------------------------------------------------------
;百鬼豪衝
[Statedef 1705]
type = A
movetype = A
physics = N
juggle = 8
anim = 1705
ctrl = 0

[State 1100]
type = Veladd
trigger1 = 1
y = .53

[State 1000]
type = Width
trigger1 = AnimElem = 1
edge = ceil(15*const(size.xscale)),0

[State 1000]
type = Width
trigger1 = AnimElem = 2
edge = ceil(33*const(size.xscale)),0

[State 1301]
type = playsnd
trigger1 = animelemtime(2) = 1
value = 0,1

[State 1301]
type = playsnd
trigger1 = animelemtime(2) = 0
value = 100,3
channel = 0

[State 620, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = 77 ;86,8e
pausetime = 9,10
guard.pausetime = 10,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -10, -38
hitsound = S1, 2
guardsound = S3, 1
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
guard.ctrltime = 17
ground.velocity = -1.5,10 ;-4,-5.5;
guard.velocity = -11*const(size.xscale)
air.velocity =  -7,8 ;-4,-5.5;
airguard.velocity = -5.8,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -12*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 104,42; z,01+05,01+02
givepower = 62,31 ;03,
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
yaccel = .5

[State 1100]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1706

;---------------------------------------------------------------------------
;百鬼豪衝（着地）
[Statedef 1706]
type    = S
physics = S
ctrl = 0
anim = 1706
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52]
type = PlaySnd
trigger1 = Time = 0
value = 4, 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;百鬼豪刃
[Statedef 1710]
type = A
physics = N
movetype = A
anim = 1710
velset = .12*vel x , .12*vel y
ctrl = 0
juggle = 8

[State 1000]
type = Width
trigger1 = 1
edge = ceil(20*const(size.xscale)),0

[State 1301]
type = playsnd
trigger1 = animelemtime(2) = 1
value = 0,2

[State 1301]
type = playsnd
trigger1 = animelemtime(2) = 0
value = 100,3
channel = 0

[State 1302]
type = velset
trigger1 = animelemtime(2) > 0
x = 5.8
y = 6.8

[State 1302]
type = hitdef
trigger1 = animelem = 2
attr = A,SA
damage = 84,8 ;85 ,8e
animtype = Hard
air.animtype = up
guardflag = HA
hitflag = MAF
priority = 4,Hit
pausetime = 9,11
sparkno =  S4050
guard.sparkno = S7600
sparkxy = -10,-7
hitsound = s2,2
guardsound = s3,1
ground.type = High
ground.slidetime = 14
ground.hittime = 14
guard.ctrltime = 13
airguard.ctrltime = 16
ground.velocity = -5.1*const(size.xscale)
guard.velocity = -5.33*const(size.xscale)
air.type = Low
air.velocity = -4.7,-5.5
airguard.velocity = -5.8,-1
airground.cornerpush.veloff = 0
getpower = 104,42; z,01+05,01+02
givepower = 62,31 ;03,
envshake.time = 9
envshake.ampl = 2
air.fall = 1
fall.recover = 0
air.recover = 0
yaccel = .5
nochainID = var(8)
persistent = 0

[State 1302, End]
type = changestate
trigger1 = pos y >= 0 && vel y > 0
value = 1711
ctrl = 1

;---------------------------------------------------------------------------
;百鬼豪刃(着地)
[Statedef 1711]
type    = S
movetype = I
physics = S
velset = 0,0
anim = 0

[State 220]
type = PosSet
trigger1 = time = 0
y = 0

[State 210, 7]
type = ChangeState
trigger1 = time = 1
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;百鬼豪尖
[Statedef 1715]
type = A
movetype = A
physics = N
juggle = 8
anim = 1715
ctrl = 0

[State 1303]
type = gravity
trigger1 = 1

[State 1000]
type = Width
trigger1 = 1
edge = 20,0

[State 1303]
type = playsnd
trigger1 = animelemtime(2) = 0
value = 100,0
channel = 0

[State 620, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = 84,8 ;85 ,8e
pausetime = 9,9
sparkno = S4050
guard.sparkno = S7600
sparkxy = -10, -63
hitsound = S2, 2
guardsound = S3, 1
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -4.7,-5.5;-1.5,10
guard.velocity = -11*const(size.xscale)
air.velocity =  -4.7,-5.5;-7,10
airguard.velocity = -5.8,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -12*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 104,42; z,01+05,01+02
givepower = 62,31 ;03,
nochainID = var(8)
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
yaccel = .5

[State 1303]
type = changestate
trigger1 = pos y >= 8 && vel y > 0
value = 1716

;---------------------------------------------------------------------------
;百鬼豪尖（着地）
[Statedef 1716]
type = C
movetype = I
anim = 1716
physics = C
ctrl = 0

[State 1304]
type = posset
trigger1 = Time = 0
y = 0

[State 220]
type = VelSet
trigger1 = Time = 0
y = 0

[State 220]
type = VelSet
trigger1 = AnimElem = 3
x = 0

[State 220]
type = VelMul
trigger1 = 1
x = 0.92

[State 1303]
type=  playsnd
trigger1 = time = 0
value = 4,5

[State 1304]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;百鬼豪砕(投げた側)
[Statedef 1720]
type    = S
movetype= A
physics = N
velset = 0,0
sprpriority = 1
poweradd = 56 ;08

[State 901]
type = TargetState
Trigger1 = time = 0
value = 1721

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 1720

[State 810]
type = Playerpush
trigger1 = 1
value = 0

[State 1200, 9]
type = Width
trigger1 = animelemtime(1) >= 0 && animelemtime(2) < 0
edge = 20*const(size.xscale),0

[State 1200, 9]
type = Width
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
edge = 50*const(size.xscale),0

[State 1200, 9]
type = Width
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
edge = 80*const(size.xscale),0

[State 1200, 9]
type = Width
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
edge = 100*const(size.xscale),0

[State 1200, 9]
type = Width
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
edge = 30*const(size.xscale),0

[State 1200, 9]
type = Width
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
edge = 60*const(size.xscale),0

[State 1200, 9]
type = Width
trigger1 = animelemtime(7) >= 1 && animelemtime(7) < 2
edge = 90*const(size.xscale),0

[State 1200, 9]
type = Width
trigger1 = animelemtime(7) >= 2 && animelemtime(7) < 3
edge = 120*const(size.xscale),0

[State 810]
type = PlaySnd
trigger1 = animelem = 7
value = 100,4
channel = 0

[State 810]
type = playsnd
trigger1 = animelem = 1
value = 5,5

[State 20]
type = posset
trigger1 = time = 0
y = target,const(size.head.pos.y)

[State 20]
type = posset
trigger1 = animelemtime(5) = 0
y = 0

[State 20]
type = posadd
trigger1 = animelemtime(5) = 0
x = 67*const(size.xscale)

[State 810]
type = TargetBind
trigger1 = AnimElem = 1
pos = 0, -target,const(size.head.pos.y)

[State 810]
type = TargetBind
trigger1 = AnimElem = 2
pos = 0, -target,const(size.head.pos.y)

[State 810]
type = TargetBind
trigger1 = AnimElem = 3
pos = 0, -target,const(size.head.pos.y)

[State 810]
type = TargetBind
trigger1 = AnimElem = 4
pos = 0, -target,const(size.head.pos.y)

[State 810]
type = TargetBind
trigger1 = AnimElem = 5
pos = ceil(-34*const(size.xscale)), ceil(-68*const(size.yscale))

[State 810]
type = TargetBind
trigger1 = AnimElem = 6
pos = ceil(18*const(size.xscale)), ceil(-81*const(size.yscale))

[State 810]
type = TargetBind
trigger1 = AnimElemTime(7) = 0
pos = ceil(38*const(size.xscale)), ceil(-79*const(size.yscale))

[State 811]
type = TargetLifeadd
trigger1 = AnimElemTime(7) = 0
value = -153 ;7a
persistent = 0

[State 901]
type = TargetPoweradd
trigger1 = AnimElemTime(7) = 0
value = 62
persistent = 0

[State 810]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;百鬼豪砕(投げられた側)1
[Statedef 1721]
type    = S
movetype= H
physics = N
ctrl = 0
SprPriority = 0

[State 811]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1721

[State 5050, 3]
type = VelAdd
trigger1 = AnimElemTime(7) >= 1
y = .52

[State 5050, 3]
type = VelSet
trigger1 = AnimElem = 7
x = -6
y = -6.5

[State 5050, 6]
type = SelfState
triggerall = AnimElemTime(7) >= 1
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10
value = 5100

;---------------------------------------------------------------------------
;百鬼豪砕(投げられた側)2
[Statedef 1722]
type    = S
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 1205]
type = selfstate
trigger1 = Time > 7
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;百鬼豪砕(空中)
[Statedef 1725]
type    = A
movetype = A
physics = N
velset = 0,0
poweradd = 56 ;08

[State 3001]
type = Width
trigger1 = 1
edge = ceil(25*const(size.xscale)),0

[State 901]
type = TargetState
trigger1 = Time = 0
value = 1730

[State 820]
type = ChangeAnim
trigger1 = Time = 0
value = 1725
persistent = 0

[State 1735]
type = PosFreeze
trigger1 = AnimElemTime(2) < 2

[State 1100]
type = VelSet
trigger1 = AnimElemTime(3) = 3
x = 1
y = -1.5

[State 1100]
type = Veladd
trigger1 = AnimElemTime(3) > 3
y = .53

[State 620]
type = PlaySnd
trigger1 = AnimElem = 1
value = 5,5

[State 901,1]
type = BindToTarget
trigger1 = AnimElem = 1
pos = ceil(-5*const(size.xscale)),ceil(10*const(size.yscale)),Head
time = -1

[State 901,1]
type = targetBind
trigger1 = AnimElem = 2
pos = ceil(-28*const(size.xscale)), ceil(-22*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = AnimElem = 3
pos = ceil(-33*const(size.xscale)), ceil(-57*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = AnimElem = 4
pos = ceil(19*const(size.xscale)), ceil(-75*const(size.yscale))
postype = P1
time = -1

[State 1100]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1726

;---------------------------------------------------------------------------
;百鬼豪砕（叩きつけ）
[Statedef 1726]
type    = S
movetype = A
physics = N
velset = 0,0
anim = 1726

[State 901]
type = TargetState
trigger1 = Time = 0
value = 1731

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000]
type = Explod
trigger1 = AnimElem = 1
Anim = 4050
pos = 29, -29
postype = p1
ownpal = 1
sprpriority = 5
;pausemovetime = -1
supermovetime = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 1
pos = ceil(37*const(size.xscale)),ceil(-16*const(size.xscale))
postype = P1
time = 20

[State 620]
type = PlaySnd
trigger1 = time = 0
value = 2,2

[State 620]
type = PlaySnd
trigger1 = time = 0
value = 100,3

[State 3001]
type = HitAdd
trigger1 = AnimElem = 1
value = 1

[State 901]
type = TargetLifeAdd
trigger1 = AnimElem = 1
value = -153

[State 901]
type = TargetPowerAdd
trigger1 = AnimElem = 1
value = 62

[State 903]
type = EnvShake
trigger1 = AnimElem = 1
time = 20
ampl = 5

[State 901]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;百鬼豪砕（相手）
[Statedef 1730]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 1201]
type = screenbound
trigger1 = 1
value = 1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 1730

[State 3001]
type = sprpriority
trigger1 = AnimElem = 4
value = 2

;---------------------------------------------------------------------------
;百鬼豪砕（相手）2
[Statedef 1731]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = 2

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 1731

[State 903]
type = VelSet
trigger1 = AnimElemTime(2) = 1
x = -4.2
y = -6

[State 903]
type = veladd
trigger1 = AnimElemTime(2) >= 2
y = .505

[State 903]
type = null;EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10

[State 903, 2]
type = SelfState
trigger1 = time >= 25 ;AnimElemTime(2) > 30
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; 灼熱 stand
[Statedef 2000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Invisible

[State 5000, 6]
type = ChangeState
trigger1 = alive = 0
value = 2020

[State 5001, 6]
type = SelfState
trigger1 = time >= 120
value = 5100

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = A

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 2001 ;HITG_SLIDE

[State 5000, 7]
type = SelfState
trigger1 = HitShakeOver
value = 5030

;---------------------------------------------------------------------------
; 
[Statedef 2001]
type    = S
movetype= H
physics = S

[State 190, 2]
type = AssertSpecial
trigger1 = !HitOver
flag = Invisible

[State 5000, 6]
type = ChangeState
trigger1 = alive = 0
value = 2020

[State 5001, 6]
type = SelfState
trigger1 = time >= 120
value = 5100

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 灼熱 crouch
[Statedef 2010]
type    = C
movetype= H
physics = N
velset = 0,0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Invisible

[State 5000, 6]
type = ChangeState
trigger1 = alive = 0
value = 2020

[State 5001, 6]
type = SelfState
trigger1 = time >= 120
value = 5100

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
triggerall = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 2011 ;HITC_SLIDE

[State 5010, 7]
type = SelfState
trigger1 = HitShakeOver
value = 5030

;---------------------------------------------------------------------------
; 
[Statedef 2011]
type    = C
movetype= H
physics = C

[State 190, 2]
type = AssertSpecial
trigger1 = !HitOver
flag = Invisible

[State 5000, 6]
type = ChangeState
trigger1 = alive = 0
value = 2020

[State 5001, 6]
type = SelfState
trigger1 = time >= 120
value = 5100

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011, 6]
type = SelfState
trigger1 = HitOver
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; 灼熱 air
[Statedef 2020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Invisible

[State 5001, 6]
type = PosSet
trigger1 = time >= 120
y = 0

[State 5001, 6]
type = SelfState
trigger1 = time >= 120
value = 5100

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 2021

;---------------------------------------------------------------------------
;
[Statedef 2021]
type    = A
movetype= H
physics = N
ctrl = 0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Invisible

[State 5001, 6]
type = PosSet
trigger1 = time >= 120
y = 0

[State 5001, 6]
type = SelfState
trigger1 = time >= 120
value = 5100

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 4]
type = SelfState
;triggerall = HitFall
triggerall = time > 5  ;HitOver
trigger1 = Vel Y > 0    ;Hit ground
trigger1 = Pos Y >= 0  ;
value = 5100 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 2050]
type    = A
movetype = H
physics = N

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 5040, 1]
type = SelfState
trigger1 = time = 0
value = 5040

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;滅殺豪波動
[Statedef 3000]
type    = S
movetype = A
physics = S
juggle = 0
ctrl = 0
anim = 3000
velset = 0,0
poweradd = -3000

[State 1000]
type = Width
trigger1 = 1
edge = (50*const(size.xscale)), 0

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 170, 1]
type = NotHitBy
trigger1 = AnimElemTime(9) <= 1
value = SCA
time = 1

[State 110]
type = PlaySnd
trigger1 = time = 2
value = 210,0

[State 300]
type = SuperPause
trigger1 = Time = 2
time = 14
movetime = 14
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 300]
type = Helper
trigger1 = Time = 2
id = 8000
name = "Super"
pos = 0,ceil(-50*const(size.yscale))
postype = P1
stateno = 8000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 1020]
type = AfterImage
trigger1 = Time = 2
time = 40
palpostbright = 0,0,0
PalBright   =  1,1,1
PalContrast =  136, 192, 192
PalAdd      = 0,0,0
PalMul      = .75,.75,.75
;Trans = Add
TimeGap  = 2
FrameGap = 3
length = 10

[State 1000]
type = PlaySnd
trigger1 = AnimElem = 9
value = 150,0
channel = 1

[State 1000]
type = PlaySnd
trigger1 = AnimElemTime(9) = 1
value = 100, 1
channel = 0

[State -3]
type = Helper
trigger1 = AnimElem = 9
id = 6700
name = "s_hadouken"
pos = ceil(93*const(size.xscale)),ceil(-56*const(size.yscale))
postype = P1
stateno = 6700
helpertype = normal
keyctrl = 0
ownpal = 1
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 100]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;滅殺豪波動(EX)
[Statedef 3020]
type    = S
movetype = A
physics = S
juggle = 0
ctrl = 0
velset = 0,0

[State 110]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse((Command = "m_hadou2" && Power >= 2000) || (Command = "m_hadou3" && (Power >= 2000 && Power < 3000)), 1, ifelse(Command = "m_hadou3" && Power >= 3000, 2, 0))

[State 110]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(6) = random%3

[State 110]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = numtarget
var(6) = ifelse((target,life>=430),2,ifelse((target,life>=320),1,0))

[State 110]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = !numtarget
var(6) = 0

[State 110]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(6) = ifelse((var(6)=1 && Power >= 2000) || (var(6)=2 && (Power >= 2000 && Power < 3000)), 1, ifelse(var(6)=2 && Power >= 3000, 2, 0))

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(6), 3020, ifelse(var(6) = 1, 3030, 3040))

[State 1000]
type = Width
trigger1 = 1
edge = ceil(50*const(size.xscale)), 0

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 170, 1]
type = NotHitBy
trigger1 = Time = 2
value = SCA
time = ifelse(!var(6),38,ifelse(var(6)=1,44,45))

[State 110]
type = PlaySnd
trigger1 = time = 2
value = 210,20

[State 300]
type = SuperPause
trigger1 = Time = 2
time = ifelse(!var(6),31,ifelse(var(6)=1,37,38))
movetime = ifelse(!var(6),31,ifelse(var(6)=1,37,38))
anim = -1
sound = -1
pos = 0,0
darken = 1
p2defmul = 1
poweradd = 0
unhittable = 0

[State 300]
type = Helper
trigger1 = Time = 2
id = 8002
name = "Super"
pos = 0,0
postype = P1
stateno = 8002
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 860, 4]
type = PowerAdd
trigger1 = time = 0
value = ifelse(!var(6), -1000, ifelse(var(6) = 1, -2000, -3000))

[State 1020]
type = AfterImage
trigger1 = Time = 2
time = 60
palpostbright = 0,0,0
PalBright   =  1,1,1
PalContrast =  136, 192, 192
PalAdd      = 0,0,0
PalMul      = .75,.75,.75
;Trans = Add
;TimeGap  = 2
FrameGap = 5
length = 19

[State 1000]
type = PlaySnd
trigger1 = !var(6)
trigger1 = AnimElem = 12
trigger2 = var(6) = 1
trigger2 = AnimElem = 14
trigger3 = var(6) = 2
trigger3 = AnimElem = 15
value = 150,0
channel = 1

[State 1000]
type = PlaySnd
trigger1 = !var(6)
trigger1 = AnimElemtime(12) = 1
trigger2 = var(6) = 1
trigger2 = AnimElemtime(14) = 1
trigger3 = var(6) = 2
trigger3 = AnimElemtime(15) = 1
value = 100, 1
channel = 0

[State -3]
type = Helper
trigger1 = !var(6)
trigger1 = AnimElem = 12
trigger2 = var(6) = 1
trigger2 = AnimElem = 14
trigger3 = var(6) = 2
trigger3 = AnimElem = 15
id = 6700
name = "s_hadouken"
pos = ceil(93*const(size.xscale)),ceil(-56*const(size.yscale))
postype = P1
stateno = 6700
helpertype = normal
keyctrl = 0
ownpal = 1
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 100]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;滅殺豪波動（飛び道具）
[Statedef 6700]
type    = S
movetype = A
physics = N
ctrl = 0
anim = 6700
velset = 0,0
sprpriority = 4

[State 900]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(6) = parent,var(6)

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(12) = parent,var(12)

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(52) = parent,var(52)

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(2) = 1

[State 300]
type = varadd
trigger1 = root,ProjContacttime(1500) = 2
ignorehitpause = 1
Persistent = 1
var(2) = 1

[State 1100]
type = VelSet
trigger1 = time = 1
x = 6

[State 100]
type = Projectile
triggerall = var(12) != 20
trigger1 = time = 1
projanim = 6050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projremovetime = -1
projstagebound = 50
projedgebound = 50
offset = 0, 0
projpriority = 1
projsprpriority = 4
projhits = 6
projmisstime = 1
ProjID = 1500
velocity = vel X, vel Y
attr = S, HP
damage = ceil(87*var(52)/3),ceil(19*var(52)/3) ;80-6f-61-53-45 05,8d-8a-86-83-80
animtype = Heavy
hitflag = MAF
guardflag = M
pausetime = 7,13 ;3,4
sparkno = -1
guard.sparkno = -1
sparkxy = 0, 0
hitsound = -1;S1,2
guardsound = -1;S3,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.ctrltime = 18
ground.velocity = -5,-6.67
guard.velocity = -8
air.velocity = -5, -6.67
airguard.velocity = -6.3,-1
air.juggle = 8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
getpower = 0,0
givepower = 0,0
forcestand = 1
yaccel = .48
nochainID = root,var(8)
persistent = 0

[State 100]
type = Projectile
triggerall = var(12) = 20
triggerall = var(6) != 2
trigger1 = time = 1
projanim = 6050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
projmisstime = 0
projhits = 4+var(6)*2
ProjID = 1500
projstagebound = 50
projedgebound = 50
velocity = vel X, vel Y
attr = S, SP
damage = ifelse(!Var(6),62,ifelse(Var(6)=1,62,61)),10
;z, 84-75-67(270) 85-7e-76-71-6d-5a(374) 7c-71-69-62-5b-57-4f-4A(486)
;71-62 5e 64
animtype = Heavy
hitflag = MAF
guardflag = M
pausetime = 4,10
sparkno = -1
guard.sparkno = -1;S7600
sparkxy = 0, 0
hitsound = -1;S1,2
guardsound = -1;S3,0
ground.type = High
ground.slidetime = 16
ground.hittime = 16
air.hittime = 19
guard.ctrltime = 15
ground.velocity = -4, -5.5
guard.velocity = -11
air.velocity = -4, -5.5
airguard.velocity = -5.7,-1
air.juggle = 8
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
;envshake.time = 8
;envshake.ampl = 2
getpower = 0,0
givepower = 62,31 ;03,
forcestand = 1
yaccel = .5
nochainID = root,var(8)
Persistent = 0


[State 100]
type = Projectile
triggerall = var(12) = 20
triggerall = var(6) = 2
trigger1 = time = 1
projanim = 6050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
projmisstime = 0
projhits = 4+var(6)*2
ProjID = 1500
projstagebound = 50
projedgebound = 50
velocity = vel X, vel Y
attr = S, SP
damage = ifelse(!Var(6),65,ifelse(Var(6)=1,62,61)),10
;z, 84-75-67(270) 85-7e-76-71-6d-5a(374) 7c-71-69-62-5b-57-4f-4A(486)
;71-62 5e 64
animtype = Heavy
hitflag = MAF
guardflag = M
pausetime = 4,10
sparkno = -1
guard.sparkno = -1;S7600
sparkxy = 0, 0
hitsound = -1;S1,2
guardsound = -1;S3,0
ground.type = High
ground.slidetime = 16
ground.hittime = 16
air.hittime = 19
guard.ctrltime = 15
ground.velocity = -4, -5.5
guard.velocity = -11
air.velocity = -4, -5.5
airguard.velocity = -5.7,-1
air.juggle = 8
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
;envshake.time = 8
;envshake.ampl = 2
getpower = 0,0
givepower = 62,31 ;03,
forcestand = 1
palfx.color = 0
palfx.add = 120,-54,0
palfx.mul = 90,64,0
palfx.sinadd = -70,-70,0,5
palfx.time = ifelse(p2statetype = A ,45,36)
yaccel = .5
nochainID = root,var(8)
Persistent = 0

[State 300]
type = Explod
trigger1 = root,projcontacttime(1500) = 1
trigger1 = var(2) = [1,6]
id = 4021
name = "projhit_s"
pos = P2bodydist X ,0
postype = P1
anim = 4020
ownpal = 1
random = 14,20
ontop = 1
ignorehitpause = 1
pausemovetime = 99999999
supermovetime = 99999999
Persistent = 1

[State 300]
type = VarSet
trigger1 = var(1) = ifelse(var(12)=20,5,8)
ignorehitpause = 1
var(1) = 0

[State 300]
type = VarSet
trigger1 = root,ProjContacttime(1500) = 1
ignorehitpause = 1
var(1) = 1

[State 300]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 4110]
type = PosFreeze
triggerall = time > 1
trigger1 = var(1)
trigger2 = root,ProjContact1500 = 1
trigger2 = P2dist X < -8
value = 1
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim
triggerall = var(12) != 20
trigger1 = var(1)
trigger1 = animelem = 1
value = 6710
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim
triggerall = var(12) != 20
trigger1 = var(1)
trigger1 = animelem = 2
value = 6711
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim
triggerall = var(12) != 20
trigger1 = var(1)
trigger1 = animelem = 3
value = 6712
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim
triggerall = var(12) != 20
trigger1 = var(1)
trigger1 = animelem = 4
value = 6713
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim 
triggerall = var(12) != 20
trigger1 = anim = [6710,6713]
trigger1 = animtime = 0
value = 6700
elem = ifelse(anim=6710,1,ifelse(anim=6711,2,ifelse(anim=6712,3,4)))
ignorehitpause = 1

[State 4110]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -55 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(1500)
value = 6705

;---------------------------------------------------------------------------
;滅殺豪波動（飛び道具）（消滅）
[Statedef 6705]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 6705

[State 900]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 300]
type = varSet
trigger1 = time = 0
var(2) = 0

[State 410]
type = null;PosAdd
trigger1 = time = 1
trigger1 = P2dist X < -22
x = P2dist X + 22

[State 410]
type = DestroySelf
trigger1 = animtime = 0

;------------------------------------------------------------------------------------------
;滅殺豪昇龍
[Statedef 3100]
type    = S
movetype = A
physics = S
anim = 3100
juggle = 8
ctrl = 0
velset = 0,0

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 100]
type = Width
trigger1 = 1
edge = ceil(15*const(size.xscale)),0 

[State 170, 1]
type = NotHitBy
trigger1 = AnimElemTime(10) < 0
value = SCA
time = 1

[State 300]
type = SuperPause
trigger1 = Time = 0
time = 16
movetime = 16
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 300]
type = Helper
trigger1 = Time = 1
id = 8000
name = "Super"
pos = ceil(14*const(size.xscale)),ceil(-49*const(size.yscale))
postype = P1
stateno = 8000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 3105]
type = AssertSpecial
trigger1 = movecontact
trigger1 = alive = 1
flag = nokoslow
ignorehitpause = 1

[State 860, 4]
type = PowerAdd
trigger1 = time = 0
value = -3000

[State 1020]
type = AfterImage
trigger1 = Time = 0
trigger2 = Numhelper(8011)
trigger2 = helper(8011),time = 88
time = 999
palpostbright = 0,0,0
PalBright   =  1,1,1
PalContrast =  136, 192, 192
PalAdd      = 0,0,0
PalMul      = .75,.75,.75
length = 15
framegap = 4

;Trans = Add
;TimeGap  = 2
;FrameGap = 3
;length = 11    

[State 200]
type = AfterImage
trigger1 = Numhelper(8011)
trigger1 = helper(8011),time = 1
time = 0
pausemovetime = 999999
ignorehitpause = 1
trans = none
length = 15

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 11
trigger2 = winko
movetype = I

[State 110]
type = PlaySnd
trigger1 = time = 1
value = 210,0

[State 110]
type = PlaySnd
trigger1 = AnimElem = 7
value = 100,3
channel = 0

[State 110]
type = StateTypeSet
trigger1 = AnimElemTime(3) >= 1
trigger2 = AnimElemTime(9) >= 1
StateType = A
physics = N

[State 110]
type = StateTypeSet
trigger1 = AnimElem = 6
StateType = S
physics = S

[State 110]
type = VelSet
trigger1 = AnimElemTime(3) = 1
x = 5
y = -3.8

[State 110]
type = VelSet
trigger1 = AnimElem = 6
x = 0
y = 0

[State 220]
type = PosSet
trigger1 = AnimElem = 6
y = 0

[State 110]
type = VelSet
trigger1 = AnimElemTime(9) = 1
x = 17.1
y = -13

[State 110]
type = VelMul
trigger1 = AnimElemTime(9) >= 1
x = .9

[State 110]
type = VelSet
trigger1 = AnimElem = 10
x = 0

[State 110]
type = Veladd
trigger1 = AnimElemTime(3) >= 1 && AnimElemTime(6) < 0
trigger2 = AnimElemTime(9) >= 1
y = .525

[State 110]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage = ceil(111*var(52)/3),ceil(28*var(52)/3) ; 80-70-5f-4f-3f,8c-88-84-80
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,9
sparkno = S4050
guard.sparkno = S4050
sparkxy = -5, -55
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 28
ground.hittime  = 28
guard.ctrltime = 28
ground.velocity = -4,0
guard.velocity = -10
air.velocity = -4,-6
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0;-7.5
guard.cornerpush.veloff = -8
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 12
;envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .4
persistent = 0
getpower = 0,0
givepower = 0,0

[State 110]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage = ceil(111*var(52)/3),ceil(28*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,9
sparkno = S4050
guard.sparkno = S4050
sparkxy = 5, -91
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 28
ground.hittime  = 28
guard.ctrltime = 28
ground.velocity = -4,0
guard.velocity = -10
air.velocity = -4,-6
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0;-7.5
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 12
;envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .4
persistent = 0
getpower = 0,0
givepower = 0,0

[State 110]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage = ceil(118*var(52)/3),ceil(28*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,9
sparkno = S4050
guard.sparkno = S4050
sparkxy = -3, -55
hitsound = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 28
ground.hittime  = 28
guard.ctrltime = 28
ground.velocity = -4,0
guard.velocity = -10
air.velocity = -4,-6
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0;-7.5
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 12
;envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .4
persistent = 0
getpower = 0,0
givepower = 0,0

[State 110]
type = HitDef
trigger1 = AnimElem = 8
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage = ceil(111*var(52)/3),ceil(28*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6, 9
sparkno = S4050
guard.sparkno = S4050
sparkxy = -5, -55
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 28
ground.hittime  = 28
guard.ctrltime = 28
ground.velocity = -4,0
guard.velocity = -10
air.velocity = -4,-6
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0;-7.5
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 15
;envshake.ampl = 5
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .4
persistent = 0
getpower = 0,0
givepower = 0,0

[State 110]
type = HitDef
trigger1 = AnimElem = 9
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage = ceil(111*var(52)/3),ceil(28*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6, 9
sparkno = S4050
guard.sparkno = S4050
sparkxy = 5, -91
hitsound   = S1,2
guardsound = S3,0
ground.type = High
ground.slidetime = 28
ground.hittime  = 28
guard.ctrltime = 28
ground.velocity = -4,-6
guard.velocity = -10
air.velocity = -4,-6
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0;-7.5
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 15
;envshake.ampl = 5
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .4
persistent = 0
getpower = 0,0
givepower = 0,0
forcestand = 1

[State 110]
type = ChangeState
trigger1 = AnimElemTime(9) >= 2
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3105

;---------------------------------------------------------------------------
;滅殺豪昇龍（着地）
[Statedef 3105]
type    = S
physics = S
ctrl = 0
anim = 3105
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52]
type = PlaySnd
trigger1 = Time = 0
value = 4, 0
channel = 20

[State 200]
type = AfterImage
trigger1 = time = 0
time = 0
trans = none
length = 15
framegap = 4
palcolor = 0
palinvertall = 0
palcontrast = 110,110,190
PalMul = .75, .75, .75

[State 52, 2]
type = VarSet
trigger1 = Time = 0
trigger1 = var(8) = 1
var(8) = 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;83-7A-6f-6a 7f-75-6b-5f-5b-57 80-78-6d-65-5f-57-4e-49
;89 85 82
;---------------------------------------------------------------------------
;滅殺豪昇龍(EX)
[Statedef 3120]
type    = S
movetype = A
physics = S
juggle = 8
ctrl = 0
velset = 0,0

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 110]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse((Command = "m_syou2" && Power >= 2000) || (Command = "m_syou3" && (Power >= 2000 && Power < 3000)), 1, ifelse(Command = "m_syou3" && Power >= 3000, 2, 0))

[State 110]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(6) = random%2

[State 110]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = numtarget
var(6) = ifelse((target,life>=300),1,0)

[State 110]
type = VarSet
triggerall = var(59)
triggerall = Time = 0
trigger1 = !numtarget
trigger2 = P2statetype = A
var(6) = 0

[State 110]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(6) = ifelse((var(6)=1 && Power >= 2000) || (var(6)=2 && (Power >= 2000 && Power < 3000)), 1, ifelse(var(6)=2 && Power >= 3000, 2, 0))

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(6), 3120, ifelse(var(6) = 1, 3130, 3140))

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = ifelse(!var(6),39,ifelse(var(6)=1,45,46))

[State 3000]
type = SuperPause
trigger1 = Time = 2
time = ifelse(!var(6),31,ifelse(var(6)=1,37,38))
movetime = ifelse(!var(6),31,ifelse(var(6)=1,37,38))
anim = -1
sound = -1
pos = 0,0
darken = 1
p2defmul = 1
poweradd = 0
unhittable = 0

[State 300]
type = Helper
trigger1 = Time = 2
id = 8000
name = "Super"
pos = ceil(14*const(size.xscale)),ceil(-49*const(size.yscale))
postype = P1
stateno = 8001
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 110]
type = PlaySnd
trigger1 = time = 2
value = 210,20

[State 110]
type = PlaySnd
trigger1 = var(6) != 2
trigger1 = AnimElem = 10
trigger2 = var(6) = 2
trigger2 = AnimElem = 16
value = 100,3
channel = 0

[State 3105]
type = AssertSpecial
trigger1 = movecontact
trigger1 = alive
flag = nokoslow
ignorehitpause = 1

[State 860, 4]
type = PowerAdd
trigger1 = time = 0
value = ifelse(!var(6), -1000, ifelse(var(6) = 1, -2000, -3000))

;1,3,5,7,9,11,13,15,17
[State 1020]
type = AfterImage
trigger1 = Time = 3
time = 999
palpostbright = 0,0,0
PalBright   =  1,1,1
PalContrast =  136, 192, 192
PalAdd      = 0,0,0
PalMul      = .75,.75,.75
;Trans = Add
TimeGap  = 2
FrameGap = 3
length = 10

[State 110]
type = StateTypeSet
trigger1 = var(6)!=2 &&AnimElemTime(10) = 2
trigger2 = var(6)=2 &&AnimElemTime(16) = 2
StateType = A
physics = N

[State 300]
type = Width
trigger1 = 1
edge = ceil(20*const(size.xscale)),0

[State 110]
type = VelSet
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(4) < 0
x = 7

[State 110]
type = VelSet
trigger1 = AnimElemTime(8) >= 0 && AnimElemTime(10) < 0
x = ifelse(!var(6),6,11)

[State 110]
type = VelSet
trigger1 = var(6)=2&&(AnimElemTime(14) >= 0 && AnimElemTime(16) < 0)
x = 11.5

[State 110]
type = VelMul
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(7) < 0
trigger2 = var(6)=2&&(AnimElemTime(10) >= 0 && AnimElemTime(13) < 0)
trigger3 = var(6)=2&&AnimElemTime(16) >= 0
x = .93

[State 110]
type = VelMul
trigger1 = var(6)!=2&&AnimElemTime(10) >= 0
x = .88

[State 110]
type = VelSet
trigger1 = var(6)!=2 &&AnimElemTime(10) = 2
trigger2 = var(6)=2 &&AnimElemTime(16) = 2
y = ifelse(!var(6), -10.8, ifelse(var(6) = 1, -11.2, -12.4))

[State 110]
type = VelSet
trigger1 = var(6)!=2
trigger1 = AnimElemTime(6) = 0 || AnimElemTime(11) = 0
trigger2 = var(6)=2 && AnimElemTime(17) = 0
x = 0

[State 110]
type = Veladd
trigger1 = var(6)!=2 &&AnimElemTime(10) > 2
trigger2 = var(6)=2 &&AnimElemTime(16) > 2
y = .63

[State 105, 1]
type = statetypeset
trigger1 = var(6) != 2 && AnimElem = 12
trigger2 = var(6) = 2 && AnimElem = 18
movetype = I

[State 110]
type = HitDef
triggerall = var(6) = 1
trigger1 = AnimElem = 2
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage = 76,12
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 4,5
sparkno = S4050
guard.sparkno = S4050
sparkxy = -3, -55
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
guard.ctrltime = 16
ground.velocity = ifelse(win=1,-3.5,0),0
guard.velocity = -5*const(size.xscale)
air.velocity = -3.5,-7
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 3
envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 62,31 ;03,

[State 110]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage = ifelse(!var(6),90,ifelse(var(6)=1,74,111)) ,12
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 4,5
sparkno = S4050
guard.sparkno = S4050
sparkxy = -5, -55
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
guard.ctrltime = 16
ground.velocity = ifelse(win=1,-3.5,0),0
guard.velocity = -5*const(size.xscale)
air.velocity = -3.5,-7
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 3
envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 62,31 ;03,

[State 110]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage =  ifelse(!var(6),62,ifelse(var(6)=1,83,56)) ,12
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 4,5
sparkno = S4050
guard.sparkno = S4050
sparkxy = 5, -91
hitsound   = S1,2
guardsound = S3,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
guard.ctrltime = 16
ground.velocity = ifelse(win=1,-3.5,0),0
guard.velocity = -6*const(size.xscale)
air.velocity = -3.5,-8
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 3
envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 62,31 ;03,

[State 110]
type = HitDef
triggerall = var(6)
trigger1 = AnimElem = 8
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage = ifelse(var(6)=1,74,76) ,12
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 4,5
sparkno = S4050
guard.sparkno = S4050
sparkxy = -3, -55
hitsound = S1,2
guardsound = S3,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
guard.ctrltime = 16
ground.velocity = -4,ifelse(var(6)=1,-8.5,0)
guard.velocity = ifelse(var(6)=1, -6, -6*const(size.xscale))
air.velocity = -4,-8.5
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 3
envshake.ampl = 3
fall = ifelse(var(6)=1,1,0)
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 62,31 ;03,
forcestand = ifelse(var(6)=1,1,0)

[State 110]
type = HitDef
trigger1 = AnimElem = 9
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage = ifelse(!var(6),76,ifelse(var(6)=1,38,56)) ,12
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 4,5
sparkno = S4050
guard.sparkno = S4050
sparkxy = -5, -55
hitsound = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
guard.ctrltime = 16
ground.velocity = -4,ifelse(var(6)!=2,-8.5,0)
guard.velocity = ifelse(var(6)!=2, -6, -6*const(size.xscale))
air.velocity = -4,-8.5
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 3
envshake.ampl = 3
fall = ifelse(var(6)!=2,1,0)
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 62,31 ;03,
forcestand = ifelse(var(6)!=2,1,0)

[State 110]
type = HitDef
trigger1 = AnimElem = 10
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage = ifelse(!var(6),35,ifelse(var(6)=1,28,42))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 4,5
sparkno = S4050
guard.sparkno = S4050
sparkxy = 5, -91
hitsound = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
guard.ctrltime = 16
ground.velocity = -4,ifelse(var(6)!=2,-8.5,0)
guard.velocity = ifelse(var(6)!=2, -11, -9*const(size.xscale))
air.velocity = -4,-8.5
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 3
envshake.ampl = 3
fall = ifelse(var(6)!=2,1,0)
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 62,31 ;03,
forcestand = ifelse(var(6)!=2,1,0)

[State 110]
type = HitDef
triggerall = var(6) = 2
trigger1 = AnimElem = 14
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage = 56,12
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 4,5
sparkno = S4050
guard.sparkno = S4050
sparkxy = -3, -55
hitsound = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
guard.ctrltime = 16
ground.velocity = -4,-8.5
guard.velocity = -8
air.velocity = -4,-8.5
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 3
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 62,31 ;03,
forcestand = 1

[State 110]
type = HitDef
triggerall = var(6) = 2
trigger1 = AnimElem = 15
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage = 62,12
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 4,5
sparkno = S4050
guard.sparkno = S4050
sparkxy = -5, -55
hitsound = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
guard.ctrltime = 16
ground.velocity = -4,-8.5
guard.velocity = -8
air.velocity = -4,-8.5
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 3
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 62,31 ;03,
forcestand = 1

[State 110]
type = HitDef
triggerall = var(6) = 2
trigger1 = AnimElem = 16
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage = 35,12
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 4,5
sparkno = S4050
guard.sparkno = S4050
sparkxy = 5, -91
hitsound = S1,2
guardsound = S3,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
guard.ctrltime = 16
ground.velocity = -4,-8.5
guard.velocity = -11
air.velocity = -4,-8.5
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 3
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 62,31 ;03,
forcestand = 1

[State 110]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3105

;---------------------------------------------------------------------------
;滅殺豪昇龍（着地）
[Statedef 3125]
type    = S
physics = S
ctrl = 0
anim = ifelse(var(12),1105,3105)
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52]
type = PlaySnd
trigger1 = Time = 0
value = 4, 0
channel = 20

[State 52, 2]
type = VarSet
trigger1 = Time = 0
trigger1 = var(8) = 1
var(8) = 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;瞬獄殺
[Statedef 3200]
type = S
movetype = A
physics = N
juggle = 8
velset = 0,0
ctrl = 0
poweradd = -3000

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(var(12)=20,3220,3200)

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = ifelse(var(12)=20,53,30)

[State 3000]
type = SuperPause
trigger1 = Time = 2
time = ifelse(var(12)=20,38,14)
movetime = ifelse(var(12)=20,38,14)
anim = -1
sound = -1
pos = 0,0
darken = ifelse(var(12)=20,1,0)
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3001]
type = Helper
trigger1 =var(12) != 20
trigger1 = Time = 2
id = 8000
name = "Super"
pos = ceil(5*const(size.xscale)),ceil(-85*const(size.yscale))
postype = P1
stateno = 8000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 3001]
type = Helper
trigger1 =var(12) = 20
trigger1 = Time = 2
id = 8001
name = "Super"
pos = ceil(13*const(size.xscale)),ceil(-89*const(size.yscale))
postype = P1
stateno = 8001
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 300]
type = PlaySnd
trigger1 = Time = 2
value = 210,ifelse(var(12)=20,20,0)

[State 300]
type = PlaySnd
trigger1 = var(12) = 20
trigger1 = Time = 2
value = 100,3
channel = 0

[State 1020]
type = AfterImage
trigger1 = Time = 2
time = 999
palpostbright = 0,0,0
PalBright   =  1,1,1
PalContrast =  136, 192, 192
PalAdd      = 0,0,0
PalMul      = .75,.75,.75
;Trans = Add
;TimeGap  = 2
FrameGap = 3
length = 11    

[State 1100]
type = VelSet
trigger1 = Time = ifelse(var(12)=20,41,17)
x = 8.8

[State 300]
type = PlaySnd
trigger1 = var(12) = 20
trigger1 = AnimElem = 2
value = 5,10

[State 3200]
type = StateTypeSet
triggerall = P2movetype = H
trigger1 = Animelem = 2,>= 0
trigger1 = animelem = 3,< 0
movetype = I

[State 3200]
type = StateTypeSet
triggerall = P2movetype != H
trigger1 = Animelem = 2,>= 0
trigger1 = animelem = 3,< 0
movetype = A

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 1200, 1]
type = HitDef
triggerall = P2movetype != H
triggerall = P2StateNo != [150,155]
trigger1 = animelem = 2,>= 0
trigger1 = animelem = 3,< 0
attr = S, HT
hitflag = M-
numhits = 0
priority = 7, Miss
sparkno = -1
hitsound = -1
p1stateno = 3201
p2stateno = 3209
p1facing = 1
p2facing = 1
fall = 1
fall.recover = 0

[State 1200, 2]
type = ChangeState
Trigger1 = AnimTime = 0
Trigger2 = frontedgedist <= 1 && animelemtime(2) > 1
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;瞬獄殺（hit）
[Statedef 3201]
type    = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 3201
velset = 0,0

[State 901]
type = TargetState
trigger1 = AnimElem = 1
value = 3205

[State 300]
type = Width
trigger1 = Time = 0
edge = ceil(50*const(size.xscale)),0

[State 901,1]
type = targetBind
trigger1 = animelem = 1
pos = ceil(45*const(size.xscale)),0
postype = P1

[State 200, 2]
type = Playsnd
trigger1 = var(12) = 20
trigger1 = Time = 0
value = 5,5

[State 200, 2]
type = VarSet
trigger1 = time = 1
var(25) = target,const(data.life)

[State 9606]
type = null;Bgpalfx
trigger1 = var(12) = 10
trigger1 = Time = [11,67]
trigger2 = var(12) = 20
trigger2 = Time = [11,161]
add = 240,240,240
color = 256
time = 1

[State 310]
type = AssertSpecial
trigger1 = var(12) = 10
trigger1 = Time = [12,68]
flag = NoBarDisplay

[State 310]
type = AssertSpecial
trigger1 = var(12) = 10
trigger1 = Time = [12,68]
trigger2 = var(12) = 20
trigger2 = Time = [12,163]
flag =  NoBG
flag2 = NoFG
flag3 = timerfreeze

[State 310]
type = AssertSpecial
trigger1 = var(12) = 10
trigger1 = Time = [12,68]
trigger2 = var(12) = 20
trigger2 = Time = [12,163]
flag = GlobalNoShadow

[State 411]
type = Explod
trigger1 = var(12) = 10
trigger1 = Time = [12,68]
;trigger2 = var(12) = 20
;trigger2 = Time = [12,163]
anim = 8005
id = 8005
pos = 0,0
postype = Left
sprpriority = -10
bindtime = 1
ownpal = 1

[State 3000]
type = AfterImage
trigger1 = time = 0;12
trigger1 = var(12) = 10
trigger2 = time = 11
trigger2 = var(12) = 20
time = 0
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast =  150,50,50
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1

[State 960]
type = Playsnd
trigger1 = var(12) = 10
trigger1 = (Time = [18,60]) && Time % 3 = 0
trigger2 = var(12) = 20
trigger2 = (Time = [15,35]) && Time % 5 = 0
trigger3 = var(12) = 20
trigger3 = Time = 45 || Time = 48 || Time = 75 || Time = 80
trigger4 = var(12) = 20
trigger4 = (Time = [48,65]) && Time % 6 = 5
trigger5 = var(12) = 20
trigger5= (Time = [86,114]) && Time % 4 = 2
trigger6 = var(12) = 20
trigger6 = (Time = [118,142]) && Time % 3 = 1
trigger7 = var(12) = 20
trigger7 = (Time = [145,161]) && Time % 2 = 1
value = 200,ifelse(Var(12) = 20,1+random%4,1) ;2,2+((random%2)*3)
channel = 10

[State 960]
type = null;Playsnd
trigger1 = var(12) = 20
trigger1 = Time = 145
value = 1,2
channel = 10

[State 411]
type = Explod
trigger1 = var(12) = 10
trigger1 = (Time = [18,60]) && Time % 3 = 0
trigger2 = var(12) = 20
trigger2 = (Time = [15,35]) && Time % 5 = 0
trigger3 = var(12) = 20
trigger3 = Time = 45 || Time = 48 || Time = 75 || Time = 80
trigger4 = var(12) = 20
trigger4 = (Time = [48,65]) && Time % 6 = 5
trigger5 = var(12) = 20
trigger5= (Time = [86,114]) && Time % 4 = 2
trigger6 = var(12) = 20
trigger6 = (Time = [118,142]) && Time % 3 = 1
trigger7 = var(12) = 20
trigger7 = (Time = [145,161]) && Time % 2 = 1
anim = 4020
id = 8201
pos = 15+5*(random%12),-140+20*(random%8)
postype = P1
sprpriority = 5
bindtime = 1
ownpal = 1
;random =  60,120 ;80,80

[State 300]
type = HitAdd
triggerall = var(12) = 20
trigger1 = (Time = [15,35]) && Time % 5 = 0
trigger2 = Time = 45 || Time = 48 || Time = 75 || Time = 80
trigger3 = (Time = [48,65]) && Time % 6 = 5
trigger4= (Time = [86,114]) && Time % 4 = 2
trigger5 = (Time = [118,142]) && Time % 3 = 1
trigger6 = (Time = [145,161]) && Time % 2 = 1
value = 1

[State 310]
type = TargetLifeAdd
triggerall = var(12) = 20
trigger1 = (Time = [15,35]) && Time % 5 = 0
trigger2 = Time = 45 || Time = 48 || Time = 75 || Time = 80
trigger3 = (Time = [48,65]) && Time % 6 = 5
trigger4= (Time = [86,114]) && Time % 4 = 2
trigger5 = (Time = [118,142]) && Time % 3 = 1
trigger6 = (Time = [145,161]) && Time % 2 = 1
value = -1*ifelse(time<=80,ceil(7*var(25)/1000),ifelse(time<=114,ceil(12*var(25)/1000),ifelse(time<=142,ceil(17*var(25)/1000),floor(25*var(25)/1000))))
kill=0
absolute = 1

[State 310]
type = TargetLifeAdd
trigger1 = var(12) = 10
trigger1 = Time = 68
value = ceil(-550*var(52)/3)

[State 310]
type = TargetLifeAdd
trigger1 = var(12) = 20
trigger1 = Time = 163
value = -14

[State 180, 1]
type = TargetPowerAdd
triggerall = var(12) = 20
trigger1 = (Time = [15,35]) && Time % 5 = 0
trigger2 = Time = 45 || Time = 48 || Time = 75 || Time = 80
trigger3 = (Time = [48,65]) && Time % 6 = 5
trigger4= (Time = [86,114]) && Time % 4 = 2
trigger5 = (Time = [118,142]) && Time % 3 = 1
trigger6 = (Time = [145,161]) && Time % 2 = 1
value = 14
ignorehitpause = 1
persistent = 1

[State 310]
type = AssertSpecial
trigger1 = var(12) = 10
trigger1 = 1
flag = NoKOSlow

[State 310]
type = AssertSpecial
trigger1 = var(12) = 20
trigger1 = win
flag = NoMusic

[State 900]
type = TargetState
trigger1 = var(12) = 10
trigger1 = Time = 69
trigger2 = var(12) = 20
trigger2 = Time = 164
value = 3206

[State 200, 2]
type = ChangeState
trigger1 = var(12) = 10
trigger1 = Time = 69
trigger2 = var(12) = 20
trigger2 = Time = 164
value = 3202

;---------------------------------------------------------------------------
;瞬獄殺（hit）（相手）1
[Statedef 3205]
type    = S
movetype = H
physics = N
juggle = 0
ctrl = 0
velset = 0, 0
sprpriority = -1

[State 200, 2]
type = ChangeAnim2
trigger1 = time = 0
value = 3205

;---------------------------------------------------------------------------
;瞬獄殺（hit）（相手）2
[Statedef 3206]
type    = L
movetype = H
physics = N
juggle = 0
ctrl = 0
anim = 5110
velset = 0, 0
sprpriority = -1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3110]
type = SelfState
trigger1 = Time = 40 ;110
value = ifelse(alive, 5120, 5150)

;---------------------------------------------------------------------------
;瞬獄殺（hit）（相手）3
[Statedef 3209]
type    = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 120]
type = selfstate
trigger1 = Time > 5
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;瞬獄殺（終了）
[Statedef 3202]
type = S
ctrl = 0
anim = ifelse(facing = -1, 3206, 3202)
velset = 0,0

[State 310]
type = AssertSpecial
trigger1 = var(12) = 20
trigger1 = win
trigger1 = Time <= 56
flag = NoMusic

[State 900, 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 3830,0]
type = null;Changeanim
trigger1 = Time = 0
trigger1 = win
value = ifelse(facing = -1,3207,3203)

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State -2]
type = Helper
trigger1 = Win
trigger1 = Time = 0
ID = 8011
stateno = ifelse(var(12)=20,8012,8011)
postype = left
pos = 0,0
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
ownpal = 1

[State 120]
type = Explod
triggerall = var(12) != 20
trigger1 = Win
trigger1 = Time = 0
anim = 8015
id = 8015
pos = 0,0
postype = Left
sprpriority = -7
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[State 200, 2]
type = Playsnd
trigger1 = Win
trigger1 = Time = 0
value = 300, ifelse(var(12)=20,35,30)
channel = 10
abspan = 0

[State 3810,5]
type = null;Changestate
triggerall = anim = 3203 || anim = 3207
trigger1 = animTime = 0
value = 3203

[State 3810,5]
type = Changestate
trigger1 = animTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;瞬獄殺（終了）（KO時1）
[Statedef 3203]
type    = S
movetype = I
physics = S
ctrl = 1
anim = ifelse(facing = -1,3208,3204)

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3810,5]
type = Changestate
trigger1 = p2movetype = A
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;瞬獄殺（終了）（KO時2）
[Statedef 3204]
type    = S
physics = S
ctrl = 0
velset = 0,0

[State 184,3]
type = Assertspecial
trigger1 = Time <= 240
flag = roundnotover

[State 180,0]
type = null;Changestate
triggerall = Time = 199
triggerall = NumEnemy = 1
trigger1 = MatchOver
trigger1 = Enemy,Authorname = "G.D.T" && Name = "gouki"
;trigger2 = Enemy(2),Authorname = "G.D.T" && Name = "gouki"
value = 9500

[State 180]
type = ChangeState
trigger1 = MatchOver
trigger1 = Time = 200
value = 9530

;---------------------------------------------------------------------------
;天魔豪斬空
[Statedef 3300]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
velset = 0,0

[State 110]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse((Command = "m_hadou2" && Power >= 2000) || (Command = "m_hadou3" && (Power >= 2000 && Power < 3000)), 1, ifelse(Command = "m_hadou3" && Power >= 3000, 2, 0))

[State 110]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(6) = 0

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(6), 3300, ifelse(var(6) = 1, 3310, 3320))

[State 860, 4]
type = PowerAdd
trigger1 = time = 0
value = ifelse(!var(6), -1000, ifelse(var(6) = 1, -2000, -3000))

[State 170, 1]
type = NotHitBy
triggerall = Time >= 2
trigger1 = !var(6)
trigger1 = AnimElemtime(4) <= 0
trigger2 = var(6) = 1
trigger2 = AnimElemtime(6) <= 0
trigger3 = var(6) = 2
trigger3 = AnimElemtime(7) <= 0
value = SCA
time = 1

[State 110]
type = PlaySnd
trigger1 =  Time = 2
value = 210,20

[State 300]
type = SuperPause
trigger1 = Time = 2
time = ifelse(!var(6), 39, ifelse(var(6) = 1, 46, 56))
movetime = ifelse(!var(6), 39, ifelse(var(6) = 1, 46, 56))
anim = -1
sound = -1
pos = 0,0
darken = 1
p2defmul = 1
poweradd = 0
unhittable = 0

[State 1020]
type = AfterImage
trigger1 = Time = 2
time = 999
palpostbright = 0,0,0
PalBright   =  1,1,1
PalContrast =  136, 192, 192
PalAdd      = 0,0,0
PalMul      = .75,.75,.75
;Trans = Add
TimeGap  = 2
FrameGap = 3
length = 10

[State 300]
type = Helper
trigger1 = Time = 3
id = 8000
name = "Super"
pos = ceil(44*const(size.xscale)),ceil(-63*const(size.yscale))
postype = P1
stateno = 8001
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 999999
supermovetime = 999999

[State 920, 0]
type = Posfreeze
trigger1 = !var(6)
trigger1 = AnimElemtime(4) < 8
trigger2 = var(6) = 1
trigger2 = AnimElemtime(6) < 8
trigger3 = var(6) = 2
trigger3 = AnimElemtime(7) < 8

[State 110]
type = VelSet
trigger1 = !var(6)
trigger1 = AnimElemtime(4) = 8
trigger2 = var(6) = 1
trigger2 = AnimElemtime(6) = 8
trigger3 = var(6) = 2
trigger3 = AnimElemtime(7) = 8
x = -1
y = -11

[State 110]
type = Veladd
trigger1 = !var(6)
trigger1 = AnimElemtime(4) >= 9
trigger2 = var(6) = 1
trigger2 = AnimElemtime(6) >= 9
trigger3 = var(6) = 2
trigger3 = AnimElemtime(7) >= 9
y = .53

[State 110]
type = PlaySnd
trigger1 = !var(6)
trigger1 = AnimElemtime(4) = 1
trigger2 = var(6) = 1
trigger2 = AnimElemtime(6) = 1
trigger3 = var(6) = 2
trigger3 = AnimElemtime(7) = 1
value = 100,3
channel = 0

[State 100]
type = PlaySnd
trigger1 = !var(6)
trigger1 = AnimElem = 4
trigger2 = var(6) = 1
trigger2 = AnimElem = 6
trigger3 = var(6) = 2
trigger3 = AnimElem = 7
value = 150,10
channel = 1

[State -3]
type = Helper
trigger1 = !var(6)
trigger1 = AnimElem = 4
trigger2 = var(6) = 1
trigger2 = AnimElem = 6
trigger3 = var(6) = 2
trigger3 = AnimElem = 7
id = 6800
name = "tenma"
pos = ceil(69*const(size.xscale)),ceil(-60*const(size.yscale))
postype = P1
stateno = 6800
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 100]
type = ChangeState
trigger1 = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3305

;---------------------------------------------------------------------------
;天魔豪斬空(着地)
[Statedef 3305]
type  = S
movetype = I
physics = S
ctrl = 0
anim = 3305
velset = 0,0

[State 110]
type = PosSet
trigger1 = time = 0
y = 0

[State 52, 2]
type = PlaySnd
trigger1 = Time = 0
value = 4, 0

[State 100]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;天魔豪斬空（飛び道具）
[Statedef 6800]
type  = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 6510
sprpriority = 4

[State 900]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000]
type = angledraw
trigger1 = 1
scale = 1.2,1.2

[State 300]
type = VarSet
trigger1 = time = 0
var(6) = parent,var(6)
ignorehitpause = 1

[State 300]
type = VarSet
trigger1 = time = 0
var(12) = parent,var(12)
ignorehitpause = 1

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(2) = 1

[State 300]
type = varadd
trigger1 = root,ProjContacttime(1600) = 2
ignorehitpause = 1
Persistent = 1
var(2) = 1

[State 1100]
type = VelSet
trigger1 = time = 1
x = 5.8
y = 5.6

;x = 6
;y = 5.6

[State 100]
type = Projectile
trigger1 = time = 1
projanim = 6450
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projmisstime = 0
projhits = 4+(var(6)*2)
offset = 0, 0
projpriority = 1
projsprpriority = 4
ProjID = 1600
velocity = vel X, vel Y
attr = A, HP
damage = ifelse(!Var(6),65,ifelse(Var(6)=1,62,61)),10
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 4,10
sparkno = -1
guard.sparkno = -1
sparkxy = 0, 0
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 13
ground.hittime = 13
air.hittime = 18
guard.ctrltime = 13
ground.velocity = -7.2, 6.5
guard.velocity = -8
air.velocity = -7.2, 6.5
airguard.velocity = -5.7,-1
air.juggle = 8
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
;envshake.time = 12
;envshake.ampl = 2
getpower = 0,0
givepower = 62,31 ;03,
nochainID = root,var(8)

[State 300]
type = Explod
trigger1 = root,projcontacttime(1600) = 1
trigger1 = var(2) = [1,6]
id = 4022
name = "projhit_s"
pos = P2bodydist X ,0
postype = P1
anim = 4020
ownpal = 1
random = 14,20
ontop = 1
ignorehitpause = 1
pausemovetime = 99999999
supermovetime = 99999999
Persistent = 1

[State 300]
type = VarSet
trigger1 = var(1) = 5
ignorehitpause = 1
var(1) = 0

[State 300]
type = VarSet
trigger1 = root,ProjContacttime(1600) = 1
ignorehitpause = 1
var(1) = 1

[State 300]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 4110]
type = PosFreeze
triggerall = time > 1
trigger1 = var(1)
value = 1
ignorehitpause = 1

[State 410]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -55 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
trigger2 = !root,NumProjID(1600)
value = 6805

;---------------------------------------------------------------------------
;天魔豪斬空（飛び道具）(消滅)
[Statedef 6805]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 6555

[State 900]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000]
type = angledraw
trigger1 = 1
scale = 1.2,1.2

[State 410]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;ブロッキング（立）
[Statedef 4000]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 4001

[State 400]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 17

[State 400]
type = PalFX
trigger1 = time <= 9
trigger1 = time%2 = 0
time = 1
add = 255,255,250
mul = 110,128,255

;1,3,5,7,9,

[State 400]
type = PlaySnd
trigger1 = Time = 1
value = 350,0
channel = 8

[State 400]
type = Explod
trigger1 = Time = 1
anim = 7970
pos = ceil(41*const(size.xscale)),ceil(-72*const(size.yscale))
sprpriority = 3
ownpal = 1
pausemovetime = 16
supermovetime = 99999999
ignorehitpause = 1

[State 400]
type = Pause
trigger1 = time = 1
time = 15
movetime = 15
pausebg = 0

[State 4000]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ブロッキング（屈）
[Statedef 4005]
type = C
movetype = I
physics = C
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 4005

[State 400]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 17

[State 400]
type = PalFX
trigger1 = time <= 9
trigger1 = time%2 = 0
time = 1
add = 255,255,250
mul = 110,128,255

[State 400]
type = PlaySnd
trigger1 = Time = 1
value = 350,0
channel = 8

[State 4010]
type = Explod
trigger1 = Time = 1
anim = 7970
pos = ceil(35*const(size.xscale)),ceil(-15*const(size.yscale))
sprpriority = 3
ownpal = 1
pausemovetime = 16
supermovetime = 9999999
ignorehitpause = 1

[State 4010]
type = Pause
trigger1 = time = 1
time = 15
movetime = 15
pausebg = 0

[State 4010]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;ブロッキング（空中）
[Statedef 4010]
type = A
movetype = I
physics = N
ctrl = 0
anim = 4011
sprpriority = 2
velset = vel X , ifelse(vel Y<-1.0,vel Y,-1.0)

[State 400]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 17

[State 1000, 0]
type = PosFreeze
trigger1 = Time >= 1
value = 1

[State 400]
type = PalFX
trigger1 = time <= 9
trigger1 = time%2 = 0
time = 1
add = 255,255,250
mul = 110,128,255

[State 400]
type = PlaySnd
trigger1 = Time = 1
value = 350,0
channel = 8

[State 4020]
type = Explod
trigger1 = Time = 1
anim = 7970
pos = ceil(6*const(size.xscale)),ceil(-78*const(size.yscale))
sprpriority = 3
ownpal = 1
pausemovetime = 16
supermovetime = 9999999
ignorehitpause = 1

[State 402]
type = Pause
trigger1 = time = 1
time = 15
movetime = 15
pausebg = 0

[State 402]
type = ChangeState
trigger1 = animtime = 0
value = 4015

;---------------------------------------------------------------------------
;空中ブロッキング後
[Statedef 4015]
type = A
physics = N
;velset = 0,-4
ctrl = 1
anim = 4015

[State 400]
type = VelAdd
trigger1 = 1
y = .54

[State 400]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;common state
;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = ifelse(GetHitVar(fall) = 1,5031,5030)

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type    = C
movetype= H
physics = N
velset = 0,0

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = ifelse(GetHitVar(fall) = 1,5031,5030)

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
triggerall = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5011 ;HITC_SLIDE

[State 5010, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140


;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK,fall
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = ifelse(GetHitVar(fall) = 1,5031,5030)

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 5030]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 5035 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5040]
type    = A
movetype= H
physics = N

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

[State 5040, 3]
type = null ;CtrlSet
trigger1 = HitOver
value = 1

[State 5150, 8]
type = NotHitBy
trigger1 = HitOver
trigger1 = stateno = 5040
value = SCA
time = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5150, 8]
type = NotHitBy
triggerall = Var(12) != 20
trigger1 = CanRecover
value = SCA
time = 1

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = !var(59)
triggerall = Var(12) = 20
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = !var(59)
triggerall = Var(12) = 20
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = null;GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = null;PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = null;PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = null;GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State -2]
type = turn;PosAdd
triggerall = LoseKo
triggerall = EnemyNear,Authorname = "G.D.T" && Name = "Gouki"
triggerall = EnemyNear,Anim = 20
;trigger1 = BackEdgeBodyDist < 10
trigger1 = facing*EnemyNear,facing = 1  ;FrontEdgeDist < 10

;特殊ED
[State -2, 1]
type = ChangeState
triggerall = Lose
triggerall = EnemyNear,Authorname = "G.D.T" && Name = "Gouki"
triggerall = abs(pos X - EnemyNear,pos X) <= 36
trigger1 = roundstate = 4
trigger1 = EnemyNear,stateno = 9505
value = 9520
persistent = 0

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = S
movetype = I
physics = N
;anim = 5200
ctrl = 0
velset = 0,0

[State 5050, 6]
type = ChangeState
trigger1 = var(12) != 20
value = 5100 ;HIT_BOUNCE

[State 5050, 6]
type = ChangeAnim
trigger1 = time = 0
value = 5200

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
x = -6

[State 5201, 2]
type = VelSet
trigger1 = vel X > -.1
x = 0

[State 5201, 2]
type = VelMul
trigger1 = 1
x = .95

[State 5201]
type = PlaySnd
trigger1 = Time = 1
value = 100, 3

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 5

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 2
add = 128,128,128 ;256,256,256

[State 5900, 3]
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER
[Statedef 5210]
type    = A
movetype= I
physics = N
;anim = 5210
ctrl = 0

[State 5050, 6]
type = ChangeState
trigger1 = time = 0
trigger1 = var(12) != 20
trigger1 = Pos Y <= -5
trigger2 = var(59)
trigger2 = var(12) = 20
trigger2 = ScreenPos Y <= 80
trigger2 = Command = "recovery"
value = 5050

[State 5050, 6]
type = ChangeState
trigger1 = time = 0
trigger1 = var(12) != 20
trigger1 = Pos Y > -5
value = 5100

[State 5050, 6]
type = ChangeAnim
trigger1 = time = 0
value = 5210

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 2
add = 128,128,128 ;256,256,256

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 1
value = 100, 3

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
x = .8
y = .8

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
y = -4.5

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1

[State 5210, 2] ;Go up
type = null;VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdup"
y = -2

[State 5210, 2] ;Go down
type = null;VelAdd
trigger1 = Time = 4
trigger1 = Command = "holddown"
y = 1.5

[State 5210, 2] ;Go fwd
type = null;VelMul
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
x = 1

[State 5210, 2] ;Go back
type = null;VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdback"
x = -1

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 16
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = Time >= 4
y = .5

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[state 190]
type = helper
trigger1 = roundsexisted > 0
trigger1 = var(57) = 1
trigger1 = Time = 0
ID = 7030
stateno = 7030
postype = Back ;p1
pos = 180,0
name = "vega3"
ontop = 1
bindtime = -1
ownpal = 1
pausemovetime = 999999999999
supermovetime = 999999999999
size.shadowoffset = -3

[State 860, 4]
type = PowerSet
trigger1 = numhelper(10010) && helper(10010),var(3) = 1
trigger1 = var(12) = 10
trigger1 = time = [0,1]
value = 0

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = roundno = 1
value = 190

;---------------------------------------------------------------------------
;helper def
;---------------------------------------------------------------------------
;燃焼エフェクト（ground）
[Statedef 7200]
type = A
movetype = I
physics = N
ctrl = 0
anim = 8011

[State 18600, PosSet]
type = PosSet
trigger1 = 1
x = enemynear,pos x
y = enemynear,pos y
ignorehitpause = 1

[State -2]
type = RemoveExplod
triggerall = NumExplod(7200)
trigger1 = enemynear,statetype = C
ID = 7200

[State -2]
type = RemoveExplod
triggerall = NumExplod(7210)
trigger1 = enemynear,statetype = S
ID = 7210

[State -2]
type = RemoveExplod
triggerall = NumExplod(7220)
trigger1 = enemynear,statetype = S
trigger2 = enemynear,statetype = C
ID = 7220

[State -2]
type = Explod
triggerall = enemynear,statetype = S
trigger1 = time = 0
trigger2 = !NumExplod(7200)
anim = 7200 ;ifelse((target,Const(size.ground.front))+(target,Const(size.ground.back))>40,3115,3100)
id = 7200
pos = 0,0
postype = P2
bindtime = -1
scale = const(size.xscale),const(size.yscale)
RemoveTime = -1
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State -2]
type = Explod
triggerall = enemynear,statetype = C
trigger1 = time = 0
trigger2 = !NumExplod(7210)
anim = 7210 ;ifelse((target,Const(size.ground.front))+(target,Const(size.ground.back))>40,3125,3110)
id = 7210
pos = 0,0
postype = P2
bindtime = -1
RemoveTime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State -2]
type = Explod
triggerall = enemynear,statetype = A
trigger1 = !NumExplod(7220)
trigger2 = roundstate = 3
anim = 7220 ;ifelse((target,Const(size.ground.front))+(target,Const(size.ground.back))>40,3120,3105)
id = 7220
pos = 0,0
postype = P2
bindtime = -1
scale = const(size.xscale),const(size.yscale)
RemoveTime = -1
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State 520]
type = VarSet
triggerall = enemynear,statetype = A
trigger1 = NumExplod(7220)
var(1) = 1

[State 4110, ChangeState]
type = ChangeState
triggerall = time >= 1
trigger1 = enemynear,statetype = A
trigger1 = enemynear,movetype = H
value = 7220

[State 4110, ChangeState]
type = ChangeState
trigger1 = enemynear,statetype = L
trigger2 = !(enemynear,movetype = H && (enemynear,stateno = [2000,2021]))
value = 7221

;---------------------------------------------------------------------------
;燃焼エフェクト（air）
[Statedef 7220]
type = A
movetype = I
physics = N
ctrl = 0
anim = 8011

[State 8300, PosSet]
type = PosSet
trigger1 = 1
x = enemynear,pos x
y = enemynear,pos y
ignorehitpause = 1

[State -2]
type = RemoveExplod
trigger1 = NumExplod(7200)
ID = 7200

[State -2]
type = RemoveExplod
trigger1 = NumExplod(7210)
ID = 7210

[State -2]
type = RemoveExplod
trigger1 = NumExplod(7220)
trigger1 = time = 0
trigger1 = var(1) = 1
ID = 7220

[State -2]
type = Explod
triggerall = enemynear,statetype = A
trigger1 = !NumExplod(7220)
trigger2 = !NumExplod(7220)
trigger2 = time = 0
anim = 7220 ;ifelse((target,Const(size.ground.front))+(target,Const(size.ground.back))>40,3120,3105)
id = 7220
pos = 0,0
postype = P2
bindtime = -1
scale = const(size.xscale),const(size.yscale)
RemoveTime = -1
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State 4110, ChangeState]
type = ChangeState
triggerall = time >= 1
trigger1 = enemynear,statetype = S || enemynear,statetype = C
trigger1 = enemynear,movetype = H
value = 7200

[State 4110, ChangeState]
type = ChangeState
trigger1 = enemynear,statetype = L
trigger2 = roundstate = 2
trigger2 = !(enemynear,movetype = H && (enemynear,stateno = [2020,2021]))
value = 7221

;---------------------------------------------------------------------------
;燃焼エフェクト（消滅）
[Statedef 7221]
type = A
movetype = I
physics = N
ctrl = 0
anim = 8011

[State -2]
type = RemoveExplod
trigger1 = 1
ID = 7200

[State -2]
type = RemoveExplod
trigger1 = 1
ID = 7210

[State -2]
type = RemoveExplod
trigger1 = time = ifelse(enemynear,prevstateno = 2021,1,0)
trigger2 = time >= 2
ID = 7220

[State 410]
type = DestroySelf
trigger1 = Time = 2

;---------------------------------------------------------------------------
;super1
[Statedef 8000]
ctrl = 0
anim = 8011

[State 1000, 3]
type = null;BindToParent
trigger1 = 1
time = -1
pos = 0,0

[State 1200]
type = Explod
trigger1 = Time = 0
anim = 8000
id = 8000
pos = 0,0
postype = P1
bindtime = -1
ownpal = 1
ontop = 1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 1
pausemovetime = 99999999
supermovetime = 99999999

[State 9020]
type = DestroySelf
trigger1 = time = 13

;---------------------------------------------------------------------------
;super2
[Statedef 8001]
ctrl = 0
anim = 8011

[State 1000, 3]
type = null;BindToParent
trigger1 = 1
time = -1
pos = 0,0

[State 5210, 5]
type = VarSet
trigger1 = Time = 0
var(6) = parent,var(6)

[State 5210, 5]
type = VarSet
trigger1 = Time = 0
trigger1 = parent,stateno = 3200
var(6) = 2

[State 1200]
type = Explod
trigger1 = parent,stateno != 3300
trigger1 = Time = 0
anim = ifelse(!var(6),7610,ifelse(var(6)=1,7620,7630))
id = 8001
pos = 0,0
postype = P1
bindtime = -1
ownpal = 1
ontop = 1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 1
pausemovetime = 99999999
supermovetime = 99999999

[State 1200]
type = Explod
trigger1 = parent,stateno = 3300
trigger1 = Time = 0
anim = ifelse(!var(6),7615,ifelse(var(6)=1,7625,7635))
id = 8001
pos = 0,0
postype = P1
bindtime = -1
ownpal = 1
ontop = 1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 1
pausemovetime = 99999999
supermovetime = 99999999

[State 902]
type = DestroySelf
trigger1 = time > 1
trigger1 = !NumExplod(8001) ;time = 45

;---------------------------------------------------------------------------
;super3
[Statedef 8002]
ctrl = 0
anim = 8011

[State 1000, 3]
type = null;BindToParent
trigger1 = 1
time = -1
pos = 0,0

[State 5210, 5]
type = VarSet
trigger1 = Time = 0
var(6) = parent,var(6)

[State 1200]
type = Explod
trigger1 = Time = 0
anim = 7610;ifelse(!var(6),7610,ifelse(var(6)=1,7620,7630))
id = 8003
pos = ceil(71*const(size.xscale)), ceil(-48*const(size.yscale))
postype = P1
bindtime = -1
ownpal = 1
ontop = 1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 1
pausemovetime = 99999999
supermovetime = 99999999

[State 1200]
type = Explod
trigger1 = Time = 0
anim = ifelse(!var(6),7610,ifelse(var(6)=1,7620,7630))
id = 8004
pos = ceil(-3*const(size.xscale)),ceil(-49*const(size.yscale))
postype = P1
bindtime = -1
ownpal = 1
ontop = 1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 1
pausemovetime = 99999999
supermovetime = 99999999

[State 9020]
type = DestroySelf
trigger1 = time = 45

;---------------------------------------------------------------------------
;KO時演出
[Statedef 8011]
ctrl = 0
anim = 8011

[State 310]
type = AssertSpecial
trigger1 = Time <= 97
flag = NoBarDisplay
flag2 = NoMusic

[State 310]
type = AssertSpecial
trigger1 = Time <= 97
flag = globalnoshadow
flag2 = NoBG
flag3 = noFG

[State 310]
type = PlaySnd
triggerall = root,stateno != [3200,3299]
trigger1 = time = 1
value = 210,10
ignorehitpause = 1
abspan = 0

[State 120]
type = Explod
trigger1 = Time = 0
anim = 8010
id = 8010
pos = 0,0
postype = Left
sprpriority = -8
bindtime = -1
ownpal = 1
ignorehitpause = 1
scale = 0.5,0.5
;removetime = 97
pausemovetime = 99999999
supermovetime = 99999999

[State 120]
type = RemoveExplod
trigger1 = Time = 98
id = 8010

[State 902]
type = DestroySelf
trigger1 = time = 97
trigger2 = time = 99

;---------------------------------------------------------------------------
;sgsKO時演出
[Statedef 8012]
ctrl = 0
anim = 8011

[State 310]
type = AssertSpecial
trigger1 = win
trigger1 = Time <= 56
flag = globalnoshadow
flag2 = NoBG
flag3 = noFG

[State 310]
type = AssertSpecial
trigger1 = win
trigger1 = Time <= 56
flag = NoBarDisplay

[State 120]
type = Explod
trigger1 = Time = 0
anim = 8012
id = 8012
pos = 0,0
postype = Left
sprpriority = -8
bindtime = -1
ownpal = 1
ignorehitpause = 1
scale = 0.5,0.5
;removetime = -1; 91
pausemovetime = 99999999
supermovetime = 99999999

[State 120]
type = RemoveExplod
trigger1 = Time = 57
id = 8012

[State 902]
type = DestroySelf
trigger1 = time = 56
trigger2 = time = 58

;---------------------------------------------------------------------------
;win表示
[Statedef 8030]
ctrl = 0
anim = 8011

[State 310]
type = PlaySnd
trigger1 = time = 1
value = 105,ifelse(WinPerfect,5,0)
abspan = 0

[State 120]
type = Explod
trigger1 = Time = 1
anim = 8030
id = 8030
pos = 0,-8
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
;removetime = -1; 91
pausemovetime = 99999999
supermovetime = 99999999

[State 902]
type = DestroySelf
trigger1 = time = 50

;---------------------------------------------------------------------------
;zero counter
[Statedef 8040]
ctrl = 0
anim = 8011

[State 1000, 3]
type = BindToParent
trigger1 = 1
time = -1
pos = 0,0

[State 120]
type = Explod
trigger1 = Time = 1
anim = 8040
id = 8040
pos = (root,BackEdgeDist)+44,0
postype = Back
ontop = 1
bindtime = 1
ownpal = 1
;removetime = -1; 91
pausemovetime = 17
supermovetime = 99999999

[State 120]
type = Explod
trigger1 = Time = 2
anim = 8041
id = 8041
pos = ceil(41*const(size.xscale)),ceil(-72*const(size.yscale))
postype = P1
sprpriority = -2
bindtime = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)
;removetime = -1; 91
pausemovetime = 17
supermovetime = 99999999

[State 902]
type = DestroySelf
trigger1 = time = 50

;---------------------------------------------------------------------------
;power溜め
[Statedef 8045]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 8011
sprpriority = 2

[State 5000, 3]
type = ChangeAnim
trigger1 = Time = 1
value = 7640

[State 411]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 310]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 411]
type = Explod
trigger1 = Time = 1 && !NumExplod(7650)
anim = 7650
id = 7650
pos = 0,0
postype = P1
sprpriority = -1
bindtime = -1
ownpal = 1
scale = const(size.xscale),const(size.yscale)
removetime = -1
;persistent = 0

[State 411]
type = Explod
trigger1 = Time = 1 && !NumExplod(7611)
anim = 7610
id = 7611
pos = ceil(52*const(size.xscale)),ceil(-48*const(size.yscale))
postype = P1
sprpriority = 1
bindtime = -1
ownpal = 1
scale = const(size.xscale),const(size.yscale)
removetime = -1
;persistent = 0

[State 411]
type = Explod
trigger1 = Time = 1 && !NumExplod(7612)
anim = 7610
id = 7612
pos = ceil(-22*const(size.xscale)),ceil(-49*const(size.yscale))
postype = P1
sprpriority = 1
bindtime = -1
ownpal = 1
scale = const(size.xscale),const(size.yscale)
removetime = -1
;persistent = 0

[State 4110]
type = RemoveExplod
trigger1 = Root,StateNo != 610
id = 7650

[State 4110]
type = RemoveExplod
trigger1 = Root,StateNo != 610
id = 7611

[State 4110]
type = RemoveExplod
trigger1 = Root,StateNo != 610
id = 7612

[State 4110]
type = DestroySelf
trigger1 = Root,StateNo != 610

;---------------------------------------------------------------------------
;win画面
[Statedef 8050]
ctrl = 0
anim = 8011

[State 310]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay
flag2 = NoMusic

[State 310]
type = AssertSpecial
trigger1 = time >= 70
flag = NoFG

[State 820]
type = Playsnd
trigger1 = Time = 70 ;272
value = 400,0
abspan = 0

[State 411]
type = Explod
trigger1 = Time = 70
anim = 8050 + random%6
id = 8050
pos = 0,0
postype = Left
ontop = 1
bindtime = -1
ownpal = 1

;---------------------------------------------------------------------------
;パワーゲージ
[Statedef 8900]
ctrl = 0
anim = 8011

[State 8040]
type = Explod
trigger1 = !NumExplod(8900)
trigger1 = teamside = 1
anim = 8900
id = 8900
postype = Left
pos = 0,240
ownpal = 1
bindtime = -1
removetime = -1
ignorehitpause = 1
ontop = 1
pausemovetime = 9999
supermovetime = 9999

[State 8040]
type = Explod
trigger1 = !NumExplod(8901)
trigger1 = teamside = 1
anim = 8901
id = 8901
postype = Left
pos = 13,240
ownpal = 1
bindtime = -1
removetime = -1
ignorehitpause = 1
ontop = 1
pausemovetime = 9999
supermovetime = 9999

[State 8040]
type = Explod
trigger1 = !NumExplod(8910)
trigger1 = teamside = 1
trigger1 = power >= 3000
anim = 8910
id = 8910
postype = Left
pos = 0,240
ownpal = 1
bindtime = -1
removetime = -1
ignorehitpause = 1
ontop = 1
pausemovetime = 9999
supermovetime = 9999

[State 8040]
type = Explod
trigger1 = !NumExplod(8900)
trigger1 = teamside = 2
anim = 8900
id = 8900
postype = Right
pos = 0,240
ownpal = 1
bindtime = -1
removetime = -1
facing = -1
ignorehitpause = 1
ontop = 1
pausemovetime = 9999
supermovetime = 9999

[State 8040]
type = Explod
trigger1 = !NumExplod(8901)
trigger1 = teamside = 2
anim = 8902
id = 8901
postype = Right
pos = -14,240
ownpal = 1
bindtime = -1
removetime = -1
facing = 1
ignorehitpause = 1
ontop = 1
pausemovetime = 9999
supermovetime = 9999

[State 8040]
type = Explod
trigger1 = !NumExplod(8910)
trigger1 = teamside = 2
trigger1 = power >= 3000
anim = 8911
id = 8910
postype = Right
pos = 0,240
ownpal = 1
bindtime = -1
removetime = -1
ignorehitpause = 1
ontop = 1
pausemovetime = 9999
supermovetime = 9999

[State 8040]
type = ModifyExplod
trigger1 = NumExplod(8900)
trigger1 = root,stateno != 3201
ID = 8900
scale = 1,1
ignorehitpause = 1
pausemovetime = 9999
supermovetime = 9999

[State 8040]
type = ModifyExplod
trigger1 = NumExplod(8901)
trigger1 = root,stateno != 3201
ID = 8901
scale = 1,1
ignorehitpause = 1
pausemovetime = 9999
supermovetime = 9999

[State 8040]
type = ModifyExplod
trigger1 = NumExplod(8910)
trigger1 = root,stateno != 3201
ID = 8910
scale = 1,1
ignorehitpause = 1
pausemovetime = 9999
supermovetime = 9999

[State 8040]
type = ModifyExplod
trigger1 = NumExplod(8901)
trigger1 = power < 3000
ID = 8901
scale = power/3000.0,1
ignorehitpause = 1
pausemovetime = 9999
supermovetime = 9999

[State 8040]
type = ModifyExplod
trigger1 = NumExplod(8901)
trigger1 = power >= 3000
ID = 8901
scale = 1,1
ignorehitpause = 1
pausemovetime = 9999
supermovetime = 9999

[State 4110]
type = RemoveExplod
trigger1 = NumExplod(8910)
trigger1 = power < 3000
id = 8910

[State 8040]
type = ModifyExplod
triggerall = NumExplod(8900)
trigger1 = root,stateno = 3201
trigger1 = root,time >= 13
trigger2 = root,stateno = 192
trigger2 = root,time >= ifelse(!root,var(26),22,27)
trigger3 = root,stateno = 9530
trigger3 = root,time >= 71
ID = 8900
scale = 0,0
ignorehitpause = 1
pausemovetime = 9999
supermovetime = 9999

[State 8040]
type = ModifyExplod
triggerall = NumExplod(8901)
trigger1 = root,stateno = 3201
trigger1 = root,time >= 13
trigger2 = root,stateno = 192
trigger2 = root,time >= ifelse(!root,var(26),22,27)
trigger3 = root,stateno = 9530
trigger3 = root,time >= 71
ID = 8901
scale = 0,0
ignorehitpause = 1
pausemovetime = 9999
supermovetime = 9999

[State 8040]
type = ModifyExplod
triggerall = NumExplod(8910)
trigger1 = root,stateno = 3201
trigger1 = root,time >= 13
trigger2 = roundstate <= 1
trigger3 = root,stateno = 9530
trigger3 = root,time >= 71
ID = 8910
scale = 0,0
ignorehitpause = 1
pausemovetime = 9999
supermovetime = 9999

;===========================================================================
; 常時監視ステート（−２）
;===========================================================================
[Statedef -2]

;モード
[State -2, 3]
type = VarSet
trigger1 = name = "Gouki" && (PalNo = [7,8])
trigger2 = name = "Gouki" && (PalNo = [10,11])
trigger3 = name = "Shin Gouki"
var(12) = 10

[State -2, 3]
type = VarSet
trigger1 =  name = "Gouki" && PalNo = 9
trigger2 =  name = "Gouki" && PalNo = 12
trigger3 =  name = "EX Shin Gouki"
var(12) = 20

;補正
[State -2, 1]
type = DefenceMulSet
trigger1 = var(12)
value = 0.89

;残像消去
[State -2]
type = AfterImageTime
trigger1 = MoveType = H
trigger2 = StateNo = [0,89]
trigger3 = StateNo = [100,155]
trigger4 = StateNo = [200,999]
trigger5 = (StateNo != [1600,1605]) && (StateNo = [1000,1999])
time = 0

;パワーゲージ
[State -2]
type = helper
triggerall = !NumHelper(8900)
triggerall = var(12) = 10
triggerall = numhelper(10010) && helper(10010),var(2) = 1
trigger1 = !numpartner
trigger2 = numpartner
trigger2 = ID < partner,ID
trigger3 = numpartner
trigger3 = ID > partner,ID
trigger3 = !partner,authorname = "G.D.T"
helpertype = normal
name = "gauge"
stateno = 8900
ID = 8900
pos = 0,10
postype = P1
keyctrl = 0
pausemovetime = 99999999
supermovetime = 99999999

;hit用
[State -2]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
var(3) = ifelse(movehit,1,3)
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = moveguarded
trigger2 = projGuarded = 1
var(3) = ifelse(moveguarded,2,4)
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = Time = 1
trigger1 = stateno != 1005
trigger1 = stateno != 1025
trigger1 = stateno != 1105
trigger1 = stateno != 1125
trigger1 = stateno != 1505
trigger1 = stateno != 1525
trigger1 = stateno != 1706
trigger1 = stateno != 1716
trigger1 = stateno != 3105
trigger1 = stateno != 3125
var(3) = 0
ignorehitpause = 1

;振り向き
[State -2]
type = Turn
triggerall = RoundState = 2
triggerall = P2Dist X < 0
triggerall = time = 1
trigger1 = prevstateno = 52 || prevstateno = 100 || prevstateno = 620
trigger2 = prevstateno = 1105 || prevstateno = 1125
ignorehitpause = 1

;vega
[state -2]
type = helper
triggerall = roundstate = 2
triggerall = var(57) = 1
triggerall = !NumHelper(7020) && !NumHelper(7030)
trigger1 = Time = 0
ID = 7030
stateno = 7030
postype = p1
pos = 0,0
name = "vega3"
ownpal = 1
pausemovetime = 999999999999
supermovetime = 999999999999
size.shadowoffset = -3

;ブロッキング
[State -2]
type = VarSet
triggerall = roundstate >= 2
trigger1 = var(20) >= 20
trigger2 = (stateno = [4000,4020]) && time = 1
var(22) = 0

[State -2]
type = VarSet
triggerall = roundstate >= 2
trigger1 = var(20) >= 20
trigger2 = (stateno = [4000,4020]) && time = 1
var(20) = 0

[State -2]
type = VarAdd
triggerall = roundstate >= 2
trigger1 = var(20)
var(20) = 1
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = roundstate >= 2
;triggerall = !var(59)
triggerall = !var(20)
trigger1 = command = "block_f" && command != "holddown"&& Command != "holdup"
var(20) = 1

[State -2]
type = VarSet
triggerall = roundstate >= 2
trigger1 = var(20) = [1,6]
trigger1 = command != "holdfwd" && Command != "holdback" && command != "holdup" && Command != "holddown"
var(22) = 1

[State -2]
type = VarSet
triggerall = roundstate >= 2
trigger1 = var(21) >= 20
trigger2 = (stateno = [4000,4020]) && time = 1
var(23) = 0

[State -2]
type = VarSet
triggerall = roundstate >= 2
trigger1 = var(21) >= 20
trigger2 = (stateno = [4000,4020]) && time = 1
var(21) = 0

[State -2]
type = VarAdd
triggerall = roundstate >= 2
trigger1 = var(21)
var(21) = 1
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = roundstate >= 2
;triggerall = !var(59)
triggerall = !var(21)
trigger1 = command = "block_d" && command != "holdfwd"&& Command != "holdback"
var(21) = 1

[State -2]
type = VarSet
triggerall = roundstate >= 2
trigger1 = var(21) = [1,6]
trigger1 = command != "holdfwd" && Command != "holdback" && command != "holdup" && Command != "holddown"
var(23) = 1

;上段ブロッキング
[State -2] 
type = HitOverride
triggerall = !Var(59)
triggerall = var(12) = 20
triggerall = statetype != A
triggerall = ctrl || ((stateno = [4000,4020]) && time >= 16)
trigger1 = (var(20) = [1,6]) && !var(59)
trigger2 = (var(20) = [7,10]) && var(22) && !var(59)
;trigger3 = var(12)
slot = 0
stateno = 4000
attr = SA, NA, SA, HA, NP, SP, HP
time = 1

;下段ブロッキング
[State -2]
type = HitOverride
triggerall = !Var(59)
triggerall = var(12) = 20
triggerall = statetype != A
triggerall = ctrl || ((stateno = [4000,4020]) && time >= 16)
trigger1 = (var(21) = [1,6]) && !var(59)
trigger2 = (var(21) = [7,10]) && var(23) && !var(59)
;trigger3 = var(12)
slot = 1
stateno = 4005
attr = C, AA, AP
time = 1

;空中ブロッキング
[State -2]
type = HitOverride
triggerall = !Var(59)
triggerall = var(12) = 20
triggerall = statetype = A
triggerall = ctrl || ((stateno = [4000,4020]) && time >= 16)
trigger1 = (var(20) = [1,6]) && !var(59)
trigger2 = (var(20) = [7,10]) && var(22) && !var(59)
;trigger3 = var(12)
slot = 2
stateno = 4010
attr = SCA, AA, AP
time = 1

;灼熱相手
[State -2]
type = TargetState
triggerall = projhit1100 = 1
triggerall = var(12) != 20
triggerall = numenemy = 1
trigger1 = numtarget
trigger1 = target,movetype = H
trigger1 = !helper(6200),var(6)
value = ifelse(P2statetype=S,2000,ifelse(P2statetype=C,2010,2020))
ignorehitpause = 1

[State -2]
type = TargetState
triggerall = numtarget
triggerall = target,movetype = H
triggerall = numenemy = 1
trigger1 = projhit1100 = 1
trigger1 = var(12) != 20
trigger1 = helper(6200),var(6)
trigger2 = var(12) = 20
trigger2 = projhit1100 = 1
trigger3 = helper(6700),var(6) = 2
trigger3 = var(12) = 20
trigger3 = projhit1500 = 1
value = 2020
ignorehitpause = 1

[State -2]
type = helper
triggerall = !NumHelper(7200)
triggerall = projHit1100 = 1
triggerall = numenemy = 1
trigger1 = var(12) != 20
trigger1 = !helper(6200),var(6)
helpertype = normal
name = "burn"
stateno = 7200
ID = 7200
pos = 0,0
postype = P2
keyctrl = 0
ignorehitpause = 1
pausemovetime = 99999999
supermovetime = 99999999

[State -2]
type = helper
triggerall = !NumHelper(7220)
triggerall = numenemy = 1
trigger1 = projhit1100 = 1
trigger1 = var(12) != 20
trigger1 = helper(6200),var(6)
trigger2 = var(12) = 20
trigger2 = projhit1100 = 1
trigger3 = helper(6700),var(6) = 2
trigger3 = var(12) = 20
trigger3 = projhit1500 = 1
helpertype = normal
name = "burn"
stateno = 7220
ID = 7220
pos = 0,0
postype = P2
keyctrl = 0
ignorehitpause = 1
pausemovetime = 99999999
supermovetime = 99999999

;
[State -2]
type = VarSet
trigger1 = var(12) != 20
trigger1 = var(1) = 91
trigger2 = var(12) = 20
trigger2 = (!var(6) && var(1)=99) || (var(6)=1 && var(1)=107) || (var(6)=2 && var(1)=130)
var(1) = 0
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = roundstate >= 2
trigger1 = stateno = 3100 || stateno = 3120
trigger1 = time = 2
var(1) = 1
ignorehitpause = 1

[State -2]
type = VarAdd
trigger1 = var(1)
var(1) = 1
ignorehitpause = 0

;KO演出
[State -2]
type = Helper
triggerall = roundstate >= 2
triggerall = !Numhelper(8011)
triggerall = WinKo
triggerall = var(24) = [0,1]
trigger1 = projhittime(1500) = 1
trigger2 = stateno = 3100 && var(3) = [1,2]
trigger3 = stateno = 3120 && var(3) = [1,2]
trigger4 = projhittime(1600) = 1
ID = 8011
stateno = 8011
postype = left
pos = 0,0
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
ownpal = 1

[State 900]
type = AssertSpecial
trigger1 = ProjContact1500 = 1
trigger1 = alive = 1
trigger2 = ProjContact1600 = 1
trigger2 = alive = 1
flag = NoKOSlow
ignorehitpause = 1

[State -2]
type = pause
triggerall = roundstate >= 2
triggerall = WinKo
triggerall = var(24) >= 2
trigger1 = var(12) != 20
trigger1 = stateno = 3202
trigger1 = Time < 40
trigger2 = var(12) = 20
trigger2 = projhit1500 =1, < 50 && !((stateno = [1000,1999]) && movecontact)
trigger3 = (stateno = [3100,3125]) || var(1)
trigger4 = projhit1600 =1, < 50
time = ifelse(var(24)<30,2,1)
pausebg = 0
ignorehitpause = 1

[State -2]
type = pause
triggerall = roundstate >= 2
triggerall = WinKo
triggerall = var(24) >= 2
triggerall = var(12) != 20
trigger1 = projcontacttime(1500) >= 8
trigger1 = projhit1500 = 1, < 54
time = ifelse((var(24)%4=1),2,1) ;projcontacttime(1500)<=53
pausebg = 0
ignorehitpause = 1

;roundstate3time
[State -2]
type = VarSet
trigger1 = roundstate = 2
trigger1 = var(24)
trigger2 = roundstate = 0
trigger3 = roundstate = 4
var(24) = 0
ignorehitpause = 1

[State -2]
type = VarAdd
trigger1 = roundstate = 3
var(24) = 1
ignorehitpause = 1

;YOUWIN表示
[State -2]
Type = Helper
Triggerall = !NumHelper(8030)
Triggerall = win
Triggerall = RoundState >= 3
Triggerall = time = 1
Triggerall = (StateNo = [180,183]) || StateNo = 3204
Triggerall = time = 1
Trigger1 = !NumPartner
Trigger2 = NumPartner
Trigger2 = Partner,Authorname = "G.D.T"
Trigger2 = ID = [32,33]
ID = 8030
stateno = 8030
postype = left
pos = 0,0
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
ownpal = 1

;コンボ制限1
[State -2]
type = VarSet
trigger1 = P2MoveType != H
trigger2 = numtarget
trigger2 = target,statetype = S
trigger3 = numtarget
trigger3 = target,statetype = C
var(7) = 0
ignorehitpause = 1

[State -2]
type = VarAdd
triggerall = movehit
triggerall = numtarget
trigger1 = P2MoveType = H && P2stateType = A
trigger1 = movehit < 2
trigger2 = target,gethitvar(yvel) && target,stateType != A
trigger2 = movehit < 2
trigger3 = target,gethitvar(fall)
trigger3 = movehit < 2
ignorehitpause = 0
var(7) = 1

[State -2]
type = VarSet
triggerall = numtarget 
triggerall = var(12) = 20
trigger1 = projhit1500 = 1
trigger2 = projhittime(1200) = 1 || projhittime(1201) = 1
ignorehitpause = 1
var(7) = 1

[State -2]
type = assertspecial
triggerall = P2MoveType = H && P2stateType = A
triggerall = var(7)
trigger1 = stateno = 1000 && var(7) < 3
trigger2 = stateno = 1100 && var(7) < 3
trigger3 = stateno = 1020 && var(7) < 3
trigger4 = stateno = 1120 && var(7) < 3
trigger5 = stateno = 1500 && var(7) < 3
trigger6 = stateno = 1520 && var(7) < 3
trigger7 = stateno = 3120 && var(7) < 3
ignorehitpause = 1
flag = nojugglecheck

;コンボ制限2
[State -2]
type = VarSet
trigger1 = P2MoveType != H
trigger2 = numtarget
trigger2 = target,statetype = S
trigger3 = numtarget
trigger3 = target,statetype = C
var(8) = -1

[State -2]
type = VarSet
triggerall = var(8) = -1
triggerall = numtarget
triggerall = movehit || projhit = 1
trigger1 = target,gethitvar(yvel)
trigger1 = movehit < 2
trigger2 = target,gethitvar(fall)
trigger2 = movehit < 2
var(8) = 1
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(8) = 1
trigger1 = stateno = 1000 && var(7) >= 3
trigger2 = stateno = 1100 && var(7) >= 3
trigger3 = stateno = 1020 && var(7) >= 3
trigger4 = stateno = 1120 && var(7) >= 3
trigger5 = var(12) != 20
trigger5 = stateno = 330 && var(7)
trigger6 = stateno = 1100 && !var(6) && var(7)
trigger7 = stateno = 1020 && animelemtime(4) >= 1 && time >= 1
trigger8 = (stateno = [200,500]) && stateno != 330 && var(7)
trigger9 = stateno = 1500 && var(7) >= 3
trigger10 = stateno = 1520 && var(7) >= 3
trigger11 = stateno = 1200 && time = 1
trigger12 = stateno = 1300 && time = 1
trigger14 = stateno = 1400 && time = 1
trigger15 = stateno = 3000 && time = 1
trigger16 = stateno = 3020 && time = 1
var(8) = 0
ignorehitpause = 1

[State -2]
type = null;VarSet
triggerall = !var(8)
triggerall = var(59)
trigger1 = stateno = 1020 && var(7) = [1,2]
trigger1 = animelemtime(4) < 1
var(8) = 1
ignorehitpause = 1

;空中復帰誘導
[State -2]
type = VarSet
triggerall = movetype != H
trigger1 = !NumTarget
trigger2 = P2MoveType != H
trigger3 = movehit
trigger4 = projhit = 1
trigger5 = numtarget
trigger5 = !target,gethitvar(fall)
var(2) = 0
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(2) != 2
triggerall = (stateno = [200,499]) || stateno = 1710
trigger1 = stateno != 330
var(2) = 1
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(2) = 1
trigger1 = movehit
var(2) = 2
ignorehitpause = 1

[State -2]
type = TargetState
triggerall = Numtarget
triggerall = var(2) = 2
trigger1 = target,stateno = 5050 && target,alive
value = 2050
ignorehitpause = 1

;効果音
[State 1000]
type = StopSnd
trigger1 = numhelper(8011)
channel = 1

[State -2]
type = PlaySnd
trigger1 = projhittime(1200) = 1
trigger2 = projhittime(1201) = 1
trigger3 = projhittime(1100) = 1
trigger4 = !numhelper(8011) || var(24) = [1,3]
trigger4 = projhittime(1500) = 1
trigger5 = !numhelper(8011) || var(24) = [1,3]
trigger5 = projhittime(1600) = 1
value = 1, 2
channel = 5

[State -2]
type = PlaySnd
trigger1 = ProjGuardedTime(1200) = 1
trigger2 = ProjGuardedTime(1201) = 1
trigger3 = ProjGuardedTime(1100) = 1
trigger4 = !numhelper(8011) || var(24) = [1,3]
trigger4 = ProjGuardedTime(1500) = 1
trigger5 = !numhelper(8011) || var(24) = [1,3]
trigger5 = ProjGuardedTime(1600) = 1
value = 3, ifelse(var(12)=20,1,0)
channel = 5

[State -2]
type = VarSet
trigger1 = power < 3000
var(0) = 0
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(0) = 2
var(0) = 3
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = !var(0)
trigger1 = Power >= 3000
var(0) = 1
ignorehitpause = 1

[State -2]
type = Playsnd
triggerall = var(12) = 20
trigger1 = var(0) = 1
trigger1 = Power >= 3000
value = 350,20

[State -2]
type = VarAdd
trigger1 = var(0) = 1
var(0) = 1
ignorehitpause = 1

[State -2]
type = PlaySnd
triggerall = Time = 1
trigger1 = StateNo = 5100 || StateNo = 5110
value = 4,5
channel = 20

;---------------------------------------------------------------------------
;-2 for AI
;---------------------------------------------------------------------------
;stand time
[State -2]
type = VarSet
triggerall = Var(59)
triggerall = Var(5)
trigger1 = stateno != [120,140]
trigger1 = stateno != [650,651]
trigger1 = stateno != 0
trigger1 = time = 1
var(5) = 0

;roundstate2 time
[State 3001, VarSet]
type = VarSet
trigger1 = roundstate != 2
var(10) = 0

[State 3001, VarSet]
type = VarAdd
trigger1 = roundstate = 2
var(10) = 1

;---------------------------------------------------------------------------
;p2statetype
;S
[State 3001, VarSet]
type = VarSet
trigger1 = p2statetype != S
var(30) = 0
ignorehitpause = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = p2statetype = S
var(30) = 1
ignorehitpause = 1

;C
[State 3001, VarSet]
type = VarSet
trigger1 = p2statetype != C
var(31) = 0
ignorehitpause = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = p2statetype = C
var(31) = 1
ignorehitpause = 1

;A
[State 3001, VarSet]
type = VarSet
trigger1 = p2statetype != A
var(32) = 0
ignorehitpause = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = p2statetype = A
var(32) = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
;相手起き上がり

[State 3001, VarSet]
type = VarSet
trigger1 = var(33) >= 50
trigger2 = roundstate >= 3
var(33) = 0
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
triggerall = enemynear,alive = 1
triggerall = roundstate = 2
trigger1 = (enemynear,stateno = 5120) || (enemynear,stateno = 5201)
trigger1 = enemynear,time = 1
var(33) = 1
ignorehitpause = 1

[State 3001, VarSet]
type = VarAdd
triggerall = enemynear,alive = 1
triggerall = roundstate = 2
trigger1 = var(33) >= 2
var(33) = 1
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
triggerall = var(33)
triggerall = roundstate = 2
trigger1 = (enemynear,stateno = 5120) || (enemynear,stateno = 5201)
trigger1 = enemynear,animtime = -1
var(33) = 2
ignorehitpause = 1

;---------------------------------------------------------------------------
;ブロッキング間隔
[State -2]
type = VarSet
triggerall = var(41)
trigger1 = stateno = 4000 || stateno = 4005 || stateno = 4010
trigger1 = time = 1
trigger2 = movetype = A
trigger3 = var(41) >= 20
trigger4 = (stateno = [5000,5150])
trigger4 = time = 1
var(41) = 0
ignorehitpause = 1

[State -2]
type = VarAdd
trigger1 = var(41)
var(41) = 1
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = !var(41)
trigger1 = stateno = 4000 || stateno = 4005 || stateno = 4010
trigger1 = animtime = -1
var(41) = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
;動作終了後時間計測
[State -2]
type = VarSet
trigger1 = var(42) = 17
var(42) = 0
ignorehitpause = 1

[State -2]
type = VarAdd
trigger1 = var(42)
var(42) = 1
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = time = 1
trigger1 = stateno = 52 || stateno = 455 || stateno = 475
trigger2 = time = 1
trigger2 = stateno = 1005 || stateno = 1025 || stateno = 1105 || stateno = 1125
trigger3 = time = 1
trigger3 = stateno = 1405 || stateno = 1505 || stateno = 1525 || stateno = 1605
trigger4 = time = 1
trigger4 = stateno = 1706 || stateno = 1711 || stateno = 1716 || stateno = 1726
trigger5 = time = 1
trigger5 = stateno = 3105 || stateno = 3125 || stateno = 3305 || stateno = 4015
trigger6 = animtime = -1
trigger6 = stateno = [90,105]
trigger7 = animtime = -1
trigger7 = (stateno = [200,330]) || (stateno = [651,3020]) || (stateno = [4000,4010])
trigger7 = stateno != 1005 && stateno != 1025 && stateno != 1105 && stateno != 1125
trigger7 = stateno != 1405 && stateno != 1505 && stateno != 1525 && stateno != 1605
trigger7 = stateno != 1706 && stateno != 1711 && stateno != 1716 && stateno != 1726
trigger8 = animtime = -1
trigger8 = stateno = 5201
var(42) = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
;通常攻撃スカ回避
[State -2]
type = VarSet
triggerall = !var(44)
trigger1 = roundstate <= 1
var(44) = -1
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(44) > 0
trigger1 = p2stateno != var(44)
trigger2 = movetype = H
var(44) = -1
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(44) = [-3,-1]
trigger1 = stateno = [200,330]
trigger1 = time = 1
trigger1 = p2bodydist X = [-10,80]
trigger1 = p2statetype != A
trigger1 = enemynear,vel X >= 0
var(44) = -1
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(44) = -1
triggerall = stateno = [200,330]
triggerall = time >= 2
trigger1 = p2bodydist X = [1,80]
var(44) = ifelse(p2statetype = A,-3,-2)
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(44) = [-2,-1]
triggerall = stateno = [200,330]
trigger1 = animtime = -1
trigger1 = p2bodydist X = [-10,80]
trigger1 = p2stateno != 0
trigger1 = !numtarget
trigger2 = time >= 2
trigger2 = p2statetype != A
trigger2 = p2bodydist X = [-80,-5]
var(44) = P2stateno
ignorehitpause = 1

;---------------------------------------------------------------------------
;prevstateno
[State 3001, VarSet]
type = VarSet
trigger1 = movetype = A
trigger1 = time = 2
trigger2 = stateno = 52 || stateno = 610 || stateno = 5201 || stateno = 5210 || stateno = [4000,4010]
trigger2 = time = 1
var(45) = stateno

[State 3001, VarSet]
type = VarSet
triggerall = var(45) = 5210
trigger1 = stateno = 52 || stateno = 0
trigger2 = Pos Y >= 0 && Vel Y > 0
var(45) = -1

;---------------------------------------------------------------------------
;ガード間隔
[State 300]
type = VarSet
trigger1 = var(46) >= 35
trigger2 = movetype = A
trigger3 = stateno != [120,155]
trigger3 = movetype = H
var(46) = 0
ignorehitpause = 1

[State 300]
type = VarAdd
trigger1 = var(46)
var(46) = 1
ignorehitpause = 1

[State 300]
type = VarSet
trigger1 = stateno = 150 || stateno = 152
trigger1 = time = 1
var(46) = 1
ignorehitpause = 1

;get hit間隔
[State 300]
type = VarSet
trigger1 = var(47) >= 35
trigger2 = movetype = A
trigger3 = stateno != [5000,5050]
trigger3 = movetype = H
var(47) = 0
ignorehitpause = 1

[State 300]
type = VarAdd
trigger1 = var(47)
var(47) = 1
ignorehitpause = 1

[State 300]
type = VarSet
trigger1 = stateno = 5000 || stateno = 5010 || stateno = 5020
trigger1 = time = 1
var(47) = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
;hit確認
[State -2]
type = VarSet
trigger1 = movetype = A
trigger1 = time = 1
trigger2 = movetype = H
var(48) = 0
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
var(48) = ifelse(movehit,1,3)
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = moveguarded
trigger2 = projGuarded = 1
var(48) = ifelse(moveguarded,2,4)
ignorehitpause = 1

;---------------------------------------------------------------------------
;P2movetype time measure 1
[State 3001, VarSet]
type = VarSet
trigger1 = P2movetype != A
var(50) = 0

[State 3001, VarSet]
type = VarAdd
trigger1 = var(50)
var(50) = 1

[State 3001, VarSet]
type = VarSet
trigger1 = P2movetype = A
trigger1 = enemynear,time = 1
var(50) = 1

;---------------------------------------------------------------------------
;超必危険時間
[State 3001, VarSet]
type = VarSet
trigger1 = P2movetype != A
var(51) = 0

[State 3001, VarSet]
type = VarAdd
trigger1 = var(51)
var(51) = 1

[State 3001, VarSet]
type = VarSet
trigger1 = !var(51)
trigger1 = numenemy = 1
trigger1 = numhelper(10010)
trigger1 = helper,var(20) - var(50) >= 9
var(51) = 1

[State 3001, VarSet]
type = VarSet
trigger1 = !var(51)
trigger1 = numenemy = 2
trigger1 = p2stateno = [3000,3999]
trigger1 = enemynear,time = 1
var(51) = 1

;---------------------------------------------------------------------------
;起き上がり時間
[State 3001, VarSet]
type = VarSet
trigger1 = var(54) >= 40
var(54) = 0
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = stateno = 5120 || stateno = 5201
trigger1 = time = 1
var(54) = 1
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
triggerall = var(54)
trigger1 = stateno = 5120 || root,stateno = 5201
trigger1 = animtime = -1
var(54) = 2
ignorehitpause = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = var(54) >= 2
var(54) = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
;inguarddist time measure
[State 3001, VarSet]
type = VarSet
trigger1 = !inguarddist
var(55) = 0

[State 3001, VarSet]
type = VarAdd
trigger1 = inguarddist
var(55) = 1

;---------------------------------------------------------------------------
;相手が近距離波動拳を避けられるかどうか
[State 300, FVar(5)1]
type = VarSet
triggerall = fvar(5) = 1
trigger1 = stateno = 1200 && animtime = -1
trigger2 = stateno = 1300 && animtime = -1
fvar(5) = 0

[State 300, FVar(5)2]
type = VarSet
triggerall = fvar(5) = 0
triggerall = time = 1
triggerall = P2bodydist X <= 200
triggerall = P2statetype != A
trigger1 = stateno = 1200
trigger2 = stateno = 1300
fvar(5) = 1

[State 300, FVar(5)2]
type = VarSet
triggerall = fvar(5) = 1
triggerall = numhelper
triggerall = P2statetype != A
triggerall = P2bodydist X = [5,185]
trigger1 = abs(helper(6100),RootDist X) - P2dist X > 0
trigger2 = abs(helper(6200),RootDist X) - P2dist X > 0
fvar(5) = 2

[State 300, FVar(5)2]
type = VarSet
triggerall = fvar(5) = 2
triggerall = time = 1
triggerall = P2bodydist X <= 200
triggerall = P2statetype != A
trigger1 = stateno = 1200
trigger2 = stateno = 1300
fvar(5) = 4

[State 300, FVar(5)2]
type = VarSet
triggerall = fvar(5) = 4
triggerall = numhelper
triggerall = P2statetype != A
triggerall = P2bodydist X = [5,185]
trigger1 = abs(helper(6100),RootDist X) - P2dist X > 0
trigger2 = abs(helper(6200),RootDist X) - P2dist X > 0
fvar(5) = 3

;---------------------------------------------------------------------------
[State -2]
type = helper
trigger1 = !NumHelper(10010)
trigger1 = roundstate = [0,2]
helpertype = normal
name = "AI1"
stateno = 10010
ID = 10010
pos = 0,0
postype = P1
keyctrl = 0
pausemovetime = 99999999
supermovetime = 99999999

[State 3001, VarSet]
type = VarSet
trigger1 = NumHelper(10010)
var(52) = helper(10010),var(1)

;---------------------------------------------------------------------------
[State -2, クリップボード]
type = DisplayToClipboard
trigger1 = 1
text = "Body-Distance X=%d,Y=%d  Velocity X=%f,Y=%f \n" ;Cancel=%d, Throw=%d, Button=%d, 
params = floor(P2BodyDist X),floor(P2bodyDist Y),(Vel X),(Vel Y)

[State -2, クリップボード]
type = null;DisplayToClipboard
trigger1 = 1
text = "var(20)=%d,var(21)=%d var(22)=%d,var(23)=%d var(24)=%d \n"  
params = var(20),var(21),var(22),var(23),var(24)

[State -2, クリップボード（追加専用）]
type = AppendToClipboard
trigger1 = 1
text = "var(46) = %d var(8) = %d var(11) = %d RecoverTime = %d  \n"
params = var(46),var(8),var(11),(enemynear,GetHitVar(RecoverTime))

[State -2, クリップボード（追加専用）]
type = null;AppendToClipboard
trigger1 = 1
text = "Position X=%d,Y=%d, Velocity X=%f,Y=%f, Hit=%d \n"
params = floor(Pos X),floor(Pos Y),(Vel X),(Vel Y),(MoveHit)

[State -2]
type = null;Explod
trigger1 = roundstate = 2
trigger1 = var(59)
anim = 7200
id = 7208
pos = 0,-50
postype = P1
bindtime = 1
RemoveTime = -1
sprpriority = 0
ownpal = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
[State -3, AI起動用ヘルパー]
type = helper
triggerall = !NumHelper(10000)
triggerall = Var(59) = 0
triggerall = Var(10) <= 300
TriggerAll = Ctrl
TriggerAll = RoundState = 2
TriggerAll = StateNo = 0
Trigger1 = RoundNo = 1
Trigger2 = TeamMode = Turns
Trigger2 = RoundsExisted = 0
helpertype=normal
name="AI"
stateno=10000
ID=10000
PosType = P1
pos=0,0
keyctrl=1
IgnoreHitPause = 1
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0

;念のため↓も付けておく
[State -3, 関係無いステートに行かないように]
type=changestate
trigger1= ishelper(10010)
trigger1= stateno!=10010
value=10010

