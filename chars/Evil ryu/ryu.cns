;---------------------------------------------------------------------------
; 基本データ
;---------------------------------------------------------------------------
[Data]
life              = 1000   ;ライフ（体力ゲージ）最大値
power             = 3000   ;パワーゲージ最大値（オプション・デフォルトは3000=Lv.3）
attack            = 100    ;攻撃力（デフォルトは１００％）
defence           = 100    ;防御力（デフォルトは１００％）
fall.defence_up   = 50     ;横に倒れている時に一時的に加える防御力（％）
liedown.time      = 60     ;横に倒れている時間（フレーム）
airjuggle         = 15     ;ジャグルポイント限界値（「小ネタ.txt」参照）
sparkno           = 2      ;デフォルトのヒットスパーク（fightfxから）
guard.sparkno     = 40     ;デフォルトのガードスパーク（fightfxから）
KO.echo           = 0      ;ＫＯ時の音声（11,0）にエコーを掛けるか否か（0=掛けない,1=掛ける）
volume            = 200    ;キャラの標準の音量（最小-255・最大255）
IntPersistIndex   = 0     ;次のラウンドへ持ち越せる「Var」のアドレスの範囲を決める（※１）
FloatPersistIndex = 0     ;次のラウンドへ持ち越せる「FVar」のアドレスの範囲を決める（※１）

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; サイズ
;---------------------------------------------------------------------------
[Size]
xscale           = 1       ;キャラの横の大きさ（絶対値・float）
yscale           = 1       ;キャラの縦の大きさ（絶対値・float）
ground.back      = 14         ;地上にいる時の「後方の物理的な幅」
ground.front     = 14         ;地上にいる時の「前方の物理的な幅」
air.back         = 14         ;空中にいる時の「後方の物理的な幅」
air.front        = 14         ;空中にいる時の「前方の物理的な幅」
height           = 65      ;キャラの物理的な高さ（高いほど相手は飛び越しにくくなる）
attack.dist      = 150     ;相手がガード態勢に入る最低の距離
proj.attack.dist = 90      ;自分の「Projectile」に対して相手がガード態勢に入る最低の距離
proj.doscale     = 1       ;xscaleとyscaleを「Projectile」にも影響させるか否か（0=させない・1=させる）
head.pos         = 3,-81  ;キャラの標準の頭の座標（Bind系で適用される）
mid.pos          = -5,-52  ;キャラの標準の体中心の座標（Bind系で適用される）
shadowoffset     = 0       ;影のＹ軸方向の位置座標
draw.offset      = 0,0     ;キャラの表示座標（Ｘ軸,Ｙ軸）

;---------------------------------------------------------------------------
; 移動速度
;---------------------------------------------------------------------------
[Velocity]
walk.fwd     = 3.43         ;前進速度（Ｘ軸・[Statedef 20]に適用される）
walk.back    = -2.27        ;後退速度（Ｘ軸・[Statedef 20]に適用される）
run.fwd      = 4.6,0       ;前方に走る速度（Ｘ軸,Ｙ軸・[Statedef 100]に適用される）
run.back     = -4.5,-3.8   ;後方に走る速度（Ｘ軸,Ｙ軸・[Statedef 105]に適用される）
jump.neu     = 0,-9.2      ;垂直ジャンプの速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
jump.back    = -3.84       ;後方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.fwd     = 3.4         ;前方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
runjump.back = -2.55,-8.1  ;後方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
runjump.fwd  = 4,-8.1      ;前方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
airjump.neu  = 0,-8.1      ;空中垂直ジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 45]に適用される）
airjump.back = -2.55       ;空中後方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）
airjump.fwd  = 2.5         ;空中前方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）

;---------------------------------------------------------------------------
; 運動関係
;---------------------------------------------------------------------------
[Movement]
airjump.num     = 0        ;空中ジャンプが出来る回数
airjump.height  = 35       ;空中ジャンプが出来る最低の高度（Ｙ軸）
yaccel          = .53      ;Ｙ軸加速度（重力）
stand.friction  = .85      ;立っている時の摩擦係数（ステートのPhysicsが「S」の時）
crouch.friction = .82      ;しゃがんでいる時の摩擦係数（ステートのPhysicsが「C」の時）

[Quotes]
victory1 = "I'll put an end to the beating of your feeble heart!"
victory2 = "A match as worthless as this is a far cry from the true blood match I seek..."
victory3 = "You're weak...too weak to exist! You must pay for your weakness with death!"
victory4 = "My power will destroy all!"
victory5 = "This... THIS is my power! No one can stop me!"
victory6 = "The Satsui no Hadou flows through my body!"
victory7 = "To be the strongest warrior means to be the last one standing!"
victory8 = "I see nothing but the destruction that I create!"
victory9 = "There is no place for the weak to exist!"
victory10 = "To lose is to prove that you are worthy to perish!"

;===========================================================================
; ステート
;===========================================================================
;===========================================================================
; 基本行動
;===========================================================================
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0
velset = 0,0

[State 0, 2]
type = ChangeAnim
triggerall = Anim != 180
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State -2]
type = AfterImageTime
trigger1 = 1
time = 0

[State 0, 2]
type = ChangeAnim
triggerall = roundstate >= 3
triggerall = Anim = 0
trigger1 = AnimElem = 3
value = 180

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

[State 20, 4]
type = changestate
trigger1 = roundstate != 2
value = 0

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0

[State 40]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;ジャンプ
[Statedef 50]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 50, 4]
type = ChangeState
trigger1 = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
; 着地
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PlaySnd
trigger1 = Time = 0
value = 4, 0

[State 52, 2]
type = CtrlSet
trigger1 = time = ifelse((prevstateno = [350,410]),2,1)
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;勝利ポーズ分岐
[Statedef 180]
type = S
ctrl = 0
velset = 0,0

[State 180]
type = ChangeState
trigger1 = Time = 0
value = 181+(random%2)

;---------------------------------------------------------------------------
;勝利ポーズ1
[Statedef 181]
type = S
ctrl = 0
anim = 1600
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0,240]
flag = RoundNotOver

[State 181]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181]
type = PlaySnd
trigger1 = AnimElem = 1
value = 6, 0

;---------------------------------------------------------------------------
;勝利ポーズ2
[Statedef 182]
type = S
ctrl = 0
anim = 1601
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0,240]
flag = RoundNotOver

[State 182]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 182]
type = PlaySnd
trigger1 = AnimElem = 1
value = 6, 1

;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

;[State 190, 1]
;type = ChangeAnim
;trigger1 = SelfAnimExist(190)
;value = 190

[State 190, 2] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 0
value = 0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;遠距離立ち弱パンチ
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
anim = 200
ctrl = 0

[State 200]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 0

[State 22]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 200, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(28*var(52)/3) ;8c
pausetime = 11,11
guard.pausetime = 12,12
sparkno = S4030
guard.sparkno = S7600
sparkxy = -5, -75
hitsound = S1, 0
guardsound = S3, 0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 10
air.hittime = 13
guard.ctrltime = 14
ground.velocity = -5.5*const(size.xscale)
guard.velocity = -5.5*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 125,63; 2,1
givepower = 0,0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
persistent = 0
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち弱パンチ
[Statedef 205]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 205

[State 22]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 20]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 0

[State 200, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(28*var(52)/3) ;8c
pausetime = 10,10
sparkno = S4030
guard.sparkno = S7600
sparkxy = -9,-79
hitsound = S1, 0
guardsound = S3, 0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 10
air.hittime = 13
guard.ctrltime = 14
ground.velocity = -5.5*const(size.xscale)
guard.velocity = -5.5*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 125,63; 2,1
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち中パンチ
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 210

[State 22]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 20]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(132*var(52)/3);7d
pausetime = 11,11
guard.pausetime = 12,12
sparkno = S4040
guard.sparkno = S7600
sparkxy = -8, -76
hitsound = S1, 1
guardsound = S3, 0
ground.type = Low
air.type = Low
ground.slidetime = 13
ground.hittime = 13
air.hittime = 13
guard.ctrltime = 17
ground.velocity = -9*const(size.xscale)
guard.velocity = -7.8*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -16*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 250,188; 4,3
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち中パンチ
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 215

[State 22]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 20]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(132*var(52)/3);7d
pausetime = 11,11
guard.pausetime = 12,12
sparkno = S4000
guard.sparkno = S7600
sparkxy = -13, -58
hitsound = S1, 1
guardsound = S3, 0
ground.type = High
air.type = High
ground.slidetime = 13
ground.hittime = 13
air.hittime = 13
guard.ctrltime = 17
ground.velocity = -9*const(size.xscale)
guard.velocity = -7.8*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -20*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 250,188;
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;FAR STAND HEAVY PUNCH
[Statedef 220]
type = S
physics = S
movetype = A
ctrl = 0
velset = 0
anim = 220
juggle = 15

[State 220,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = s0,2

[State 210,2]
type = HitDef
trigger1 = time = 0
priority = 3, Hit			;2 for ??, 3 for M/H att, 4 for L att, 5 for super, 6 fot hyper
;
attr = S,NA			;STAND / NORMAL ATTACK
hitflag = MA			;MIDDLE ATTACK
guardflag = M			;GUARD is MIDDLE /L is LOW
;
animtype = hard	 		;2p ANIM, light", "medium", "hard", "back", "up",    or "diagup"
air.animtype = up ; = medium			;2p ANIM
ground.type = high
;
damage = 60
getpower = 120
GivePower = 60
;
pausetime = 12,12
guard.pausetime = 12,12
;
ground.slidetime = 20
;
ground.hittime = 20
air.hittime = 30
;
guard.hittime = 17
guard.ctrltime =17
;
ground.velocity = -12
air.velocity = -3,-5
guard.velocity = -12
airguard.velocity = -4,-5
air.juggle = 16
;
ground.cornerpush.veloff = -25
guard.cornerpush.veloff = -25
;
sparkxy = -20,-65
;
juggle = 10
hitsound = S1,2
guardsound = S3,0
sparkno = 2
guard.sparkno = 3

[State 220,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;近距離立ち強パンチ
[Statedef 225]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 225

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 20]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 2

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 221, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Hard
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(167*var(52)/3);78
pausetime = 12,12
guard.pausetime = 11,11
sparkno = S4020
guard.sparkno = S7600
sparkxy = -14, -67
hitsound = S1, 2
guardsound = S3, 0
ground.type = Low
air.type = Low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 13
guard.ctrltime = 20
ground.velocity = -12
guard.velocity = -10
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250;
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 221, 1]
type = Hitdef
triggerall = var(3) != [1,2]
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Hard
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(167*var(52)/3)
pausetime = 12,12
guard.pausetime = 11,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -13, -88
hitsound = S1, 2
guardsound = S3, 0
ground.type = High
air.type = low
ground.slidetime = 17
ground.hittime = 17
air.hittime = 13
guard.ctrltime = 20
ground.velocity = -12
guard.velocity = -10
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250;
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち弱キック
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 8
ctrl = 0
velset = 0,0
anim = 250

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 230]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 230, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(83*var(52)/3);84
pausetime = 11,11
guard.pausetime = 10,10
sparkno = S4030
guard.sparkno = S7600
sparkxy = -15, -19
hitsound = S2, 0
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 9
ground.hittime = 9
air.hittime = 13
guard.ctrltime = 13
ground.velocity = -5.5*const(size.xscale)
guard.velocity = -5.5*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 125,63
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 230]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち弱キック
[Statedef 255]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 255

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 200]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 230, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(76*var(52)/3);85
pausetime = 10,10
sparkno = S4000
guard.sparkno = S7600
sparkxy = -14, -28
hitsound = S2, 0
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 9
ground.hittime = 9
air.hittime = 13
guard.ctrltime = 13
ground.velocity = -5.5*const(size.xscale)
guard.velocity = -5.5*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 125,63
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち中キック
[Statedef 260]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 260

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 200]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 240, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(146*var(52)/3);7b
pausetime = 11,11
sparkno = S4040
guard.sparkno = S7600
sparkxy = -6, -82
hitsound = S2, 1
guardsound = S3, 0
ground.type = High
air.type = High
ground.slidetime = 13
ground.hittime = 13
air.hittime = 13
guard.ctrltime = 17
ground.velocity = -9*const(size.xscale)
guard.velocity = -7.8*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -16*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 250,188
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち中キック
[Statedef 265]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 265

[State 22]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 200]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 240, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(146*var(52)/3);7b
pausetime = 11,11
guard.pausetime = 12,12
sparkno = S4040
guard.sparkno = S7600
sparkxy = -17, -48
hitsound = S2, 1
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 13
guard.ctrltime = 17
ground.velocity = -9*const(size.xscale)
guard.velocity = -7.8*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -16*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 250,188
givepower = 0,0 ;35, 35
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち強キック
[Statedef 270]
type = S
physics = S
movetype = A
ctrl = 0
velset = 0
anim = 270
juggle = 15

[State 200]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem =1
x = 4
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem =9
x = 7
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem =4
x = 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem =12
x = 0
y = 0

[State 210,2]
type = HitDef
trigger1 = animelem =4
priority = 3, Hit			;2 for ??, 3 for M/H att, 4 for L att, 5 for super, 6 fot hyper
;
attr = S,NA			;STAND / NORMAL ATTACK
hitflag = MA			;MIDDLE ATTACK
guardflag = M			;GUARD is MIDDLE /L is LOW
;
animtype = hard	 		;2p ANIM, light", "medium", "hard", "back", "up",    or "diagup"
air.animtype = up 			; = up			;2p ANIM
ground.type = high
;
damage = 60
getpower = 120
GivePower = 60
;
pausetime = 6,12
guard.pausetime = 12,12
;
ground.slidetime = 2
;
ground.hittime = 20
air.hittime = 30
;
guard.hittime = 17
guard.ctrltime =17
;
ground.velocity = -2
air.velocity = -3,-5
guard.velocity = -12
airguard.velocity = -4,-5
air.juggle = 16
;
ground.cornerpush.veloff = -5
guard.cornerpush.veloff = -5
;
sparkxy = -20,-75
;
juggle = 10
hitsound = S2,2
guardsound = S3,0
sparkno = 2
guard.sparkno = 3

[State 210,2]
type = HitDef
trigger1 = animelem =12
priority = 3, Hit			;2 for ??, 3 for M/H att, 4 for L att, 5 for super, 6 fot hyper
;
attr = S,NA			;STAND / NORMAL ATTACK
hitflag = MA			;MIDDLE ATTACK
guardflag = M			;GUARD is MIDDLE /L is LOW
;
animtype = hard	 		;2p ANIM, light", "medium", "hard", "back", "up",    or "diagup"
air.animtype = up 			; = up			;2p ANIM
ground.type = high
;
damage = 60
getpower = 120
GivePower = 60
;
pausetime = 12,12
guard.pausetime = 12,12
;
ground.slidetime = 20
;
ground.hittime = 20
air.hittime = 30
;
guard.hittime = 17
guard.ctrltime =17
;
ground.velocity = -12
air.velocity = -3,-5
guard.velocity = -12
airguard.velocity = -4,-5
air.juggle = 16
;
ground.cornerpush.veloff = -25
guard.cornerpush.veloff = -25
;
sparkxy = -20,-75
;
juggle = 10
hitsound = S2,2
guardsound = S3,0
sparkno = 2
guard.sparkno = 3

[State 270,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



[Statedef 399]
type = S
physics = S
movetype = A
ctrl = 0
velset = 0
anim = 211
juggle = 15

[State 200]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem =4
x = 5
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem =7
x = 0
y = 0


[State 210,2]
type = HitDef
trigger1 = animelem =4
priority = 3, Hit			;2 for ??, 3 for M/H att, 4 for L att, 5 for super, 6 fot hyper
;
attr = S,NA			;STAND / NORMAL ATTACK
hitflag = MA			;MIDDLE ATTACK
guardflag = M			;GUARD is MIDDLE /L is LOW
;
animtype = hard	 		;2p ANIM, light", "medium", "hard", "back", "up",    or "diagup"
air.animtype = up 			; = up			;2p ANIM
ground.type = high
;
damage = 60
getpower = 120
GivePower = 60
;
pausetime = 11,12
guard.pausetime = 12,12
;
ground.slidetime = 2
;
ground.hittime = 20
air.hittime = 30
;
guard.hittime = 17
guard.ctrltime =17
;
ground.velocity = -2
air.velocity = -3,-5
guard.velocity = -12
airguard.velocity = -4,-5
air.juggle = 16
;
ground.cornerpush.veloff = -5
guard.cornerpush.veloff = -5
;
sparkxy = -20,-65
;
juggle = 10
hitsound = S2,3
guardsound = S3,1
sparkno = 2
guard.sparkno = 3

[State 210,2]
type = HitDef
trigger1 = animelem =5
priority = 3, Hit			;2 for ??, 3 for M/H att, 4 for L att, 5 for super, 6 fot hyper
;
attr = S,NA			;STAND / NORMAL ATTACK
hitflag = MA			;MIDDLE ATTACK
guardflag = M			;GUARD is MIDDLE /L is LOW
;
animtype = hard	 		;2p ANIM, light", "medium", "hard", "back", "up",    or "diagup"
air.animtype = up 			; = up			;2p ANIM
ground.type = high
;
damage = 60
getpower = 120
GivePower = 60
;
pausetime = 15,16
guard.pausetime = 12,12
;
ground.slidetime = 20
;
ground.hittime = 20
air.hittime = 30
;
guard.hittime = 17
guard.ctrltime =17
;
ground.velocity = -12
air.velocity = -3,-5
guard.velocity = -12
airguard.velocity = -4,-5
air.juggle = 16
;
ground.cornerpush.veloff = -25
guard.cornerpush.veloff = -25
;
sparkxy = -20,-65
;
juggle = 10
hitsound = S2,3
guardsound = S3,1
sparkno = 2
guard.sparkno = 3

[State 270,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち強キック
[Statedef 275]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 275

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 200]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 251, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(187*var(52)/3);75-71
pausetime = 12,12
guard.pausetime = 13,13
sparkno = S4050
guard.sparkno = S7600
sparkxy = -12, -84
hitsound = S2, 2
guardsound = S3, 0
ground.type = High
air.type = High
ground.slidetime = 16
ground.hittime = 16
air.hittime = 13
guard.ctrltime = 20
ground.velocity = -13
guard.velocity = -10
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -18
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250;
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 251, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(28*var(52)/3)
pausetime = 12,12
guard.pausetime = 13,13
sparkno = S4020
guard.sparkno = S7600
sparkxy = -14, -67
hitsound = S2, 2
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 16
ground.hittime = 16
air.hittime = 13
guard.ctrltime = 20
ground.velocity = -12
guard.velocity = -10
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250;
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ弱パンチ
[Statedef 300]
type    = C
movetype= A
physics = C
juggle  = 8
velset = 0,0
ctrl = 0
anim = 300

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 400]
type = PlaySnd
trigger1 = AnimElemTime(1) = 1
value = 0, 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 400, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(28*var(52)/3);8c
pausetime = 11,11
sparkno = S4030
guard.sparkno = S7600
sparkxy = -15, -49
hitsound = S1, 0
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 13
ground.velocity = -5.5*const(size.xscale)
guard.velocity = -5.5*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 125,63
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 400]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ中パンチ
[Statedef 305]
type    = C
movetype= A
physics = C
juggle  = 8
ctrl = 0
velset = 0,0
anim = 305

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 400]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 410, 2]
type = Hitdef
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(132*var(52)/3) ;7d
pausetime = 11,11
sparkno = S4010
guard.sparkno = S7600
sparkxy = -15, -47
hitsound = S1, 1
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 13
guard.ctrltime = 16
ground.velocity = -9*const(size.xscale)
guard.velocity = -7.8*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -16*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 250,188
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 400]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ強パンチ
[Statedef 310]
type    = C
movetype= A
physics = C
juggle  = 8
ctrl = 0
velset = 0,0
anim = 310

[State 22]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 410]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 2

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 420, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(167*var(52)/3) ;78 s.g 74
pausetime = 11,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -9, -59
hitsound = S1, 2
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 16
ground.hittime = 16
air.hittime = 13
guard.ctrltime = 19
ground.velocity = -12
guard.velocity = -10
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250;
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 420, 1]
type = Hitdef
triggerall = var(3) != [1,2]
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(167*var(52)/3)
pausetime = 11,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -12, -88
hitsound = S1, 2
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 16
ground.hittime = 16
air.hittime = 13
guard.ctrltime = 19
ground.velocity = -12
guard.velocity = -10
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250;
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 410]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ弱キック
[Statedef 320]
type    = C
movetype= A
physics = C
juggle  = 8
velset = 0,0
ctrl = 0
anim = 320

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 43]
type = PlaySnd
trigger1 = AnimElemTime(1) = 1
value = 0, 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 430, 2]
type = Hitdef
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(28*var(52)/3);8c
pausetime = 11,11
sparkno = S4030
guard.sparkno = S7600
sparkxy = -15, -17
hitsound = S2, 0
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 14
ground.velocity = -5.5*const(size.xscale)
guard.velocity = -5.5*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.6*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 125,63
givepower = 0,0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 430]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ中キック
[Statedef 325]
type    = C
movetype= A
physics = C
juggle  = 8
ctrl = 0
velset = 0,0
anim = 325

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 430]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 440, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MF
guardflag = L
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(132*var(52)/3);7d
pausetime = 11,11
sparkno = S4040
guard.sparkno = S7600
sparkxy = -17, -19
hitsound = S2, 1
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 13
ground.hittime = 13
air.hittime = 13
guard.ctrltime = 16
ground.velocity = -9*const(size.xscale)
guard.velocity = -7.8*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -16*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 250,188
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 430]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ強キック
[Statedef 330]
type    = C
movetype= A
physics = C
juggle  = 8
ctrl = 0
velset = 0,0
anim = 330

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 440]
type = PlaySnd
trigger1 = AnimElemTime(1) = 1
value = 0, 2

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 450, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(153*var(52)/3) ;7a
pausetime = 11,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -9, -15
hitsound = S2, 2
guardsound = S3, 0
ground.type = Trip
air.type = High
ground.slidetime = 19
guard.slidetime = 19
ground.hittime = 19
air.hittime = 18
guard.ctrltime = 19
ground.velocity = -1.3, -6.5
guard.velocity = -10
air.velocity = -1.3, -6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -22
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250;
givepower = 0,0
yaccel = .48
nochainID = var(8)
air.fall = 1
fall = 1
fall.recover = 0
air.recover = 0

[State 440]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;ジャンプ弱パンチ
[Statedef 350]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
anim = 350

[State 300]
type = Width
trigger1 = 1
edge = 5,0

[State 600]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 0

[State 600, 2]
type = Hitdef
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(76*var(52)/3);85
pausetime = 10,10
sparkno = S4030
guard.sparkno = S7600
sparkxy = -14, -43
hitsound = S1, 0
guardsound = S3, 0
ground.type = Low
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 13
airguard.ctrltime = 15
ground.velocity = -3*const(size.xscale)
guard.velocity = -5.33*const(size.xscale)
air.velocity = -4, -5.25
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11
air.cornerpush.veloff = -11
airguard.cornerpush.veloff = -11
getpower = 125,63
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = Pos Y >= -10 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ中パンチ
[Statedef 355]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
anim = 355

[State 600]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 610, 2]
type = Hitdef
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(132*var(52)/3);7d
pausetime = 10,11
sparkno = S4040
guard.sparkno = S7600
sparkxy = -12, -47
hitsound = S1, 1
guardsound = S3, 0
ground.type = Low
ground.slidetime = 9
ground.hittime = 9
air.hittime = 13
guard.ctrltime = 17
airguard.ctrltime = 15
ground.velocity = -4*const(size.xscale)
guard.velocity = -5.33*const(size.xscale)
air.velocity = -6.4, -4.8
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 250,188
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = Pos Y >= -10 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ強パンチ
[Statedef 360]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
anim = 360

[State 610]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 620, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(153*var(52)/3) ;7a
pausetime =  11,12
guard.pausetime = 10,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -14, -40
hitsound = S1, 2
guardsound = S3, 0
ground.type = Low
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 19
airguard.ctrltime = 15
ground.velocity = -5*const(size.xscale)
guard.velocity = -9.33*const(size.xscale)
air.velocity = -6.4, -4.8
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 313,250
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = Pos Y >= -10 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;垂直ジャンプ弱キック
[Statedef 365]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
anim = 365

[State 630]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 0

[State 630, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = up
fall.animtype = up
priority = 3,Hit
damage = ceil(83*var(52)/3);84
pausetime = 10,10
sparkno = S4030
guard.sparkno = S7600
sparkxy = -10, -48
hitsound = S2, 0
guardsound = S3, 0
ground.type = Low
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 13
airguard.ctrltime = 15
ground.velocity = -3*const(size.xscale)
guard.velocity = -5.33*const(size.xscale)
air.velocity = -4, -5.25
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 125,63
givepower = 0,0 ;35, 35
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = Pos Y >= -10 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;垂直ジャンプ中キック
[Statedef 370]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
anim = 370

[State 640]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 640, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = up
fall.animtype = up
priority = 4,Hit
damage = ceil(132*var(52)/3) ;7d
pausetime = 10,11
guard.pausetime = 11,11
sparkno = S4040
guard.sparkno = S7600
sparkxy = -10, -47
hitsound = S2, 1
guardsound = S3, 0
ground.type = Low
ground.slidetime = 9
ground.hittime = 9
air.hittime = 13
guard.ctrltime = 17
airguard.ctrltime = 15
ground.velocity = -4*const(size.xscale)
guard.velocity = -5.33*const(size.xscale)
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 250,188
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = Pos Y >= -10 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;垂直ジャンプ強キック
[Statedef 375]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
anim = 375

[State 640]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 2

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 650, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(153*var(52)/3);7a
pausetime = 11,12
guard.pausetime = 10,11
sparkno = S4020
guard.sparkno = S7600
sparkxy = -15, -54
hitsound = S2,2
guardsound = S3, 0
ground.type = High
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 19
ground.velocity = -5*const(size.xscale)
guard.velocity = -9.33*const(size.xscale)
air.velocity = -5.4, -4.8
airguard.velocity = -4.33,-1
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 313,250
givepower = 0,0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 650, 1]
type = Hitdef
triggerall = var(3) != [1,2]
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(153*var(52)/3)
pausetime = 11,12
guard.pausetime = 10,11
sparkno = S4020
guard.sparkno = S7600
sparkxy = -15, -54
hitsound = S2,2
guardsound = S3, 0
ground.type = High
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 19
airguard.ctrltime = 15
ground.velocity = -5*const(size.xscale)
guard.velocity = -9.33*const(size.xscale)
air.velocity = -5.4, -4.8
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 313,250
givepower = 0,0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = Pos Y >= -10 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;斜めジャンプ弱キック
[Statedef 400]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
anim = 400

[State 630]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0

[State 630, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(76*var(52)/3) ;85
pausetime = 10,10
sparkno = S4000
guard.sparkno = S7600
sparkxy = -10, -45
hitsound = S2, 0
guardsound = S3, 0
ground.type = High
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 13
ground.velocity = -3*const(size.xscale)
guard.velocity = -5.33*const(size.xscale)
air.velocity = -6.4, -4.8
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 125,63
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = Pos Y >= -10 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;斜めジャンプ中キック
[Statedef 405]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
anim = 405

[State 640]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 640, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(132*var(52)/3);7d
pausetime = 10,11
sparkno = S4040
guard.sparkno = S7600
sparkxy = -7, -49
hitsound = S2, 1
guardsound = S3, 0
ground.type = High
ground.slidetime = 9
ground.hittime = 9
air.hittime = 13
guard.ctrltime = 17
airguard.ctrltime = 15
ground.velocity = -4*const(size.xscale)
guard.velocity = -5.33*const(size.xscale)
air.velocity = -6.4, -4.8
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 250,188
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = Pos Y >= -10 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;斜めジャンプ強キック
[Statedef 410]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
anim = 410

[State 640]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 650, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(132*var(52)/3) ;7a
pausetime = 11,12
guard.pausetime = 10,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -15, -59
hitsound = S2, 2
guardsound = S3, 0
ground.type = High
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 19
airguard.ctrltime = 15
ground.velocity = -5*const(size.xscale)
guard.velocity = -9.33*const(size.xscale)
air.velocity = -6.4, -4.8
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 313,250
givepower = 0,0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = Pos Y >= -10 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;斜めジャンプ中パンチ
[Statedef 420]
type    = A
movetype = A
physics = A
juggle = 8
ctrl = 0
anim = 420

[State 640]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 650, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(146*var(52)/3) ;7a
;7b-77 79-64
pausetime = 11,12
guard.pausetime = 10,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -15, -59
hitsound = S1, 1
guardsound = S3, 0
ground.type = High
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 19
airguard.ctrltime = 15
ground.velocity = -5*const(size.xscale)
guard.velocity = -9.33*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 313,250 ;04-08
givepower = 0,0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 650, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(28*var(52)/3) ;7a
pausetime = 11,12
guard.pausetime = 10,11
sparkno = S4050
guard.sparkno = S7600
sparkxy = -15, -59
hitsound = S1, 1
guardsound = S3, 0
ground.type = High
ground.slidetime = 8
ground.hittime = 8
air.hittime = 13
guard.ctrltime = 19
airguard.ctrltime = 15
ground.velocity = -5*const(size.xscale)
guard.velocity = -9.33*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -4.8,-1.6
ground.cornerpush.veloff = -11*const(size.xscale)
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -11*const(size.xscale)
getpower = 313,250
givepower = 0,0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 110]
type = ChangeState
trigger1 = Pos Y >= -10 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;鎖骨割り
[Statedef 450]
type    = S
movetype = A
physics = N
juggle = 8
velset = 0,0
ctrl = 0
anim = 450

[State 300]
type = Width
trigger1 = 1
edge = 5,0

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 210]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 810]
type = VelSet
trigger1 = AnimElemTime(6) = 1
x = 5

[State 810]
type = VelMul
trigger1 = AnimElemTime(7) >= 1
x = 0.9

[State 810]
type = VelSet
trigger1 = AnimElem = 9
x = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 9
movetype = I

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 6
attr = S, NA
hitflag = MAF
guardflag = H
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(21*var(52)/3); 82-7d ;j vel x 7b-77
;8d-73
pausetime = 11,11
;guard.pausetime = 
sparkno = S4020
guard.sparkno = S7600
sparkxy = -5, -79
hitsound = S1, 2
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 13
guard.ctrltime = 15
ground.velocity = -5.5*const(size.xscale)
guard.velocity = -5.5*const(size.xscale)
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -10*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250; 05-0a
givepower = 0, 0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 7
attr = S, NA
hitflag = MAF
guardflag = H
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(180*var(52)/3)
pausetime = 11,11
;guard.pausetime =
sparkno = S4020
guard.sparkno = S7600
sparkxy = -15, -38
hitsound = S1, 2
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 12
ground.hittime = 12
air.hittime = 13
guard.ctrltime = 22
ground.velocity = -5.5*const(size.xscale)
guard.velocity = -11
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -10*const(size.xscale)
guard.cornerpush.veloff = -20*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250
givepower = 0, 0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;鳩尾砕き
[Statedef 460]
type    = S
movetype = A
physics = N
juggle = 8
velset = 0,0
ctrl = 0
anim = 460

[State 300]
type = Width
trigger1 = 1
edge = 5,0

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 210]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2

[State 810]
type = VelSet
trigger1 = AnimElem = 5
x = 10

[State 810]
type = VelMul
trigger1 = AnimElemTime(7) >= 0
x = 0.72

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Hard
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(28*var(52)/3)
;8c-73 78
pausetime = 11,11
;guard.pausetime = 
sparkno = S4020
guard.sparkno = S7600
sparkxy = -5, -79
hitsound = S1, 2
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 16
ground.hittime = 16
air.hittime = 13
guard.ctrltime = 15
ground.velocity = -8
guard.velocity = -8
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -25*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250; 05-0a 04-08
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Hard
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(201*var(52)/3)
pausetime = 11,11
;guard.pausetime =
sparkno = S4020
guard.sparkno = S7600
sparkxy = -15, -38
hitsound = S1, 2
guardsound = S3, 0
ground.type = Low
air.type = High
ground.slidetime = 16
ground.hittime = 16
air.hittime = 13
guard.ctrltime = 21
ground.velocity = -10
guard.velocity = -10
air.velocity = -2.61, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -25*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 313,250
givepower = 0,0
persistent = 0
air.fall = 1
fall.recover = 0
air.recover = 0
nochainID = var(8)
yaccel = .5

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;投げ（掴みモーション）
[Statedef 900]
type    = S
movetype = A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = ifelse((var(11)=5||Command = "y"),900,ifelse((var(11)=6||Command = "z"),901,ifelse((var(11)=2||Command = "b"),902,903)))

[State 10000, 1]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 900, 1]
type = HitDef
triggerall = anim = [900,901]
triggerall = P2bodydist X = [ceil(-15*const(size.xscale)),ceil(33*const(size.xscale))]
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
trigger1 = AnimElem = 1
attr = S, NT
hitflag = M-
priority = 3, Miss
sparkno = -1
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 902
p2stateno = 906
guard.dist = 0
numhits = 0

[State 900, 1]
type = HitDef
triggerall = anim = [902,903]
triggerall = P2bodydist X = [ceil(-15*const(size.xscale)),ceil(33*const(size.xscale))]
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
trigger1 = AnimElem = 1
attr = S, NT
hitflag = M-
priority = 3, Miss
sparkno = -1
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 911
p2stateno = 916
guard.dist = 0
numhits = 0

[State 900, 2]
type = ChangeState
Trigger1 = anim = 900
Trigger1 = AnimTime = 0
value = ifelse((P2BodyDist X = [ceil(-31*const(size.xscale)),ceil(31*const(size.xscale))]),215,210)

[State 900, 2]
type = ChangeState
Trigger1 = anim = 901
Trigger1 = AnimTime = 0
value = ifelse((P2BodyDist X = [ceil(-33*const(size.xscale)),ceil(33*const(size.xscale))]),225,220)

[State 900, 2]
type = ChangeState
Trigger1 = anim = 902
Trigger1 = AnimTime = 0
value = ifelse((P2BodyDist X = [ceil(-17*const(size.xscale)),ceil(17*const(size.xscale))]),265,260)

[State 900, 2]
type = ChangeState
Trigger1 = anim = 903
Trigger1 = AnimTime = 0
value = ifelse((P2BodyDist X = [ceil(-33*const(size.xscale)),ceil(33*const(size.xscale))]),275,270)

;---------------------------------------------------------------------------
;背負い投げ
[Statedef 902]
type    = S
movetype = A
physics = N
velset = 0,0

[State 90]
type = TargetState
trigger1 = Time = 0
value = 905

[State 820]
type = ChangeAnim
trigger1 = Time = 0
value = 910
persistent = 0

[State 100]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 100]
type = VarSet
triggerall = !var(5) && time < 6
trigger1 = (enemynear,Command = "holdfwd") || (enemynear,Command = "holdback")
trigger1 = (enemynear,Command = "x") || (enemynear,Command = "y") || (enemynear,Command = "z") || (enemynear,Command = "a") || (enemynear,Command = "b") || (enemynear,Command = "c")
trigger2 = (enemynear,Command = "x") && (enemynear,Command = "a")
var(5) = 1

[State 1201, 2]
type = Playerpush
trigger1 = 1
value = 0

[State 3001]
type = Width
trigger1 = animelemtime(1) >= 0 && animelemtime(2) < 0
edge = 0,40

[State 3001]
type = Width
trigger1 = animelemtime(2) >= 0 && animelemtime(4) < 0
edge = 30,0

[State 3001]
type = Width
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
edge = 60,0

[State 3001]
type = Width
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
edge = 90,0

[State 3001]
type = Width
trigger1 = animelemtime(6) >= 0
edge = 130,0

[State 901]
type = PlaySnd
trigger1 = AnimElem = 6
value = 100,2
channel = 0

[State 901,1]
type = targetBind
trigger1 = animelem = 1
pos = ceil(-36*const(size.xscale)),0;-27,0
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 2
pos = ceil(-50*const(size.xscale)),ceil(-101*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 3
pos = ceil(6*const(size.xscale)), ceil(-83*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 4
pos = ceil(39*const(size.xscale)), ceil(-64*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = AnimElem = 5
pos = ceil(75*const(size.xscale)), ceil(-54*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = AnimElemTime(6) = 0
pos = ceil(111*const(size.xscale)), ceil(-75*const(size.yscale))
postype = P1
time = 1

[State 901]
type = TargetLifeAdd
trigger1 = AnimElemTime(6) = 0
value = ceil(ifelse(var(5)=1,-111,-222)*var(52)/3) ;70 ;7f ;80

[State 901]
type = TargetState
triggerall = var(5) = 1
trigger1 = AnimElemTime(6) = 1
value = 930

[State 901, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;背負い投げ（相手）
[Statedef 905]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 1201]
type = screenbound
trigger1 = AnimElemTime(6) <= 1
value = 1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 915

[State 903]
type = VelSet
trigger1 = AnimElemTime(6) = 1
x = -5.2
y = -4.9

[State 903]
type = veladd
trigger1 = AnimElemTime(6) >= 2
y = .51

[State 1300]
type = Turn
trigger1 = AnimElemTime(6) > 2
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10

[State 903, 2]
type = SelfState
trigger1 = AnimElemTime(6) > 5
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10
value = 5100

;---------------------------------------------------------------------------
;背負い投げ（相手）2
[Statedef 906]
type    = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 120]
type = selfstate
trigger1 = Time > 5
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;巴投げ
[Statedef 911]
type    = S
movetype = A
physics = N
velset = 0,0

[State 901]
type = TargetState
trigger1 = Time = 0
value = 915

[State 820]
type = ChangeAnim
trigger1 = Time = 0
value = 920
persistent = 0

[State 100]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 100]
type = VarSet
triggerall = !var(5) && time < 6
trigger1 = (enemynear,Command = "holdfwd") || (enemynear,Command = "holdback")
trigger1 = (enemynear,Command = "x") || (enemynear,Command = "y") || (enemynear,Command = "z") || (enemynear,Command = "a") || (enemynear,Command = "b") || (enemynear,Command = "c")
trigger2 = (enemynear,Command = "x") && (enemynear,Command = "a")
var(5) = 1

[State 1201, 2]
type = Playerpush
trigger1 = 1
value = 0

[State 3001]
type = Width
trigger1 = animelemtime(1) >= 0 && animelemtime(2) < 0
edge = 0,40

[State 300]
type = Width
trigger1 = AnimElemTime(2) >= 0 && animelemtime(3) < 0
edge = 30,0

[State 300]
type = Width
trigger1 = AnimElemTime(3) >= 0 && animelemtime(4) < 0
edge = 60,0

[State 300]
type = Width
trigger1 = animelemtime(4) >= 0 && animelemtime(6) < 0
edge = 110,0

[State 100]
type = Width
trigger1 = AnimElemTime(6) >= 0
edge = 130,0

[State 90]
type = PlaySnd
trigger1 = AnimElem = 6
value = 100, 2
channel = 0

[State 901,1]
type = targetBind
trigger1 = animelem = 1
pos = ceil(-37*const(size.xscale)),0
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 2
pos = ceil(-32*const(size.xscale)),ceil(-61*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 3
pos = ceil(51*const(size.xscale)),ceil(-64*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = AnimElem = 4
pos = ceil(117*const(size.xscale)),ceil(-36*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = AnimElem = 5
pos = ceil(128*const(size.xscale)), ceil(-47*const(size.yscale))
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = AnimElemTime(6) = 0
pos = ceil(160*const(size.xscale)), ceil(-80*const(size.yscale))
postype = P1
time = 1

[State 901]
type = TargetLifeAdd
trigger1 = AnimElemTime(6) = 0
value = ceil(ifelse(var(5)=1,-111,-222)*var(52)/3) ;70 ;7f ;80

[State 901]
type = TargetState
triggerall = var(5) = 1
trigger1 = AnimElemTime(6) = 1
value = 930

[State 901]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;巴投げ（相手）
[Statedef 915]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 120]
type = screenbound
trigger1 = AnimElemTime(6) <= 0
value = 1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 925

[State 903]
type = VelSet
trigger1 = AnimElemTime(6) = 1
x = -4.6
y = -5

[State 903]
type = veladd
trigger1 = AnimElemTime(6) >= 2
y = .5

[State 130]
type = Turn
trigger1 = AnimElemTime(6) > 2
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10

[State 903, 2]
type = SelfState
trigger1 = AnimElemTime(6) > 5
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10
value = 5100

;---------------------------------------------------------------------------
;巴投げ（相手）2
[Statedef 916]
type    = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 120]
type = selfstate
trigger1 = Time > 5
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;投げ抜け（相手）
[Statedef 930]
type    = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 930

[State 903]
type = posadd
trigger1 = time = 0
x = 20
y = 40

[State 903]
type = VelSet
trigger1 = time = 0
x = -2.5
y = -8

[State 903]
type = veladd
trigger1 = time >= 1
y = .49

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 903, 2]
type = SelfState
trigger1 = alive = 0
trigger1 = anim = 930
trigger1 = animtime = 0
value = 5050

[State 902, 1]
type = ChangeAnim
trigger1 = anim = 930
trigger1 = animtime = 0
value = 5040

[State 903, 2]
type = SelfState
trigger1 = time > 5
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;昇龍拳
[Statedef 1000]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
juggle  = 8
poweradd = 438

[State 1000]
type = VarSet
trigger1 = Time = 0
var(6) = ifelse(Command = "shoryu1", 0, ifelse(Command = "shoryu2", 1, 2))

[State 1000]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(6), 1000, ifelse(var(6) = 1, 1010, 1020))

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000]
type = Width
trigger1 = 1
edge = 20,0

[state 300]
type = StatetypeSet
trigger1 = AnimElemTime(3) = 1
value = A
physics = N

[State 300]
type = PlaySnd
trigger1 =  AnimElem = 1
value = 100,3
channel = 0

[State 170, 1]
type = NotHitBy
trigger1 = AnimElemTime(3) < 0
value = SCA

[State 170, 1]
type = NotHitBy
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(3) <= 8
value = ,AP,NA

[State 1000]
type = VelSet
trigger1 = AnimElemTime(3) = 1
x = ifelse(!var(6), 3, ifelse(var(6) = 1, 5.25, 7.5))
y = ifelse(!var(6), -8, ifelse(var(6) = 1, -10.2, -12.3))

[State 1000]
type = Veladd
trigger1 = AnimElemTime(3) >= 1
y = ifelse(!var(6), .65, ifelse(var(6) = 1, .63, .61))

[State 1000]
type = VelMul
trigger1 = AnimElemTime(3) >= 1+var(6)
x = .9

[State 1000]
type = Velset
trigger1 = AnimElem = 4
x = 0

[State 1000]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(ifelse(!var(6),187,ifelse(var(6)=1,208,229))*var(52)/3),ceil(14*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 11,10
sparkno = S4050
guard.sparkno = S4050
sparkxy = -5, -55
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2.3,-8.5
guard.velocity = -10
air.velocity = -2.3,-8.5
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = -11*const(size.xscale)
guard.cornerpush.veloff = -11
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -10*const(size.xscale)
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 0,0
;envshake.time = 8
;envshake.ampl = 2
forcestand = 1

[State 1000]
type = HitDef
triggerall = var(3) != 1
trigger1 = AnimElem = 3
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(132*var(52)/3),ceil(14*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 11,10
sparkno = S4050
guard.sparkno = S4050
sparkxy = 5, -91
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2.3,-8.5
guard.velocity = -10
air.velocity = -2.3,-8.5
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = -11*const(size.xscale)
guard.cornerpush.veloff = -11
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -10*const(size.xscale)
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 0,0
;envshake.time = 8
;envshake.ampl = 2
forcestand = 1

[State 70]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1005

;---------------------------------------------------------------------------
;着地state
[Statedef 1005]
type = S
movetype = I
physics = S
anim = 1030
ctrl = 1
velset = 0,0

[State 40]
type = PlaySnd
trigger1 = time = 0
value = 4, 0

[State 80]
type = PosSet
trigger1 = time = 0
y = 0

[State 90]
type = Changestate
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;昇龍拳(evil)
[Statedef 1020]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
juggle  = 8
poweradd = 438

[State 1000]
type = VarSet
trigger1 = Time = 0
var(6) = ifelse(Command = "shoryu1", 0, ifelse(Command = "shoryu2", 1, 2))

[State 1000]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(6), 1050, ifelse(var(6) = 1, 1060, 1070))

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000]
type = Width
trigger1 = 1
edge = 20,0

[state 300]
type = StatetypeSet
trigger1 = AnimElemTime(3) = 1
value = A
physics = N

[State 300]
type = PlaySnd
trigger1 =  AnimElem = 1
value = 100,3
channel = 0

[State 170, 1]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
value = SCA

[State 1000]
type = VelSet
trigger1 = AnimElemTime(3) = 1
x = ifelse(!var(6), 3, ifelse(var(6) = 1, 5.25, 7.5))
y = ifelse(!var(6), -8, ifelse(var(6) = 1, -10.2, -12.3))

[State 1000]
type = Veladd
trigger1 = AnimElemTime(3) >= 1
y = ifelse(!var(6), .65, ifelse(var(6) = 1, .63, .6))

[State 1000]
type = VelMul
trigger1 = AnimElemTime(3) >= 1+var(6)
x = .9

[State 1000]
type = Velset
trigger1 = !Var(6)
trigger1 = AnimElemTime(3) = 9
trigger2 = Var(6) = 1
trigger2 = AnimElemTime(3) = 12
trigger3 = Var(6) = 2
trigger3 = AnimElemTime(3) = 17
x = 0

[State 1000]
type = HitDef
trigger1 = AnimElemTime(1) = 1
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(187*var(52)/3),ceil(49*var(52)/3) ;75-68-5c ,89-87 -imp
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 11,10
sparkno = S4050
guard.sparkno = S4050
sparkxy = -3, -55
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2*const(size.xscale),-11
guard.velocity = -10
air.velocity = -2*const(size.xscale),-11
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = -11*const(size.xscale)
guard.cornerpush.veloff = -11
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -10*const(size.xscale)
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 0,0
;envshake.time = 8
;envshake.ampl = 2
forcestand = 1

[State 1000]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(76*var(52)/3),ceil(14*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 11,10
sparkno = S4050
guard.sparkno = S4050
sparkxy = -5, -55
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -1.8*const(size.xscale),-11
guard.velocity = -10
air.velocity = -1.8*const(size.xscale),-9.75
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = -11*const(size.xscale)
guard.cornerpush.veloff = -11
air.cornerpush.veloff = -11*const(size.xscale)
airguard.cornerpush.veloff = -10*const(size.xscale)
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 0,0
;envshake.time = 8
;envshake.ampl = 2
forcestand = 1

[State 1000]
type = HitDef
trigger1 = AnimElem = 3
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(83*var(52)/3),ceil(14*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 11,10
sparkno = S4050
guard.sparkno = S4050
sparkxy = 5, -91
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2.3,-10
guard.velocity = -10
air.velocity = -2.3,-8.5
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = -11*const(size.xscale)
guard.cornerpush.veloff = -11
air.cornerpush.veloff = ifelse(!var(6),-11,0)*const(size.xscale)
airguard.cornerpush.veloff = -10*const(size.xscale)
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0,0
givepower = 0,0
;envshake.time = 8
;envshake.ampl = 2
forcestand = 1

[State 70]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1005

;---------------------------------------------------------------------------
;竜巻
[Statedef 1100]
type     = A
movetype = A
physics  = N
velset = 0,0
ctrl = 0
juggle  = 8
poweradd = 375

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000]
type = Width
trigger1 = 1
edge = ceil(25*const(size.xscale)), 0

[State 110]
type = VarSet
trigger1 = Time = 0
var(6) = ifelse(Command = "tatsumaki1", 0, ifelse(Command = "tatsumaki2", 1, 2))

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(6), 1100, ifelse(var(6) = 1, 1110, 1120))

[State 1100]
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = var(6) && AnimElem = 10
trigger3 = var(6) && AnimElem = 14
trigger4 = var(6) = 2 && AnimElem = 18
trigger5 = var(6) = 2 && AnimElem = 22
value = 0,2
channel = 7

[State 1100]
type = PlaySnd
trigger1 = time = 0
value = 100,0
channel = 0

[State 1100]
type = VelSet
trigger1 = time = 1
x = ifelse(!var(6),3.4,ifelse(var(6)=1,4,4.8))
y = -4.4

[State 1100]
type = VelMul
trigger1 = !var(6) && AnimElemTime(8) >= 0
trigger2 = var(6) = 1 && AnimElemTime(20) >= 0
trigger3 = var(6) = 2 && AnimElemTime(24) >= 0
x = .96

[State 1100]
type = VelSet
trigger1 = AnimElem = 4
y = 0

[State 1100]
type = Veladd
triggerall = time > 1
trigger1 = AnimElemTime(4) < 0
trigger2 = !var(6) && AnimElemTime(8) >= 0
trigger3 = var(6) = 1 && AnimElemTime(20) >= 0
trigger4 = var(6) = 2 && AnimElemTime(24) >= 0
y = .44

[State 1100]
type = HitDef
;triggerall = var(3) != 1
trigger1 = AnimElem = 4
trigger2 = AnimElem = 8
trigger3 = AnimElem = 12
trigger4 = AnimElem = 16
trigger5 = AnimElem = 20
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(153*var(52)/3),ceil(14*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 13,13
sparkno = S4020
guard.sparkno = S4020
sparkxy = -2, -63
hitsound   = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2.5,-7
guard.velocity = -15*const(size.xscale)
air.velocity = -2.5,-7
airguard.velocity = -8.5*const(size.xscale),-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -20
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
;air.recover = 0
yaccel = .48
persistent = 1
getpower = 0,0
givepower = 0,0
forcestand = 1

[State 1100]
type = HitDef
;triggerall = var(3) != 1
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
trigger3 = AnimElem = 14
trigger4 = AnimElem = 18
trigger5 = AnimElem = 22
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(153*var(52)/3),ceil(14*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 13,13
sparkno = S4020
guard.sparkno = S4020
sparkxy = -2, -63
hitsound   = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = 2.5,-7
guard.velocity = 15*const(size.xscale)
air.velocity = 2.5,-7
airguard.velocity = 8.5*const(size.xscale),-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
;air.recover = 0
yaccel = .48
persistent = 1
getpower = 0,0
givepower = 0,0
forcestand = 1

[State 1100]
type = ChangeState
trigger1 = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1105

;---------------------------------------------------------------------------
;（着地）
[Statedef 1105]
type    = S
physics = S
ctrl = 0
anim = 1150
velset = 0,0

[State 50]
type = PosSet
trigger1 = Time = 0
y = 0

[State 50]
type = CtrlSet
trigger1 = Time = 2
trigger1 = command = "holddown"
trigger2 = Time = 0
trigger2 = command = "holdfwd"
trigger3 = var(59)
trigger3 = time = 1
value = 1

[State 50]
type = PlaySnd
trigger1 = Time = 0
value = 4, 0

[State 50]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;竜巻(evil)
[Statedef 1120]
type     = A
movetype = A
physics  = N
velset = 0,0
ctrl = 0
juggle  = 8
poweradd = 375

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 170, 1]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
value = SCA

[State 1000]
type = Width
trigger1 = 1
edge = ceil(25*const(size.xscale)), 0

[State 110]
type = VarSet
trigger1 = Time = 0
var(6) = ifelse(Command = "tatsumaki1", 0, ifelse(Command = "tatsumaki2", 1, 2))

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(6), 1160, ifelse(var(6) = 1, 1170, 1180))

[State 1100]
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = var(6) && AnimElem = 10
trigger3 = var(6) = 2 && AnimElem = 14
value = 0,2
channel = 7

[State 1100]
type = PlaySnd
trigger1 = time = 0
value = 100,0
channel = 0

[State 1100]
type = VelSet
trigger1 = time = 1
x = ifelse(!var(6),3.4,ifelse(var(6)=1,4,4.8))
y = -4.4

[State 1100]
type = VelMul
trigger1 = !var(6) && AnimElemTime(8) >= 0
trigger2 = var(6) = 1 && AnimElemTime(12) >= 0
trigger3 = var(6) = 2 && AnimElemTime(16) >= 0
x = .96

[State 1100]
type = VelSet
trigger1 = AnimElem = 4
y = 0

[State 1100]
type = Veladd
triggerall = time > 1
trigger1 = AnimElemTime(4) < 0
trigger2 = !var(6) && AnimElemTime(8) >= 0
trigger3 = var(6) = 1 && AnimElemTime(12) >= 0
trigger4 = var(6) = 2 && AnimElemTime(16) >= 0
y = .44

[State 1100]
type = HitDef
trigger1 = Var(6)
trigger1 = AnimElemTime(1) = 1
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage = ceil(76*var(52)/3),ceil(14*var(52)/3) ; 85,8E,8c
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 11,12
sparkno = S4020
guard.sparkno = S4020
sparkxy = -10, -48
hitsound   = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -5,-8.5
guard.velocity = -15*const(size.xscale)
air.velocity = -2.5,-7.6
airguard.velocity = -5,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -24.5
envshake.time = 10
envshake.ampl = 3
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
;air.recover = 0
yaccel = .48
persistent = 0
getpower = 0,0
givepower = 0,0
forcestand = 1

[State 1100]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 8
trigger3 = AnimElem = 12
trigger4 = AnimElem = 16
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(76*var(52)/3),ceil(14*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 13,13
sparkno = S4020
guard.sparkno = S4020
sparkxy = -2, -63
hitsound   = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2.5,-6
guard.velocity = -15*const(size.xscale)
air.velocity = -2.5,-8.4
airguard.velocity = -8.5*const(size.xscale),-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -20
envshake.time = 10
envshake.ampl = 3
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
;air.recover = 0
yaccel = .51
persistent = 1
getpower = 0,0
givepower = 0,0
forcestand = 1

[State 1100]
type = HitDef
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
trigger3 = AnimElem = 14
trigger4 = AnimElem = 18
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(76*var(52)/3),ceil(14*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 13,13
sparkno = S4020
guard.sparkno = S4020
sparkxy = -2, -63
hitsound   = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = 2.5,-6
guard.velocity = 15*const(size.xscale)
air.velocity = 2.5,-8.4
airguard.velocity = 8.5*const(size.xscale),-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
;air.recover = 0
yaccel = .51
persistent = 1
getpower = 0,0
givepower = 0,0
forcestand = 1

[State 1100]
type = ChangeState
trigger1 = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1105

;---------------------------------------------------------------------------
;波動拳
[Statedef 1200]
type    = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
poweradd = 125

[State 220]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 1000]
type = Width
trigger1 = 1
edge = ceil(50*const(size.xscale)), 0

[State 1000]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse(Command = "hadou1", 0, ifelse(Command = "hadou2", 1, 2))

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 1200

[State 1000]
type = PlaySnd
trigger1 = AnimElem = 3
value = 100, 1
channel = 0

[State 1000]
type = PlaySnd
trigger1 = AnimElem = 4
value = 150,0

[State -3]
type = Helper
trigger1 = AnimElem = 4
id = 6100
name = "hadouken"
pos = ceil(93*const(size.xscale)),ceil(-56*const(size.yscale))
postype = P1
stateno = 6100
helpertype = normal
keyctrl = 0
ownpal = 1
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 1000]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;波動拳（飛び道具）
[Statedef 6100]
type    = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
anim = 6100+(parent,var(6))*10
sprpriority = 4

[State 300]
type = VarSet
trigger1 = time = 0
var(6) = parent,var(6)

[State 300]
type = VarSet
trigger1 = time = 0
var(52) = parent,var(52)

[State 900]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 300]
type = VarSet
trigger1 = time = 0
var(53) = parent,var(53)

[State 1005]
type = varadd
trigger1 = time && var(1) < 25
var(1) = 1

[State 110]
type = VelSet
trigger1 = time = 1
x = 3.51 + (var(6)*1.3)

[State 100]
type = null;Projectile
trigger1 = time = 1
projanim = 6050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projremovetime = -1 ;21
projedgebound = 55
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
ProjID = 1000
attr = S, SP
damage= ceil(125*var(52)/3),ceil(21*var(52)/3) ;7e,8d ;82,8e
;80 7f 7d(118)
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = 0, 0
hitsound = S1,2
guardsound = S3,0
ground.type = High
ground.slidetime = 19
ground.hittime = 19
air.hittime = 19
guard.ctrltime = 19
ground.velocity = -4,-5.5
guard.velocity = -10
air.velocity = -4, -5.5
airguard.velocity = -6.3,-1
air.juggle = 8
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
getpower = 0,0
givepower = 0,0 ;03
forcestand = 1
nochainID = 0
yaccel = .5

[State 100]
type = Projectile
;trigger1 = var(6) = 2
;trigger1 = time = 23
;trigger2 = var(6) != 2
trigger1 = time = 1
projanim = 6050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projremovetime = -1
projedgebound = 55
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
ProjID = 1000
attr = S, SP
damage= ceil(125*var(52)/3),ceil(21*var(52)/3) ;7e,8d ;82,8e
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = 0, 0
hitsound = S1,2
guardsound = S3,0
ground.type = High
ground.slidetime = 19
ground.hittime = 19
air.hittime = 19
guard.ctrltime = 19
ground.velocity = -12,0
guard.velocity = -10
air.velocity = -4, -5.5
airguard.velocity = -6.3,-1
air.juggle = 8
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
getpower = 0,0
givepower = 0,0  ;03
nochainID = 0
yaccel = .5

[State 300]
type = VarSet
trigger1 = root,ProjContactTime(1000) = 1
ignorehitpause = 1
var(2) = 1

[State 411]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -52 && !var(2)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(1000)
value = 6150

;---------------------------------------------------------------------------
;波動拳（飛び道具）（消滅）
[Statedef 6150]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 6150

[State 300]
type = VarSet
trigger1 = time = 0
var(2) = 0

[State 900]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 411]
type = null;PosAdd
trigger1 = time = 1
trigger1 = P2dist X < -22
x = P2dist X + 22

[State 410]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;ファイヤー波動拳
[Statedef 1300]
type    = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
poweradd = 125
;z 04 09 ,06

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse(Command = "shakunetsu1", 0, ifelse(Command = "shakunetsu2", 1, 2))

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 1300

[State 1000]
type = Width
trigger1 = 1
edge = ceil(50*const(size.xscale)), 0

[State 1000]
type = PlaySnd
trigger1 = AnimElem = 4
value = 100, 1
channel = 0

[State 1000]
type = PlaySnd
trigger1 = AnimElem = 4
value = 150,0

[State -3]
type = Helper
trigger1 = AnimElem = 4
id = 6200
name = "shakunetsu"
pos = ceil(93*const(size.xscale)),ceil(-56*const(size.yscale))
postype = P1
stateno = 6200
helpertype = normal
keyctrl = 0
ownpal = 1
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 1000]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ファイヤー波動拳（飛び道具）
[Statedef 6200]
type    = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
anim = 6200+(parent,var(6))*10
sprpriority = 4

[State 9000]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(6) = parent,var(6)

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(52) = parent,var(52)

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(2) = 1

[State 102]
type = VarAdd
trigger1 = root,ProjContacttime(1100) = 2
trigger2 = root,ProjContacttime(1101) = 2
var(2) = 1
Persistent = 1
ignorehitpause=1

[State 110]
type = VelSet
trigger1 = time = 1
x = 3.51 + (var(6)*1.3)

[State 100]
type = Projectile
trigger1 = time = 1
projanim = 6050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projremovetime = ifelse(!var(6),9,ifelse(var(6)=1,8,6))
offset = 0, 0
projpriority = 1
projsprpriority = 4
projhits = 1
ProjID = 1100
velocity = vel X, vel Y
attr = S, SP
damage = ceil(118*var(52)/3),ceil(12*var(52)/3)
;7f(118)
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 0,12  ;8,13 ;s 7f
sparkno = -1;S4020
guard.sparkno = -1;S4020
sparkxy = -3, 0
hitsound = -1;S1,2
guardsound = -1;S3,0
ground.type = High
ground.slidetime = 16
ground.hittime = 16
air.hittime = 19
guard.ctrltime = 16
ground.velocity = -4,-5.5
guard.velocity = -10
air.velocity = -4, -5.5
airguard.velocity = -6.3,-1
air.juggle = 8
fall = 1
;fall.recover = 0
air.fall = 1
air.recover = 0
getpower = 0,0
givepower = 0,0 ;35, 35
palfx.color = 0
palfx.add = 120,-54,0
palfx.mul = 90,64,0
palfx.sinadd = -70,-70,0,5
palfx.time = ifelse(p2statetype = A ,45,36)
;forcestand = 1
yaccel = .5
nochainID = root,var(8)
Persistent = 0

[State 100]
type = Projectile
trigger1 = Time = ifelse(!var(6),11,ifelse(var(6)=1,10,8))
projanim = 6050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projremovetime = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
projhits = 1
ProjID = 1101
velocity = vel X, vel Y
attr = S, SP
damage = ceil(118*var(52)/3),ceil(12*var(52)/3)
;7f(118)
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 0,12  ;8,13 ;s 7f
sparkno = -1;S4020
guard.sparkno = -1;S4020
sparkxy = -3, 0
hitsound = -1;S1,2
guardsound = -1;S3,0
ground.type = High
ground.slidetime = 16
ground.hittime = 16
air.hittime = 16
guard.ctrltime = 16
ground.velocity = -6.5
guard.velocity = -9.5
air.velocity = -4.5, -6
airguard.velocity = -6.3,-1
air.juggle = 8
fall = 0
;fall.recover = 0
air.fall = 1
air.recover = 0
getpower = 0,0
givepower = 0,0 ;35, 35
palfx.color = 0
palfx.add = 120,-54,0
palfx.mul = 90,64,0
palfx.sinadd = -70,-70,0,5
palfx.time = ifelse(p2statetype = A ,45,25)
;forcestand = 1
yaccel = .5
nochainID = root,var(8)
Persistent = 0

[State 300]
type = VarSet
trigger1 = var(1) = 8
ignorehitpause = 1
var(1) = 0

[State 300]
type = VarSet
trigger1 = root,ProjContacttime(1100) = 1
trigger2 = root,ProjContacttime(1101) = 1
ignorehitpause = 1
var(1) = 1

[State 300]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 411]
type = PosFreeze
triggerall = time > 1
trigger1 = var(1)
trigger2 = root,ProjContact1100 = 1
trigger2 = P2dist X < -10
trigger3 = root,ProjContact1101 = 1
trigger3 = P2dist X < -10
value = 1
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim
trigger1 = var(1)
trigger1 = animelem = 1
value = 6260
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim
trigger1 = var(1)
trigger1 = animelem = 2
value = 6261
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim
trigger1 = var(1)
trigger1 = animelem = 3
value = 6262
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim
trigger1 = anim = [6260,6262]
trigger1 = animtime = 0
value = 6200+var(6)*10
elem = ifelse(anim=6260,1,ifelse(anim=6261,2,3))
ignorehitpause = 1

[State 411]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -55 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(1100) && !root,NumProjID(1101)
value = 6205

;---------------------------------------------------------------------------
;ファイヤー波動拳（飛び道具）（消滅）
[Statedef 6205]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 6250

[State 300]
type = VarSet
trigger1 = var(1)
var(1) = 0

[State 9000]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 411]
type = null;PosAdd
trigger1 = time = 1
trigger1 = P2dist X < -22
x = P2dist X + 22

[State 411]
type = DestroySelf
trigger1 = animtime = 0

;------------------------------------------------------------------------------------------
;空中竜巻斬空脚
[Statedef 1500]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
poweradd = 375

[State 110]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse(Command = "tatsumaki1", 0, ifelse(Command = "tatsumaki2", 1, 2))

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(6), 1500, ifelse(var(6) = 1, 1510, 1520))

[State 1000]
type = Width
trigger1 = 1
edge = ceil(25*const(size.xscale)),ceil(15*const(size.xscale))

[State 1100]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,0
channel = 0

[State 1100]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = var(6) && AnimElem = 7
trigger3 = var(6) = 2 && AnimElem = 11
value = 0,2
channel = 7

[State 1100]
type = StopSnd
trigger1 = time >= 1
trigger1 = movetype = A
trigger1 = Pos Y >= -1 && Vel Y > 0
channel = 0

[State 1050]
type = VelAdd
trigger1 = AnimElem = 1
x = ifelse(Vel X = 0, 1.5, ifelse(Vel X > 0 ,1.6+(var(6)*.4), -1.6-(var(6)*.4)))
y = ifelse(Vel Y <= 0, -var(6)*.2, (4+var(6))*.2)

[State 1310, 3]
type = VelAdd
trigger1 = Time >= 0
y = ifelse(movetype = A, 0.3 ,0.4)

[State 105, 1]
type = statetypeset
trigger1 = !var(6)
trigger1 = AnimElem = 7
trigger2 = var(6) = 1
trigger2 = AnimElem = 10
trigger3 = var(6) = 2
trigger3 = AnimElem = 14
movetype = I

[State 1100]
type = HitDef
;triggerall = var(3) != 1
trigger1 = AnimElemTime(1) = 1
trigger2 = AnimElem = 5
trigger3 = AnimElem = 9
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(118*var(52)/3),ceil(14*var(52)/3)
;82 7f 7d
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 13,13
sparkno = S4020
guard.sparkno = S4020
sparkxy = -2, -63
hitsound   = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2.5,-7
guard.velocity = -15*const(size.xscale)
air.velocity = -2.5,-7
airguard.velocity = -8.5,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -20*const(size.xscale)
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .51
persistent = 1
getpower = 0,0 ;100
givepower = 0,0;35, 35
forcestand = 1

[State 1100]
type = HitDef
;triggerall = var(3) != 1
trigger1 = AnimElem = 3
trigger2 = AnimElem = 7
trigger3 = AnimElem = 11
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(118*var(52)/3),ceil(14*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 13,13
sparkno = S4020
guard.sparkno = S4020
sparkxy = -2, -63
hitsound   = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = 2.5,-7
guard.velocity = 15*const(size.xscale)
air.velocity = 2.5,-7
airguard.velocity = 8.5,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .51
persistent = 1
getpower = 0,0 ;100
givepower = 0,0 ;35, 35
forcestand = 1

[State 1100]
type = ChangeState
trigger1 = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1505

;---------------------------------------------------------------------------
;空中竜巻斬空脚（着地）
[Statedef 1505]
type    = S
physics = S
ctrl = 0
anim = 1530
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 50]
type = CtrlSet
trigger1 = Time = 2
trigger1 = command = "holddown"
trigger2 = Time = 0
trigger2 = command = "holdfwd"
trigger3 = var(59)
trigger3 = time = 1
value = 1

[State 52]
type = PlaySnd
trigger1 = Time = 0
value = 4, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;空中竜巻斬空脚(evil)
[Statedef 1520]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
poweradd = 375

[State 110]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(6) = ifelse(Command = "tatsumaki1", 0, ifelse(Command = "tatsumaki2", 1, 2))

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(6), 1500, ifelse(var(6) = 1, 1510, 1520))

[State 1000]
type = Width
trigger1 = 1
edge = ceil(25*const(size.xscale)),ceil(15*const(size.xscale))

[State 1100]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,0
channel = 0

[State 1100]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = var(6) && AnimElem = 7
trigger3 = var(6) = 2 && AnimElem = 11
value = 0,2
channel = 7

[State 1100]
type = StopSnd
trigger1 = time >= 1
trigger1 = movetype = A
trigger1 = Pos Y >= -1 && Vel Y > 0
channel = 0

[State 1050]
type = VelAdd
trigger1 = AnimElem = 1
x = ifelse(Vel X = 0, 1.5, ifelse(Vel X > 0 ,3, -3))
y = ifelse(Vel Y <= 0, (-5-var(6))*.4, (5+var(6))*.2)

[State 1310, 3]
type = VelAdd
trigger1 = Time >= 0
y = 0.4

[State 105, 1]
type = statetypeset
trigger1 = !var(6)
trigger1 = AnimElem = 6
trigger2 = var(6) = 1
trigger2 = AnimElem = 10
trigger3 = var(6) = 2
trigger3 = AnimElem = 14
movetype = I

[State 1100]
type = HitDef
trigger1 = AnimElemTime(1) = 1
trigger2 = AnimElem = 5
trigger3 = AnimElem = 9
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(76*var(52)/3),ceil(14*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 13,13
sparkno = S4020
guard.sparkno = S4020
sparkxy = -2, -63
hitsound   = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2.5,-7
guard.velocity = -15*const(size.xscale)
air.velocity = -2.5,-7
airguard.velocity = -8.5,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20*const(size.xscale)
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -20*const(size.xscale)
envshake.time = 10
envshake.ampl = 3
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .51
persistent = 1
getpower = 0,0 ;100
givepower = 0,0;35, 35
forcestand = 1

[State 1100]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 7
trigger3 = AnimElem = 11
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage= ceil(76*var(52)/3),ceil(14*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 13,13
sparkno = S4020
guard.sparkno = S4020
sparkxy = -2, -63
hitsound   = S2,2
guardsound = S3,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = 2.5,-7
guard.velocity = 15*const(size.xscale)
air.velocity = 2.5,-7
airguard.velocity = 8.5,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
nochainID = var(8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .51
persistent = 1
getpower = 0,0 ;100
givepower = 0,0 ;35, 35
forcestand = 1

[State 1100]
type = ChangeState
trigger1 = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1505

;---------------------------------------------------------------------------
;阿修羅旋空
[Statedef 1600]
type    = S
movetype= A
physics = N
anim = 1600
ctrl = 0
velset = 0,0

[State 1100]
type = VarSet
trigger1 = time = 0
var(6) = ifelse(Command = "ashura_P_F", 0, ifelse(Command = "ashura_P_B", 1, ifelse(Command = "ashura_K_F", 2, 3)))

[State 1020]
type = AfterImage
trigger1 = Time = 1
time = 999
palpostbright= 0,0,0
PalBright   =  1,1,1 
PalContrast =  136, 192, 192
PalAdd      = 0,0,0
PalMul      = .75,.75,.75
;Trans = Add
;TimeGap  = 2
FrameGap = 3
length = 11

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 300]
type = PlaySnd
trigger1 = time = 6
value = 5,0

[State 120]
type = ChangeState
Trigger1 = animtime = 0
value = 1602

;---------------------------------------------------------------------------
;阿修羅閃空（移動）
[Statedef 1602]
type = S
movetype = I
physics = N
anim = 1602
ctrl = 0
juggle = 0

[State 130]
type = VelSet
trigger1 = Time = 0
x = ifelse(!var(6), 8.2, ifelse(var(6) = 1, -8.2, ifelse(var(6) = 2, 6.1, -6.1)))
y = 0

[State 130]
type = VelAdd
triggerall = AnimElemTime(1) > 0
trigger1 = var(6) = [2,3]
trigger1 = Time <= 25
x =  ifelse(Vel X > 0, -.09, .09)

[State 130]
type = PosAdd
triggerall = AnimElemTime(1) > 0
trigger1 = var(6) = [2,3]
trigger1 = Time <= 18 && Time%3 = 1
trigger2 = var(6) = [0,1]
trigger2 = Time <= 30 && Time%3 = 1
x = ifelse(Vel X > 0, 1, -1)*floor(abs(Vel X))

[State 130]
type = VelAdd
triggerall = AnimElemTime(1) > 0
trigger1 = var(6) = [0,1]
trigger1 = Time = [10,36]
x = ifelse(Vel X > 0, -.223, .223)

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 130]
type = PlayerPush
trigger1 = 1
value = 0

[State 130]
type = Turn
trigger1 = P2Dist X < -5

[State 130]
type = VelSet
Trigger1 = (Time = 36 && var(6) = [0,1]) || (Time = 25 && var(6) = [2,3])
x = 0

[State 120]
type = ChangeState
Trigger1 = (Time = 39 && var(6) = [0,1]) || (Time = 28 && var(6) = [2,3])
Trigger2 = frontedgedist <= 1 && animelemtime(1) > 0
Trigger3 = backedgedist <= 1 && animelemtime(1) > 0
value = 1605

;---------------------------------------------------------------------------
;阿修羅閃空（停止）
[Statedef 1605]
type = S
movetype = A
physics = S
anim = 1605
juggle = 0
velset = 0,0
ctrl = 0

[State 1020]
type = AfterImage
trigger1 = AnimTime = -1
time = 0
;PalBright   =  30, 30,  0
;PalContrast =  70, 70, 20
;PalAdd      = -10,-10,-10
;PalMul      = .85,.85,.50
;Trans = Add
;TimeGap  = 3
FrameGap = 3
length = 11

[State 52]
type = PlaySnd
trigger1 = Time = 0
value = 4, 0

[State 120]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;target state
;---------------------------------------------------------------------------
; 灼熱 stand
[Statedef 2000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Invisible

[State 5000, 6]
type = ChangeState
trigger1 = alive = 0
value = 2020

[State 5001, 6]
type = SelfState
trigger1 = time >= 120
value = 5100

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = A

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 2001 ;HITG_SLIDE

[State 5000, 7]
type = SelfState
trigger1 = HitShakeOver
value = 5030

;---------------------------------------------------------------------------
; 
[Statedef 2001]
type    = S
movetype= H
physics = S

[State 190, 2]
type = AssertSpecial
trigger1 = !HitOver
flag = Invisible

[State 5000, 6]
type = ChangeState
trigger1 = alive = 0
value = 2020

[State 5001, 6]
type = SelfState
trigger1 = time >= 120
value = 5100

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 灼熱 crouch
[Statedef 2010]
type    = C
movetype= H
physics = N
velset = 0,0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Invisible

[State 5000, 6]
type = ChangeState
trigger1 = alive = 0
value = 2020

[State 5001, 6]
type = SelfState
trigger1 = time >= 120
value = 5100

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
triggerall = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 2011 ;HITC_SLIDE

[State 5010, 7]
type = SelfState
trigger1 = HitShakeOver
value = 5030

;---------------------------------------------------------------------------
; 
[Statedef 2011]
type    = C
movetype= H
physics = C

[State 190, 2]
type = AssertSpecial
trigger1 = !HitOver
flag = Invisible

[State 5000, 6]
type = ChangeState
trigger1 = alive = 0
value = 2020

[State 5001, 6]
type = SelfState
trigger1 = time >= 120
value = 5100

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011, 6]
type = SelfState
trigger1 = HitOver
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; 灼熱 air
[Statedef 2020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Invisible

[State 5001, 6]
type = PosSet
trigger1 = time >= 120
y = 0

[State 5001, 6]
type = SelfState
trigger1 = time >= 120
value = 5100

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 2021

;---------------------------------------------------------------------------
;
[Statedef 2021]
type    = A
movetype= H
physics = N
ctrl = 0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Invisible

[State 5001, 6]
type = PosSet
trigger1 = time >= 120
y = 0

[State 5001, 6]
type = SelfState
trigger1 = time >= 120
value = 5100

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 4]
type = SelfState
;triggerall = HitFall
triggerall = time > 5  ;HitOver
trigger1 = Vel Y > 0    ;Hit ground
trigger1 = Pos Y >= 0  ;
value = 5100 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 2050]
type    = A
movetype = H
physics = N

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 5040, 1]
type = SelfState
trigger1 = time = 0
value = 5040

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;真空波動拳
[Statedef 3000]
type    = S
movetype = A
physics = S
juggle = 0
ctrl = 0
anim = 3000
velset = 0,0
poweradd = -3000

[State 1000]
type = Width
trigger1 = 1
edge = (50*const(size.xscale)), 0

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 170, 1]
type = NotHitBy
trigger1 = AnimElemTime(4) <= 1
value = SCA
time = 1

[State 110]
type = PlaySnd
trigger1 = time = 7
value = 210,0

[State 300]
type = SuperPause
trigger1 = Time = 7
time = 14
movetime = 14
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 300]
type = Helper
trigger1 = Time = 8
id = 8000
name = "Super"
pos = 0,ceil(-53*const(size.yscale))
postype = P1
stateno = 8000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 200]
type = AfterImage
trigger1 = time = 0
time = 40
trans = none
length = 15
framegap = 4
palcolor = 0
;palinvertall = 0
palbright = 1,1,1
palpostbright = -32,-16,170
palcontrast = 176,176,8
PalAdd = 0,0,0
PalMul = .50, .50, .68

[State 200]
type = null;AfterImage
trigger1 = time = 0
time = 40
trans = none
length = 15
framegap = 4
palcolor = 0
palinvertall = 0
palcontrast = 110,110,190
PalMul = .75, .75, .75

[State 1000]
type = PlaySnd
trigger1 = AnimElem = 4
value = 150,0
channel = 1

[State 1000]
type = PlaySnd
trigger1 = AnimElemTime(3) = 14
value = 100, 1
channel = 0

[State -3]
type = Helper
trigger1 = AnimElem = 4
id = 6700
name = "s_hadouken"
pos = ceil(93*const(size.xscale)),ceil(-56*const(size.yscale))
postype = P1
stateno = 6700
helpertype = normal
keyctrl = 0
ownpal = 1
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 100]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;滅殺豪波動(evil)
[Statedef 3010]
type    = S
movetype = A
physics = S
juggle = 0
ctrl = 0
anim = 3010
velset = 0,0
poweradd = -3000

[State 1000]
type = Width
trigger1 = 1
edge = (50*const(size.xscale)), 0

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 170, 1]
type = NotHitBy
trigger1 = AnimElemTime(4) <= 1
value = SCA
time = 1

[State 110]
type = PlaySnd
trigger1 = time = 4
value = 210,0

[State 300]
type = SuperPause
trigger1 = Time = 4
time = 14
movetime = 14
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 300]
type = Helper
trigger1 = Time = 5
id = 8000
name = "Super"
pos = 0,ceil(-53*const(size.yscale))
postype = P1
stateno = 8000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 1020]
type = AfterImage
trigger1 = Time = 0
time = 40
palpostbright = 0,0,0
PalBright   =  1,1,1
PalContrast =  136, 192, 192
PalAdd      = 0,0,0
PalMul      = .75,.75,.75
;Trans = Add
FrameGap = 3
length = 11

[State 1000]
type = PlaySnd
trigger1 = AnimElem = 4
value = 150,0

[State 1000]
type = PlaySnd
trigger1 = AnimElemTime(3) = 12
value = 100, 1
channel = 0

[State -3]
type = Helper
trigger1 = AnimElem = 4
id = 6700
name = "s_hadouken"
pos = ceil(93*const(size.xscale)),ceil(-56*const(size.yscale))
postype = P1
stateno = 6700
helpertype = normal
keyctrl = 0
ownpal = 1
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 100]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;真空波動拳(滅殺豪波動)（飛び道具）
[Statedef 6700]
type    = S
movetype = A
physics = N
ctrl = 0
anim = 6700
velset = 0,0
sprpriority = 4

[State 900]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(6) = parent,var(6)

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(52) = parent,var(52)

[State 300]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(2) = 1

[State 300]
type = varadd
trigger1 = root,ProjContacttime(1500) = 2
ignorehitpause = 1
Persistent = 1
var(2) = 1

[State 1100]
type = VelSet
trigger1 = time = 1
x = 6

[State 100]
type = Projectile
trigger1 = time = 1
projanim = 6050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projremovetime = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
projhits = 5
projmisstime = 1
projstagebound = 50
projedgebound = 50
ProjID = 1500
velocity = vel X, vel Y
attr = S, HP
damage = ceil(102*var(52)/3),ceil(24*var(52)/3) 
;80-6f-61-53-45 05,8d-8a-86-83-80
;82-73-63-54-46(102) ,7f
animtype = Heavy
hitflag = MAF
guardflag = M
pausetime = 7,13 ;3,4
sparkno = -1
guard.sparkno = -1
sparkxy = 0, 0
hitsound = -1;S1,2
guardsound = -1;S3,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.ctrltime = 18
ground.velocity = -5,-6.67
guard.velocity = -8
air.velocity = -5, -6.67
airguard.velocity = -6.3,-1
air.juggle = 8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
getpower = 0,0
givepower = 0,0
forcestand = 1
yaccel = .48
nochainID = root,var(8)
persistent = 0

[State 300]
type = Explod
trigger1 = root,projcontacttime(1500) = 1
trigger1 = var(2) = [1,6]
id = 4021
name = "projhit_s"
pos = P2bodydist X ,0
postype = P1
anim = 4020
ownpal = 1
random = 14,20
ontop = 1
ignorehitpause = 1
pausemovetime = 99999999
supermovetime = 99999999
Persistent = 1

[State 300]
type = VarSet
trigger1 = var(1) = 8
ignorehitpause = 1
var(1) = 0

[State 300]
type = VarSet
trigger1 = root,ProjContacttime(1500) = 1
ignorehitpause = 1
var(1) = 1

[State 300]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 4110]
type = PosFreeze
triggerall = time > 1
trigger1 = var(1)
trigger2 = root,ProjContact1500 = 1
trigger2 = P2dist X < -8
value = 1
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim
trigger1 = var(1)
trigger1 = animelem = 1
value = 6710
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim
trigger1 = var(1)
trigger1 = animelem = 2
value = 6711
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim
trigger1 = var(1)
trigger1 = animelem = 3
value = 6712
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim
trigger1 = var(1)
trigger1 = animelem = 4
value = 6713
ignorehitpause = 1

[State 40, 3]
type = ChangeAnim 
trigger1 = anim = [6710,6713]
trigger1 = animtime = 0
value = 6700
elem = ifelse(anim=6710,1,ifelse(anim=6711,2,ifelse(anim=6712,3,4)))
ignorehitpause = 1

[State 4110]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -55 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(1500)
value = 6705

;---------------------------------------------------------------------------
;真空波動拳(滅殺豪波動)（飛び道具）（消滅）
[Statedef 6705]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 6705

[State 900]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 300]
type = varSet
trigger1 = time = 0
var(2) = 0

[State 410]
type = null;PosAdd
trigger1 = time = 1
trigger1 = P2dist X < -22
x = floor(P2bodydist X) +16

[State 410]
type = DestroySelf
trigger1 = animtime = 0

;------------------------------------------------------------------------------------------
;滅殺豪昇龍(Evil)
[Statedef 3100]
type    = S
movetype = A
physics = S
anim = 3100
juggle = 8
ctrl = 0
velset = 0,0

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 100]
type = Width
trigger1 = 1
edge = ceil(15*const(size.xscale)),0 

[State 170, 1]
type = NotHitBy
trigger1 = AnimElemTime(10) < 0
value = SCA
time = 1

[State 300]
type = SuperPause
trigger1 = Time = 0
time = 16
movetime = 16
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 300]
type = Helper
trigger1 = Time = 1
id = 8000
name = "Super"
pos = ceil(14*const(size.xscale)),ceil(-49*const(size.yscale))
postype = P1
stateno = 8000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 3105]
type = AssertSpecial
trigger1 = movecontact
trigger1 = alive = 1
flag = nokoslow
ignorehitpause = 1

[State 860, 4]
type = PowerAdd
trigger1 = time = 0
value = -3000

[State 1020]
type = AfterImage
trigger1 = Time = 0
time = 999
palpostbright = 0,0,0
PalBright   =  1,1,1
PalContrast =  136, 192, 192
PalAdd      = 0,0,0
PalMul      = .75,.75,.75
;Trans = Add
;TimeGap  = 2
FrameGap = 3
length = 11    

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 11
movetype = I

[State 110]
type = PlaySnd
trigger1 = time = 1
value = 210,0

[State 110]
type = PlaySnd
trigger1 = AnimElem = 7
value = 100,3
channel = 0

[State 110]
type = StateTypeSet
trigger1 = AnimElemTime(3) >= 1
trigger2 = AnimElemTime(9) >= 1
StateType = A
physics = N

[State 110]
type = StateTypeSet
trigger1 = AnimElem = 6
StateType = S
physics = S

[State 110]
type = VelSet
trigger1 = AnimElemTime(3) = 1
x = 5
y = -3.8

[State 110]
type = VelSet
trigger1 = AnimElem = 6
x = 0
y = 0

[State 220]
type = PosSet
trigger1 = AnimElem = 6
y = 0

[State 110]
type = VelSet
trigger1 = AnimElemTime(9) = 1
x = 17.1
y = -13

[State 110]
type = VelMul
trigger1 = AnimElemTime(9) >= 1
x = .9

[State 110]
type = VelSet
trigger1 = AnimElem = 10
x = 0

[State 110]
type = Veladd
trigger1 = AnimElemTime(3) >= 1 && AnimElemTime(6) < 0
trigger2 = AnimElemTime(9) >= 1
y = .525

[State 110]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage = ceil(111*var(52)/3),ceil(28*var(52)/3) ; 80-70-5f-4f-3f,8c-88-84-80
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,9
sparkno = S4050
guard.sparkno = S4050
sparkxy = -5, -55
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 28
ground.hittime  = 28
guard.ctrltime = 28
ground.velocity = -4,0
guard.velocity = -10
air.velocity = -4,-6
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0;-7.5
guard.cornerpush.veloff = -8
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 12
;envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .4
persistent = 0
getpower = 0,0
givepower = 0,0

[State 110]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage = ceil(111*var(52)/3),ceil(28*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,9
sparkno = S4050
guard.sparkno = S4050
sparkxy = 5, -91
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 28
ground.hittime  = 28
guard.ctrltime = 28
ground.velocity = -4,0
guard.velocity = -10
air.velocity = -4,-6
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0;-7.5
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 12
;envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .4
persistent = 0
getpower = 0,0
givepower = 0,0

[State 110]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage = ceil(118*var(52)/3),ceil(28*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,9
sparkno = S4050
guard.sparkno = S4050
sparkxy = -3, -55
hitsound = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 28
ground.hittime  = 28
guard.ctrltime = 28
ground.velocity = -4,0
guard.velocity = -10
air.velocity = -4,-6
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0;-7.5
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 12
;envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .4
persistent = 0
getpower = 0,0
givepower = 0,0

[State 110]
type = HitDef
trigger1 = AnimElem = 8
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage = ceil(111*var(52)/3),ceil(28*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6, 9
sparkno = S4050
guard.sparkno = S4050
sparkxy = -5, -55
hitsound   = S1,2
guardsound = S3,0
ground.type = Low
ground.slidetime = 28
ground.hittime  = 28
guard.ctrltime = 28
ground.velocity = -4,0
guard.velocity = -10
air.velocity = -4,-6
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0;-7.5
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 15
;envshake.ampl = 5
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .4
persistent = 0
getpower = 0,0
givepower = 0,0

[State 110]
type = HitDef
trigger1 = AnimElem = 9
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage = ceil(111*var(52)/3),ceil(28*var(52)/3)
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6, 9
sparkno = S4050
guard.sparkno = S4050
sparkxy = 5, -91
hitsound   = S1,2
guardsound = S3,0
ground.type = High
ground.slidetime = 28
ground.hittime  = 28
guard.ctrltime = 28
ground.velocity = -4,-6
guard.velocity = -10
air.velocity = -4,-6
airguard.velocity = -6.3,-1
ground.cornerpush.veloff = 0;-7.5
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 15
;envshake.ampl = 5
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .4
persistent = 0
getpower = 0,0
givepower = 0,0
forcestand = 1

[State 110]
type = ChangeState
trigger1 = AnimElemTime(9) >= 2
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3105

;---------------------------------------------------------------------------
;滅殺豪昇龍（着地）
[Statedef 3105]
type    = S
physics = S
ctrl = 0
anim = 3105
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52]
type = PlaySnd
trigger1 = Time = 0
value = 4, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;瞬獄殺
[Statedef 3200]
type = S
movetype = A
physics = N
juggle = 8
velset = 0,0
ctrl = 0
poweradd = -3000

[State 220]
type = PosSet
trigger1 = Time = 0
y = 0

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 3200

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 30

[State 3000]
type = SuperPause
trigger1 = Time = 2
time = 14
movetime = 14
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3001]
type = Helper
trigger1 = Time = 2
id = 8000
name = "Super"
pos = ceil(5*const(size.xscale)),ceil(-85*const(size.yscale))
postype = P1
stateno = 8000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 300]
type = PlaySnd
trigger1 = Time = 2
value = 210,0

[State 1020]
type = AfterImage
trigger1 = Time = 2
time = 999
palpostbright = 0,0,0
PalBright   =  1,1,1
PalContrast =  136, 192, 192
PalAdd      = 0,0,0
PalMul      = .75,.75,.75
;Trans = Add
;TimeGap  = 2
FrameGap = 3
length = 11    

[State 1100]
type = VelSet
trigger1 = Time = 17
x = 8

[State 3200]
type = StateTypeSet
triggerall = P2movetype = H
trigger1 = Animelem = 2,>= 0
trigger1 = animelem = 3,< 0
movetype = I

[State 3200]
type = StateTypeSet
triggerall = P2movetype != H
trigger1 = Animelem = 2,>= 0
trigger1 = animelem = 3,< 0
movetype = A

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 1200, 1]
type = HitDef
triggerall = P2movetype != H
triggerall = P2StateNo != [150,155]
trigger1 = animelem = 2,>= 0
trigger1 = animelem = 3,< 0
attr = S, HT
hitflag = M-
numhits = 0
priority = 7, Miss
sparkno = -1
hitsound = -1
p1stateno = 3201
p2stateno = 3209
p1facing = 1
p2facing = 1
fall = 1
fall.recover = 0

[State 1200, 2]
type = ChangeState
Trigger1 = AnimTime = 0
Trigger2 = frontedgedist <= 1 && animelemtime(2) > 1
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;瞬獄殺（hit）
[Statedef 3201]
type    = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 3201
velset = 0,0

[State 901]
type = TargetState
trigger1 = AnimElem = 1
value = 3205

[State 300]
type = Width
trigger1 = Time = 0
edge = ceil(50*const(size.xscale)),0

[State 901,1]
type = targetBind
trigger1 = animelem = 1
pos = ceil(45*const(size.xscale)),0
postype = P1

[State 200, 2]
type = VarSet
trigger1 = time = 1
var(5) = target,const(data.life)

[State 310]
type = AssertSpecial
trigger1 = Time = [12,68]
flag = NoBarDisplay

[State 310]
type = AssertSpecial
trigger1 = Time = [12,68]
flag =  NoBG
flag2 = NoFG
flag3 = timerfreeze

[State 310]
type = AssertSpecial
trigger1 = Time = [12,68]
flag = GlobalNoShadow

[State 411]
type = Explod
trigger1 = Time = [12,68]
anim = 8005
id = 8005
pos = 0,0
postype = Left
sprpriority = -10
bindtime = 1
ownpal = 1

[State 3000]
type = AfterImage
trigger1 = time = 0;12
time = 0
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast =  150,50,50
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1

[State 960]
type = Playsnd
trigger1 = (Time = [18,60]) && Time % 3 = 0
value = 200,1 ;2,2+((random%2)*3)
channel = 10

[State 411]
type = Explod
trigger1 = (Time = [18,60]) && Time % 3 = 0
anim = 4020
id = 8201
pos = 20+2*(random%21),-140+5*(random%28)
postype = P1
sprpriority = 5
bindtime = 1
ownpal = 1
;random =  60,120 ;80,80

[State 310]
type = TargetLifeAdd
trigger1 = Time = 68
value = ceil(-550*var(52)/3)

[State 310]
type = AssertSpecial
trigger1 = 1
flag = NoKOSlow

[State 310]
type = AssertSpecial
trigger1 = win
flag = NoMusic

[State 900]
type = TargetState
trigger1 = Time = 69
value = 3206

[State 200, 2]
type = ChangeState
trigger1 = Time = 69
value = 3202

;---------------------------------------------------------------------------
;瞬獄殺（hit）（相手）1
[Statedef 3205]
type    = S
movetype = H
physics = N
juggle = 0
ctrl = 0
velset = 0, 0
sprpriority = -1

[State 200, 2]
type = ChangeAnim2
trigger1 = time = 0
value = 3205

;---------------------------------------------------------------------------
;瞬獄殺（hit）（相手）2
[Statedef 3206]
type    = L
movetype = H
physics = N
juggle = 0
ctrl = 0
anim = 5110
velset = 0, 0
sprpriority = -1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3110]
type = SelfState
trigger1 = Time = 100
value = ifelse(alive, 5120, 5150)

;---------------------------------------------------------------------------
;瞬獄殺（hit）（相手）3
[Statedef 3209]
type    = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 120]
type = selfstate
trigger1 = Time > 5
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;瞬獄殺（終了）
[Statedef 3202]
type = S
ctrl = 0
anim = 3202
velset = 0,0

[State 900, 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 3830,0]
type = Changeanim
trigger1 = Time = 0
trigger1 = win
value = 3203

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State -2]
type = Helper
trigger1 = Win
trigger1 = Time = 0
ID = 8011
stateno = 8011
postype = left
pos = 0,0
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
ownpal = 1

[State 120]
type = Explod
trigger1 = Win
trigger1 = Time = 0
anim = 8015
id = 8015
pos = 0,0
postype = Left
sprpriority = -7
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0
scale = 0.5,0.5
pausemovetime = 999999
supermovetime = 999999

[State 200, 2]
type = Playsnd
trigger1 = Win
trigger1 = Time = 0
value = 300, 30
channel = 10
abspan = 0

[State 3810,5]
type = Changestate
triggerall = anim = 3203
trigger1 = animTime = 0
value = 0
ctrl = 1

[State 3810,5]
type = Changestate
trigger1 = animTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;common state
;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = ifelse(GetHitVar(fall) = 1,5031,5030)

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type    = C
movetype= H
physics = N
velset = 0,0

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = ifelse(GetHitVar(fall) = 1,5031,5030)

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
triggerall = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5011 ;HITC_SLIDE

[State 5010, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140


;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK,fall
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = ifelse(GetHitVar(fall) = 1,5031,5030)

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 5030]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 5035 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5040]
type    = A
movetype= H
physics = N

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

[State 5040, 3]
type = null ;CtrlSet
trigger1 = HitOver
value = 1

[State 5150, 8]
type = NotHitBy
trigger1 = HitOver
trigger1 = stateno = 5040
value = SCA
time = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5150, 8]
type = NotHitBy
trigger1 = CanRecover
value = SCA
time = 1

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = null;GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = null;GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = S
movetype = I
physics = N
;anim = 5200
ctrl = 0
velset = 0,0

[State 5050, 6]
type = ChangeState
trigger1 = time = 0
value = 5100 ;HIT_BOUNCE

[State 5050, 6]
type = ChangeAnim
trigger1 = time = 0
value = 5200

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
x = -6

[State 5201, 2]
type = VelSet
trigger1 = vel X > -.1
x = 0

[State 5201, 2]
type = VelMul
trigger1 = 1
x = .95

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 5

[State 5201, 5] ;Blink white
type = null;PalFX
trigger1 = Time = 0
time = 2
add = 128,128,128 ;256,256,256

[State 5900, 3]
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER
[Statedef 5210]
type    = A
movetype= I
physics = N
;anim = 5210
ctrl = 0

[State 5050, 6]
type = ChangeState
trigger1 = time = 0
trigger1 = Pos Y <= -5
value = 5050

[State 5050, 6]
type = ChangeState
trigger1 = time = 0
trigger1 = Pos Y > -5
value = 5100

[State 5050, 6]
type = ChangeAnim
trigger1 = time = 0
value = 5210

[State 5210, 1] ;Blink white
type = null;PalFX
trigger1 = Time = 0
time = 2
add = 128,128,128 ;256,256,256

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
x = .8
y = .8

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
y = -4.5

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1

[State 5210, 2] ;Go up
type = null;VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdup"
y = -2

[State 5210, 2] ;Go down
type = null;VelAdd
trigger1 = Time = 4
trigger1 = Command = "holddown"
y = 1.5

[State 5210, 2] ;Go fwd
type = null;VelMul
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
x = 1

[State 5210, 2] ;Go back
type = null;VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdback"
x = -1

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 16
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = Time >= 4
y = .5

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 860, 4]
type = PowerSet
trigger1 = time = 0
trigger1 = var(10) = 1
value = 0

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = roundno = 1
value = 190

;---------------------------------------------------------------------------
;helper def
;---------------------------------------------------------------------------
;燃焼エフェクト（ground）
[Statedef 7200]
type = A
movetype = I
physics = N
ctrl = 0
anim = 8011

[State 18600, PosSet]
type = PosSet
trigger1 = 1
x = enemynear,pos x
y = enemynear,pos y
ignorehitpause = 1

[State -2]
type = RemoveExplod
triggerall = NumExplod(7200)
trigger1 = enemynear,statetype = C
ID = 7200

[State -2]
type = RemoveExplod
triggerall = NumExplod(7210)
trigger1 = enemynear,statetype = S
ID = 7210

[State -2]
type = RemoveExplod
triggerall = NumExplod(7220)
trigger1 = enemynear,statetype = S
trigger2 = enemynear,statetype = C
ID = 7220

[State -2]
type = Explod
triggerall = enemynear,statetype = S
trigger1 = time = 0
trigger2 = !NumExplod(7200)
anim = 7200 ;ifelse((target,Const(size.ground.front))+(target,Const(size.ground.back))>40,3115,3100)
id = 7200
pos = 0,0
postype = P2
bindtime = -1
scale = const(size.xscale),const(size.yscale)
RemoveTime = -1
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State -2]
type = Explod
triggerall = enemynear,statetype = C
trigger1 = time = 0
trigger2 = !NumExplod(7210)
anim = 7210 ;ifelse((target,Const(size.ground.front))+(target,Const(size.ground.back))>40,3125,3110)
id = 7210
pos = 0,0
postype = P2
bindtime = -1
RemoveTime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State -2]
type = Explod
triggerall = enemynear,statetype = A
trigger1 = !NumExplod(7220)
trigger2 = roundstate = 3
anim = 7220 ;ifelse((target,Const(size.ground.front))+(target,Const(size.ground.back))>40,3120,3105)
id = 7220
pos = 0,0
postype = P2
bindtime = -1
scale = const(size.xscale),const(size.yscale)
RemoveTime = -1
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State 520]
type = VarSet
triggerall = enemynear,statetype = A
trigger1 = NumExplod(7220)
var(1) = 1

[State 4110, ChangeState]
type = ChangeState
triggerall = time >= 1
trigger1 = enemynear,statetype = A
trigger1 = enemynear,movetype = H
value = 7220

[State 4110, ChangeState]
type = ChangeState
trigger1 = enemynear,statetype = L
trigger2 = !(enemynear,movetype = H && (enemynear,stateno = [2000,2021]))
value = 7221

;---------------------------------------------------------------------------
;燃焼エフェクト（air）
[Statedef 7220]
type = A
movetype = I
physics = N
ctrl = 0
anim = 8011

[State 8300, PosSet]
type = PosSet
trigger1 = 1
x = enemynear,pos x
y = enemynear,pos y
ignorehitpause = 1

[State -2]
type = RemoveExplod
trigger1 = NumExplod(7200)
ID = 7200

[State -2]
type = RemoveExplod
trigger1 = NumExplod(7210)
ID = 7210

[State -2]
type = RemoveExplod
trigger1 = NumExplod(7220)
trigger1 = time = 0
trigger1 = var(1) = 1
ID = 7220

[State -2]
type = Explod
triggerall = enemynear,statetype = A
trigger1 = !NumExplod(7220)
trigger2 = !NumExplod(7220)
trigger2 = time = 0
anim = 7220 ;ifelse((target,Const(size.ground.front))+(target,Const(size.ground.back))>40,3120,3105)
id = 7220
pos = 0,0
postype = P2
bindtime = -1
scale = const(size.xscale),const(size.yscale)
RemoveTime = -1
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State 4110, ChangeState]
type = ChangeState
triggerall = time >= 1
trigger1 = enemynear,statetype = S || enemynear,statetype = C
trigger1 = enemynear,movetype = H
value = 7200

[State 4110, ChangeState]
type = ChangeState
trigger1 = enemynear,statetype = L
trigger2 = roundstate = 2
trigger2 = !(enemynear,movetype = H && (enemynear,stateno = [2020,2021]))
value = 7221

;---------------------------------------------------------------------------
;燃焼エフェクト（消滅）
[Statedef 7221]
type = A
movetype = I
physics = N
ctrl = 0
anim = 8011

[State -2]
type = RemoveExplod
trigger1 = 1
ID = 7200

[State -2]
type = RemoveExplod
trigger1 = 1
ID = 7210

[State -2]
type = RemoveExplod
trigger1 = time = ifelse(enemynear,prevstateno = 2021,1,0)
trigger2 = time >= 2
ID = 7220

[State 410]
type = DestroySelf
trigger1 = Time = 2

;---------------------------------------------------------------------------
;super
[Statedef 8000]
ctrl = 0
anim = 8011

[State 1000, 3]
type = null;BindToParent
trigger1 = 1
time = -1
pos = 0,0

[State 1200]
type = Explod
trigger1 = Time = 0
anim = 8000
id = 8000
pos = 0,0
postype = P1
bindtime = -1
ownpal = 1
ontop = 1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 1
pausemovetime = 99999999
supermovetime = 99999999

[State 9020]
type = DestroySelf
trigger1 = time = 13

;---------------------------------------------------------------------------
;KO時演出
[Statedef 8011]
ctrl = 0
anim = 8011

[State 310]
type = AssertSpecial
trigger1 = Time <= 97
flag = NoBarDisplay
flag2 = NoMusic

[State 310]
type = AssertSpecial
trigger1 = Time <= 97
flag = globalnoshadow
flag2 = NoBG
flag3 = noFG

[State 310]
type = PlaySnd
triggerall = root,stateno != [3200,3299]
trigger1 = time = 1
value = 210,10
ignorehitpause = 1
abspan = 0

[State 120]
type = Explod
trigger1 = Time = 0
anim = 8010
id = 8010
pos = 0,0
postype = Left
sprpriority = -8
bindtime = -1
ownpal = 1
ignorehitpause = 1
scale = 0.5,0.5
;removetime = 97
pausemovetime = 99999999
supermovetime = 99999999

[State 120]
type = RemoveExplod
trigger1 = Time = 98
id = 8010

[State 902]
type = DestroySelf
trigger1 = time = 97
trigger2 = time = 99

;---------------------------------------------------------------------------
;win表示
[Statedef 8030]
ctrl = 0
anim = 8011

[State 310]
type = PlaySnd
trigger1 = time = 1
value = 105,ifelse(WinPerfect,5,0)
abspan = 0

[State 120]
type = Explod
trigger1 = Time = 1
anim = 8030
id = 8030
pos = 0,-8
postype = Left
ontop = 1
bindtime = -1
ownpal = 1
;removetime = -1; 91
pausemovetime = 99999999
supermovetime = 99999999

[State 902]
type = DestroySelf
trigger1 = time = 50

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
